{"meta":{"title":"ä¸²ä¸€ä¸²","subtitle":"æ–­èˆç¦»","description":null,"author":"cc","url":"http://luxiaowan.github.io","root":"/"},"pages":[{"title":"å…³äºæœ¬äºº","date":"2019-10-21T15:26:09.000Z","updated":"2019-10-21T15:28:30.066Z","comments":true,"path":"about/index.html","permalink":"http://luxiaowan.github.io/about/index.html","excerpt":"","text":"ä¸²ä¸€ä¸² æµªäºº éå¸¸æ‡’ï¼Œå¶å°”å†™ä¸€ä¸‹ æ–‡ç¬”å¾ˆçƒ‚ï¼Œå†™çš„ä¸å¥½ å‡‘åˆçœ‹å§"},{"title":"æ¨èä¹¦å•","date":"2019-10-21T15:38:29.000Z","updated":"2019-10-21T15:56:47.928Z","comments":true,"path":"books/index.html","permalink":"http://luxiaowan.github.io/books/index.html","excerpt":"","text":"ä¹¦å è´­ä¹°åœ°å€ JavaScriptæƒå¨æŒ‡å—ï¼ˆç¬¬6ç‰ˆï¼‰ JavaScripté«˜çº§ç¨‹åºè®¾è®¡ Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰ javaå¹¶å‘ç¼–ç¨‹å®æˆ˜ Nettyæƒå¨æŒ‡å—ï¼ˆç¬¬2ç‰ˆï¼‰ Spring Bootå®æˆ˜ Springå¾®æœåŠ¡å®æˆ˜ Word Excel PPT 2016å…¥é—¨ä¸æé«˜ ç¼–ç¨‹ç ç‘ï¼ˆç¬¬2ç‰ˆï¼‰ æ“ä½œç³»ç»ŸçœŸè±¡è¿˜åŸ å¤§å‹ç½‘ç«™ç³»ç»Ÿä¸Javaä¸­é—´ä»¶å®è·µ é«˜æ€§èƒ½JavaScript é«˜æ€§èƒ½MySQLï¼ˆç¬¬3ç‰ˆï¼‰ æœºå™¨å­¦ä¹  æç®€æ€ç»´ æŠ€æœ¯è¿è¥ äººæ€§çš„å¼±ç‚¹ è®¾è®¡æ¨¡å¼è§£æï¼ˆç¬¬2ç‰ˆï¼‰ è®¾è®¡æ¨¡å¼ä¹‹ç¦… æ·±åº¦æ€ç»´ æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº æ·±å…¥æµ…å‡ºNode.js æ·±å…¥æµ…å‡ºReactå’ŒRedux ç§»åŠ¨Webå‰ç«¯é«˜æ•ˆå¼€å‘å®æˆ˜ äº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ åŸåˆ™ æ€æ ·ç®¡ç²¾åŠ›å°±æ€æ ·è¿‡ä¸€ç”Ÿ é‡æ„æ”¹å–„æ—¢æœ‰ä»£ç çš„è®¾è®¡ Excelé«˜æ•ˆåŠå…¬ï¼šæ•°æ®å¤„ç†ä¸åˆ†æï¼ˆä¿®è®¢ç‰ˆï¼‰ é¡¹ç›®ç®¡ç†è‰ºæœ¯ å‘¨é¸¿ç¥è‡ªè¿° æˆ‘çš„äº’è”ç½‘æ–¹æ³•è®º å¥‡ç‚¹ä¸´è¿‘ é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ ä¸‰æ¿æ–§ï¼šé˜¿é‡Œå·´å·´ç®¡ç†ä¹‹é“ æ˜é‡‘ç§»åŠ¨äº’è”ï¼šè·¨å¢ƒç”µå•†å¦‚ä½•æŒ‘æˆ˜æµ·å¤–å¸‚åœº å¾®ä¿¡æ€ç»´ ç³»ç»Ÿä¹‹ç¾:å†³ç­–è€…çš„ç³»ç»Ÿæ€è€ƒ æ€è€ƒï¼Œå¿«ä¸æ…¢ åˆ›æ–°è€…çš„çª˜å¢ƒ å¾®æœåŠ¡è®¾è®¡ Scrumæ•æ·è½¯ä»¶å¼€å‘ ç®¡ç†çš„å®è·µ"},{"title":"åˆ†ç±»","date":"2019-10-21T15:29:38.000Z","updated":"2019-10-21T15:32:44.295Z","comments":true,"path":"categories/index.html","permalink":"http://luxiaowan.github.io/categories/index.html","excerpt":"","text":""},{"title":"å‹æƒ…é“¾æ¥","date":"2019-10-21T15:42:43.000Z","updated":"2019-10-21T15:57:01.607Z","comments":true,"path":"links/index.html","permalink":"http://luxiaowan.github.io/links/index.html","excerpt":"","text":"æœ¬äººè¿˜æ²¡å‹é“¾ï¼Œå­¤ç‹¬å°å®¢"},{"title":"ä¸ªäººé¡¹ç›®","date":"2019-10-21T15:54:25.000Z","updated":"2019-10-21T15:57:51.353Z","comments":true,"path":"repository/index.html","permalink":"http://luxiaowan.github.io/repository/index.html","excerpt":"","text":"https://github.com/luxiaowan"},{"title":"æ ‡ç­¾","date":"2019-10-21T15:35:35.000Z","updated":"2019-10-21T15:35:54.071Z","comments":true,"path":"tags/index.html","permalink":"http://luxiaowan.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"RMIè¿œç¨‹æœåŠ¡è°ƒç”¨ç®€è¿°","slug":"RMIè¿œç¨‹æœåŠ¡è°ƒç”¨ç®€è¿°","date":"2020-03-19T16:15:00.000Z","updated":"2020-03-19T17:50:31.146Z","comments":true,"path":"2020/03/20/RMIè¿œç¨‹æœåŠ¡è°ƒç”¨ç®€è¿°/","link":"","permalink":"http://luxiaowan.github.io/2020/03/20/RMIè¿œç¨‹æœåŠ¡è°ƒç”¨ç®€è¿°/","excerpt":"","text":"RMIæ˜¯ä»€ä¹ˆ RMI(Remote Method Invocation)æ„ä¸ºè¿œç¨‹æ–¹å¼è°ƒç”¨ï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯Javaç‰ˆçš„RPCå®ç°æŠ€æœ¯ï¼Œæ˜¯å»ºç«‹åˆ†å¸ƒå¼Javaåº”ç”¨ç¨‹åºçš„æ–¹ä¾¿é€”å¾„ã€‚RMIæ˜¯åŸºäºæ¥å£çš„ï¼Œä¸€èˆ¬æ˜¯æ¥å£å®šä¹‰å’Œå®ç°åˆ†å¼€åœ¨ä¸åŒçš„å·¥ç¨‹ä¸­ã€‚ ç›¸ä¼¼ï¼šHessianï¼ŒBurlapï¼ŒHttpinvokerï¼Œwebservice ä¸ºä»€ä¹ˆä½¿ç”¨RMI å®ƒå…è®¸è¿è¡Œåœ¨ä¸€å°è™šæ‹Ÿæœºä¸Šçš„æ–¹æ³•è°ƒç”¨è¿è¡Œåœ¨å¦ä¸€å°è™šæ‹Ÿæœºä¸Šçš„å¯¹è±¡æ–¹æ³•ï¼Œè¿™æ ·å¯ä»¥è®©æ¯ä¸ªä»»åŠ¡è¿è¡Œåœ¨æ›´é€‚åˆçš„è™šæ‹Ÿæœºä¸Šã€‚ RMIæ€ä¹ˆç”¨ å®šä¹‰ä¸€ä¸ªjava.rmi.Remoteçš„å­æ¥å£ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£AnimalServiceï¼Œç»§æ‰¿è‡ªRemoteï¼Œæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•å¿…é¡»æ˜¾å¼çš„æŠ›å‡ºjava.rmi.RemoteExceptionå¼‚å¸¸ï¼Œå¦åˆ™æœåŠ¡ä¼šæ³¨å†Œå¤±è´¥ï¼Œè°¨è®°! åˆ›å»ºAnimalServiceçš„å®ç°ç±»DogServiceImplï¼Œè¿™ä¸ªç±»éœ€è¦ç»§æ‰¿java.rmi.server.UnicastRemoteObject å°†æœåŠ¡AnimalServiceæ³¨å†Œåˆ°rmiä¸­å¿ƒ å®¢æˆ·ç«¯å¼•ç”¨æ¥å£å®šä¹‰jaråŒ… å®¢æˆ·ç«¯è·å–AnimalServiceçš„è¿œç¨‹æœåŠ¡ è¿›è¡Œç›¸å…³æ–¹æ³•è°ƒç”¨ ç¼ºç‚¹ å› ä¸ºRMIæ˜¯Javaç‰ˆçš„RPCé€šè®¯æŠ€æœ¯ï¼Œæ‰€ä»¥ä»–åªé€‚ç”¨äºJavaç¨‹åºä¸Šï¼Œå¦‚æœæƒ³è·¨è¯­è¨€é€šè®¯ï¼Œé‚£å°±åªèƒ½å¦è°‹å®ƒæ³•äº† ä»£ç  æ¥å£ï¼ˆå·¥ç¨‹ï¼šrmi-apiï¼‰ 123456789import java.rmi.Remote;import java.rmi.RemoteException;public interface AnimalService extends Remote &#123; // æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•å¿…é¡»å£°æ˜throws RemoteException void laugh() throws RemoteException;&#125; å®ç°ï¼ˆå·¥ç¨‹ï¼šrmi-serviceï¼‰ 12345678910111213141516import java.rmi.RemoteException;import java.rmi.server.UnicastRemoteObject;import cc.kevinlu.spidemo.spi.AnimalService;public class DogServiceImpl extends UnicastRemoteObject implements AnimalService &#123; protected DogServiceImpl() throws RemoteException &#123; super(); &#125; @Override public void laugh() throws RemoteException &#123; System.out.println(\"æ±ªæ±ª!\"); &#125;&#125; Server 123456789101112131415161718192021import java.rmi.Naming;import java.rmi.registry.LocateRegistry;import cc.kevinlu.spidemo.spi.AnimalService;public class Server &#123; public static void main(String[] args) throws Exception &#123; AnimalService dogService = new DogServiceImpl(); AnimalService lionService = new LionServiceImpl(); // è®¾ç½®æœåŠ¡æä¾›çš„ç«¯å£ LocateRegistry.createRegistry(8891); // è®¾ç½®rmiçš„hostä¸º127.0.0.1ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°connect refusedé”™è¯¯ System.setProperty(\"java.rmi.server.host\", \"127.0.0.1\"); // å‘å¸ƒæœåŠ¡ Naming.bind(\"rmi://127.0.0.1:8891/dogs\", dogService); System.out.println(\"dog service publish success!\"); &#125;&#125; å®¢æˆ·ç«¯ï¼ˆrmi-clientï¼šå¼•ç”¨rmi-apiï¼‰ æ­£å¸¸æƒ…å†µ 12AnimalService dogService = (AnimalService) Naming.lookup(\"rmi://127.0.0.1:8891/dogs\");dogService.laugh(); åå°„çš„æ–¹å¼å»å›è°ƒæ–¹æ³• 123Object obj = Naming.lookup(\"rmi://127.0.0.1:8891/dogs\");Method method = obj.getClass().getMethod(\"laugh\");method.invoke(obj, null);","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"è®¾ç½®ç”ŸæˆCGLibå’ŒJDKä»£ç†ç”Ÿæˆçš„classæ–‡ä»¶","slug":"è®¾ç½®ç”ŸæˆCGLibå’ŒJDKä»£ç†ç”Ÿæˆçš„classæ–‡ä»¶","date":"2020-03-17T13:20:00.000Z","updated":"2020-03-17T13:54:16.360Z","comments":true,"path":"2020/03/17/è®¾ç½®ç”ŸæˆCGLibå’ŒJDKä»£ç†ç”Ÿæˆçš„classæ–‡ä»¶/","link":"","permalink":"http://luxiaowan.github.io/2020/03/17/è®¾ç½®ç”ŸæˆCGLibå’ŒJDKä»£ç†ç”Ÿæˆçš„classæ–‡ä»¶/","excerpt":"","text":"jdkå’Œcglibä»£ç†æ–¹å¼å±äºæ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œè¿™é‡Œå°±ä¸è¯´äº†ï¼Œæˆ‘ä»¬è¯´ä¸€ä¸‹ç‰¹åˆ«çš„ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“cglibæ˜¯é’ˆå¯¹äºç±»ï¼Œjdkæ˜¯é’ˆå¯¹äºæ¥å£ï¼Œ cglibåœ¨ç›®æ ‡ç±»è¢«ä»£ç†åä¼šè‡ªåŠ¨ç”Ÿæˆç›®æ ‡ç±»çš„å­ç±»ï¼Œä¹Ÿå°±æ˜¯xxxclass$$EnhancerByCGLIB$$c03f68c4.class jdkä»£ç†åä¼šè‡ªåŠ¨ç”Ÿæˆç›®æ ‡æ¥å£çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯$Proxy0.class æˆ‘ä»¬å¹³æ—¶ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šç”Ÿæˆä»£ç†ç±»çš„classæ–‡ä»¶ï¼Œåªæœ‰åœ¨è¿è¡Œä¸­æ‰ä¼šç”Ÿæˆ æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å¯åŠ¨ç±»ä¸­è®¾ç½®ä»£ç†ç±»ç”Ÿæˆè·¯å¾„ 1234// è®¾ç½®CGLibä»£ç†ç±»çš„ç”Ÿæˆä½ç½®System.setProperty(DebuggingClassWriter.DEBUG_LOCATION_PROPERTY, \"./cg\");// è®¾ç½®JDKä»£ç†ç±»çš„è¾“å‡ºSystem.getProperties().put(\"sun.misc.ProxyGenerator.saveGeneratedFiles\", \"true\");","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"Linuxæ›´æ¢yumæº","slug":"Centosæ›´æ¢yumæº","date":"2020-03-12T05:05:00.000Z","updated":"2020-03-12T13:35:37.430Z","comments":true,"path":"2020/03/12/Centosæ›´æ¢yumæº/","link":"","permalink":"http://luxiaowan.github.io/2020/03/12/Centosæ›´æ¢yumæº/","excerpt":"","text":"æˆ‘ä»¬å®‰è£…çš„Linuxè™šæ‹Ÿæœºæˆ–è´­ä¹°çš„äº‘æœåŠ¡å™¨ä¸Šé»˜è®¤ä½¿ç”¨çš„yumæºåœ¨å›½å†…æœ‰æ—¶å€™ä¼šä¼ è¾“å¾ˆæ…¢ï¼Œç°åœ¨å¤§å¤šæˆ‘ä»¬åœ¨ä½¿ç”¨Linuxä¹‹å‰éƒ½ä¼šä¿®æ”¹ä¸€ä¸‹yumæºï¼Œä»¥ä¸‹ä»¥centosä¸ºä¾‹ï¼Œå°†yumæºä¿®æ”¹ä¸ºé˜¿é‡Œäº‘çš„ã€‚å¯ä»¥åˆ°https://developer.aliyun.com/mirror/ä¸­æŸ¥çœ‹å¸®åŠ© å¤‡ä»½æœºå™¨ä¸­çš„æºæ–‡ä»¶ å¤‡ä»½çš„ç›®çš„æ˜¯ä¸ºäº†æ“ä½œå¤±è´¥åå¯ä»¥éšæ—¶å›æ»š 1mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak ä¸‹è½½æ–°çš„ CentOS-Base.repo åˆ° /etc/yum.repos.d/ æˆ‘ä»¬çš„yumæºé…ç½®æ–‡ä»¶åœ¨/etc/yum.repos.d/ç›®å½•ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†é˜¿é‡Œäº‘çš„repoæ–‡ä»¶ä¸‹è½½åˆ°è¯¥ç›®å½•ä¸‹ï¼ˆå¯ä»¥æ ¹æ®ç³»ç»Ÿç‰ˆæœ¬åˆ°http://mirrors.aliyun.com/repo/æŸ¥çœ‹å¯¹åº”çš„æ–‡ä»¶ï¼‰ 123456# è¦ä¸‹è½½ä¸ç³»ç»Ÿç‰ˆæœ¬ä¸€è‡´çš„repoæ–‡ä»¶wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repoæˆ–curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo è¿è¡Œyum makecacheç”Ÿæˆç¼“å­˜ é—®é¢˜ è‹¥å‡ºç°Couldnâ€™t resolve host 'mirrors.cloud.aliyuncs.comâ€™çš„ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºç½‘ç»œä¸é€šï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢å‘½ä»¤ä¿®æ”¹repoæ–‡ä»¶ï¼š 1sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo","categories":[{"name":"Linux","slug":"Linux","permalink":"http://luxiaowan.github.io/categories/Linux/"}],"tags":[]},{"title":"kubernatesè°ƒæ•´nodePortç«¯å£èŒƒå›´","slug":"kubernatesè°ƒæ•´nodePortç«¯å£èŒƒå›´","date":"2020-03-11T08:02:00.000Z","updated":"2020-03-11T08:12:05.657Z","comments":true,"path":"2020/03/11/kubernatesè°ƒæ•´nodePortç«¯å£èŒƒå›´/","link":"","permalink":"http://luxiaowan.github.io/2020/03/11/kubernatesè°ƒæ•´nodePortç«¯å£èŒƒå›´/","excerpt":"","text":"é»˜è®¤æƒ…å†µä¸‹ï¼Œk8s é›†ç¾¤ nodePort åˆ†é…çš„ç«¯å£èŒƒå›´ä¸ºï¼š30000-32767ï¼Œå¦‚æœæˆ‘ä»¬æŒ‡å®šçš„ç«¯å£ä¸åœ¨è¿™ä¸ªèŒƒå›´å°±ä¼šæŠ¥é”™ï¼š Error: release kong failed: Service â€œxxxâ€ is invalid: spec.ports[0].nodePort: Invalid value: 12306: provided port is not in the valid range. The range of valid ports is 30000-32767 æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ /etc/kubernetes/manifests/kube-apiserver.yaml æ–‡ä»¶ï¼Œåœ¨ command ä¸‹æ·»åŠ  --service-node-port-range=1-65535 å‚æ•°ï¼Œæ·»åŠ  nodePort èŒƒå›´å‚æ•°åä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œæ— éœ€è¿›è¡Œå…¶ä»–æ“ä½œï¼š vim /etc/kubernetes/manifests/kube-apiserver.yaml","categories":[{"name":"kubernates","slug":"kubernates","permalink":"http://luxiaowan.github.io/categories/kubernates/"}],"tags":[]},{"title":"Centos7.7å®‰è£…kubernatesé›†ç¾¤","slug":"Centos7.7å®‰è£…kubernatesé›†ç¾¤","date":"2020-03-11T05:11:00.000Z","updated":"2020-03-11T06:52:52.764Z","comments":true,"path":"2020/03/11/Centos7.7å®‰è£…kubernatesé›†ç¾¤/","link":"","permalink":"http://luxiaowan.github.io/2020/03/11/Centos7.7å®‰è£…kubernatesé›†ç¾¤/","excerpt":"","text":"åŸºç¡€ æœ¬æ–‡ä¸»è¦è®²è§£ä½¿ç”¨kubeadmæ­å»ºé«˜å¯ç”¨çš„é›†ç¾¤ï¼Œè¿™ç§æ–¹å¼æ˜¯æœ€ç®€å•æœ€å¿«çš„ã€‚ å®‰è£…æ­¥éª¤ æˆ‘ä»¬å®‰è£…k8sçš„æœºå™¨èµ„æºæ¡ä»¶å¦‚ä¸‹ï¼š centos7.7 å†…å­˜ä¸ä½äº2Gï¼ŒCPUä¸å°‘äº2æ ¸ï¼Œå¦åˆ™åœ¨å®‰è£…çš„æ—¶å€™ä¼šæŠ¥é”™ é›†ç¾¤ä¸­çš„æ‰€æœ‰æœºå™¨éƒ½è¦ä¿è¯ç½‘ç»œè¿é€šæ€§ ç›¸å…³ç«¯å£å¼€æ”¾ swapå…³é—­ æ›´æ–°ç³»ç»Ÿ åœ¨å¼€å§‹å®‰è£…æœåŠ¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ›´æ–°ä¸€ä¸‹yumæºï¼Œç„¶åå®‰è£…ç›¸å…³çš„è½¯ä»¶ 12345# æ›´æ–°yumæºyum update# å®‰è£…git(å¯é€‰)yum install git ç¦ç”¨swapåˆ†åŒº 12345# å…³é—­swapåˆ†åŒºï¼Œè¯¥å‘½ä»¤åªæ˜¯ä¸´æ—¶å…³é—­ï¼Œæœºå™¨é‡å¯åè¿˜ä¼šè‡ªåŠ¨æ‰“å¼€swapoff -a# æ°¸ä¹…æ€§å…³é—­swapåˆ†åŒºï¼Œç¦æ­¢æœºå™¨é‡å¯åè‡ªåŠ¨æ‰“å¼€sed -i '/ swap / s/^/#/' /etc/fstab æ›´æ¢yumæºä¸ºå›½å†…é•œåƒ centosçš„yumæºé»˜è®¤ä¸ºå›½å¤–çš„ï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯åœ¨å›½å†…ï¼Œé‚£ä¹ˆå¯èƒ½è®¿é—®ä¸äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠyumçš„æºæ›´æ¢ä¸ºå›½å†…çš„ 123456# è¿™é‡Œæœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ï¼Œå°±æ˜¯ä¸‹é¢çš„Centos-7.repoï¼Œè¿™é‡Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„centos7ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿæ˜¯centos8ï¼Œé‚£ä¹ˆå°±æ”¹æˆCentos-8.repoï¼Œä¹Ÿå°±æ˜¯æ”¹æˆç›¸å¯¹åº”çš„ç‰ˆæœ¬ï¼Œå¦åˆ™yumå®‰è£…ä¸äº†è½¯ä»¶cd /etc/yum.repos.d &amp;&amp; \\sudo mv CentOS-Base.repo CentOS-Base.repo.bak &amp;&amp; \\sudo wget -O CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo &amp;&amp; \\yum clean all &amp;&amp; \\yum makecache å®‰è£…dockerç¯å¢ƒ k8så†…éƒ¨å¯ä»¥æ”¯æŒå¤šç§å®¹å™¨ï¼Œæˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„å°±æ˜¯dockerï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä¹Ÿä»¥dockerä¸ºåŸºç¡€ 1234567891011121314151617181920212223242526272829303132333435363738394041# å®‰è£…dockerä¾èµ–åŒ…yum install yum-utils device-mapper-persistent-data lvm2# æ·»åŠ dockeråº“yum-config-manager --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo# æ›´æ–°æºyum update# å®‰è£…dockeryum install containerd.io-1.2.10 \\ docker-ce-19.03.4 \\ docker-ce-cli-19.03.4# é…ç½®docker daemonmkdir /etc/dockercat &gt; /etc/docker/daemon.json &lt;&lt;EOF&#123; \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": &#123; \"max-size\": \"100m\" &#125;, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ]&#125;EOF# åˆ›å»ºdocker.service.dmkdir -p /etc/systemd/system/docker.service.d# å¯ç”¨docker.servicesystemctl enable docker.service# é‡è½½&amp;é‡å¯dockersystemctl daemon-reloadsystemctl restart docker å®‰è£…å®Œä¹‹åä½¿ç”¨docker -væŸ¥çœ‹ç‰ˆæœ¬ æ›´æ¢dockerä¸ºå›½å†…æº 123456789# é…ç½®tee /etc/docker/daemon.json &lt;&lt;-'EOF'&#123;\"registry-mirrors\": [\"https://registry.docker-cn.com\"]&#125;EOF# é‡å¯dockerservice docker restart å®‰è£…kubeadmã€kubeletã€å’Œkubectl kubeadm è´Ÿè´£å¼•å¯¼é›†ç¾¤ï¼Œkubelet åœ¨é›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹è¿è¡Œï¼Œè´Ÿè´£å¯åŠ¨ pods å’Œ containersï¼Œkubectl åˆ™è´Ÿè´£ä¸é›†ç¾¤äº¤äº’ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€æœ‰èŠ‚ç‚¹å®‰è£…è¿™äº›ç»„ä»¶ é…ç½®k8så›½å†…æº æˆ‘ä»¬æŠŠk8sçš„æºä¿®æ”¹ä¸ºé˜¿é‡Œäº‘çš„ 1234567891011# é…ç½®å›½å†…æºcat &lt;&lt;EOF &gt; /etc/yum.repos.d/kubernetes.repo[kubernetes]name=Kubernetesbaseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64enabled=1gpgcheck=0repo_gpgcheck=0gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF å…³é—­SELinux 12setenforce 0sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config é…ç½®ç½‘ç»œå‚æ•° 123456789cat &lt;&lt;EOF &gt; /etc/sysctl.d/k8s.confnet.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1EOFsysctl --system# ç¡®ä¿ br_netfilter æ¨¡å—å·²ç»åŠ è½½modprobe br_netfilter å®‰è£…å¹¶å¯åŠ¨kubeadmã€kubeletã€å’Œkubectl 12345# å®‰è£…yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes# å¯åŠ¨systemctl enable --now kubelet ä½¿ç”¨kubeadmåˆå§‹åŒ–é›†ç¾¤ å› ä¸ºæˆ‘çš„æœåŠ¡å™¨åœ¨å›½å†…ï¼Œä¸”ç”±äº kubeadm åˆå§‹åŒ–é›†ç¾¤çš„ä¾èµ–é•œåƒåœ¨å›½å†…è®¿é—®ä¸äº†ï¼Œæ‰€ä»¥åˆå§‹åŒ–é›†ç¾¤ä¹‹å‰å…ˆä½¿ç”¨å›½å†…æºæ‹‰å–ä¾èµ–é•œåƒ æ‹‰å–ä¾èµ–é•œåƒ 1234567891011# è·å–ä¾èµ–é•œåƒåˆ—è¡¨kubeadm config images list# ä½¿ç”¨é˜¿é‡Œæºä¸‹è½½ K8s ä¾èµ–é•œåƒkubeadm config images list |sed -e 's/^/docker pull /g' -e 's#k8s.gcr.io#registry.cn-hangzhou.aliyuncs.com/google_containers#g' |sh -x# é€šè¿‡docker tagä¿®æ”¹é•œåƒä¸å›½å¤–é•œåƒåç§°ç›¸åŒï¼Œè¿™æ ·çš„ç›®çš„æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œdockerä¼šå…ˆåœ¨æœ¬åœ°æŸ¥æ‰¾ï¼Œè‹¥æœ¬åœ°å·²æœ‰é•œåƒåˆ™ä¸ä¼šå†å»è¿œç¨‹æ‹‰å–ï¼Œç­‰äºæ¥äº†ä¸€æ‹›ç’å¤©è¿‡æµ·docker images |grep registry.cn-hangzhou.aliyuncs.com/google_containers |awk '&#123;print \"docker tag \",$1\":\"$2,$1\":\"$2&#125;' |sed -e 's#registry.cn-hangzhou.aliyuncs.com/google_containers#k8s.gcr.io#2' |sh -x# åˆ é™¤åŸé•œåƒï¼Œè¿™ä¸ªå¯é€‰docker images |grep registry.cn-hangzhou.aliyuncs.com/google_containers |awk '&#123;print \"docker rmi \", $1\":\"$2&#125;' |sh -x masterèŠ‚ç‚¹åˆå§‹åŒ– æˆ‘ä»¬ä½¿ç”¨kubeadm initæŒ‡ä»¤åˆå§‹åŒ–masterèŠ‚ç‚¹ï¼Œå…·ä½“çš„å‚æ•°å¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://kubernetes.io/zh/docs/reference/setup-tools/kubeadm/kubeadm-init/ 12# local_ipæ˜¯æœ¬æœºå±€åŸŸç½‘ipï¼Œkubectl_versionæ˜¯æˆ‘ä»¬é•œåƒçš„ç‰ˆæœ¬kubeadm init --apiserver-advertise-address=&lt;local_ip&gt; --kubernetes-version=&lt;kubectl_version&gt; --pod-network-cidr=10.244.0.0/16 --v=5 æ‰§è¡ŒæˆåŠŸä¹‹åï¼Œæ—¥å¿—ä¼šæ‰“å°å‡ºä¸‹é¢è¯­å¥ï¼Œå¹¶ä¸”ä¼šå‘ŠçŸ¥æˆ‘ä»¬èŠ‚ç‚¹åŠ å…¥çš„æ–¹å¼ 1234# rootæˆ–érootç”¨æˆ·å‡å¯æ‰§è¡Œmkdir -p $HOME/.kubesudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/configsudo chown $(id -u):$(id -g) $HOME/.kube/config æˆ– 1export KUBECONFIG=/etc/kubernetes/admin.conf å¼€å¯ä½¿ç”¨masterèŠ‚ç‚¹èµ„æº é»˜è®¤masterèŠ‚ç‚¹æ˜¯ä¸å‚ä¸podè°ƒåº¦çš„ï¼Œè¿™æ ·å¯¹äºmasterèŠ‚ç‚¹çš„èµ„æºæ¥è¯´æœ‰ç‚¹å¤ªè¿‡æµªè´¹ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ä½¿masterèŠ‚ç‚¹ä¹Ÿå‚ä¸podè°ƒåº¦ 1kubectl taint nodes --all node-role.kubernetes.io/master- æ·»åŠ ç½‘ç»œç»„ä»¶ æˆ‘ä»¬é€šè¿‡kubectl get nodesæŸ¥çœ‹é›†ç¾¤å†…çš„èŠ‚ç‚¹ï¼Œå½“å‰åº”è¯¥åªæœ‰masterä¸€ä¸ªèŠ‚ç‚¹ï¼Œä½†æ˜¯èŠ‚ç‚¹çš„çŠ¶æ€ä¸ºNotReadyï¼ŒæŸ¥çœ‹corednsçš„podï¼ˆkubectl get pod --all-namespacesï¼‰ï¼Œä¼šå‘ç°corednså¤„äºpendingçŠ¶æ€ï¼ŒåŸå› å°±æ˜¯æˆ‘ä»¬è¿˜æœªå®‰è£…ç½‘ç»œç»„ä»¶ã€‚ 12# ç½‘ç»œç»„ä»¶æˆ‘ä»¬é€‰æ‹©WeaveNetï¼Œå®‰è£…å®Œä¹‹åç¨ç­‰ä¸€ä¼šå°±å¯ä»¥äº†kubectl apply -f \"https://cloud.weave.works/k8s/net?k8s-version=$(kubectl version | base64 | tr -d '\\n')\" å‘é›†ç¾¤ä¸­æ·»åŠ nodeèŠ‚ç‚¹ æ¯ä¸€å°nodeéƒ½éœ€è¦æ“ä½œä»1~6çš„æ­¥éª¤ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨kubeadm joinæ¥æ·»åŠ åˆ°é›†ç¾¤ä¸­ï¼Œè¿™é‡Œçš„tokenæ˜¯åœ¨masterèŠ‚ç‚¹åˆ›å»ºçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨kubeadm token listå‘½ä»¤æŸ¥çœ‹å¯ç”¨çš„tokenï¼Œå¦‚æœæ²¡æœ‰å¯ç”¨çš„tokenï¼Œé‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨kubeadm token createåˆ›å»ºæ–°çš„tokenï¼Œä¸€ä¸ªtokençš„æœ‰æ•ˆæœŸä¸º24å°æ—¶ 12kubeadm join 192.168.0.54:6443 --token 9dmyq2.c50cvh32r62o6jlx \\ --discovery-token-ca-cert-hash sha256:4640dd5d3788968d86ce3cb792c1e368586ee6731de5a07ad8ad331926a2f233 éªŒè¯ åŠ å…¥ä¹‹åæˆ‘ä»¬åœ¨masterèŠ‚ç‚¹é€šè¿‡kubectl get nodesæ¥æŸ¥çœ‹æ‰€æœ‰çš„èŠ‚ç‚¹ï¼ŒéªŒè¯æ˜¯å¦åŠ å…¥æˆåŠŸã€‚","categories":[{"name":"kubernates","slug":"kubernates","permalink":"http://luxiaowan.github.io/categories/kubernates/"}],"tags":[]},{"title":"Centosä¸­å®‰è£…rzå’Œszæ›¿ä»£ftp","slug":"Centosä¸­å®‰è£…rzå’Œszæ›¿ä»£ftp","date":"2020-03-10T04:44:00.000Z","updated":"2020-03-10T04:47:26.799Z","comments":true,"path":"2020/03/10/Centosä¸­å®‰è£…rzå’Œszæ›¿ä»£ftp/","link":"","permalink":"http://luxiaowan.github.io/2020/03/10/Centosä¸­å®‰è£…rzå’Œszæ›¿ä»£ftp/","excerpt":"","text":"lrzsz å®˜ç½‘å…¥å£ï¼šhttp://freecode.com/projects/lrzsz/ 12# å®‰è£…lrzszyum install -y lrzsz å®‰è£…å®Œæˆä¹‹åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº† 12345# ä¸Šä¼ æ–‡ä»¶rz# ä¸‹è½½æ–‡ä»¶sz æ“ä½œå¾ˆç®€å•","categories":[{"name":"Linux","slug":"Linux","permalink":"http://luxiaowan.github.io/categories/Linux/"}],"tags":[]},{"title":"k8sä¸­YAMLæ–‡ä»¶è§£é‡Š","slug":"k8sä¸­YAMLæ–‡ä»¶è§£é‡Š","date":"2020-03-09T16:30:00.000Z","updated":"2020-03-09T16:34:54.823Z","comments":true,"path":"2020/03/10/k8sä¸­YAMLæ–‡ä»¶è§£é‡Š/","link":"","permalink":"http://luxiaowan.github.io/2020/03/10/k8sä¸­YAMLæ–‡ä»¶è§£é‡Š/","excerpt":"","text":"YAMLè¯­æ³•è§„åˆ™ å¤§å°å†™æ•æ„Ÿ ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³» ç¼©è¿›æ—¶ä¸å…è®¸ä½¿ç”¨Talé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ ç¼©è¿›çš„ç©ºæ ¼æ•°ç›®ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦ä¾§å¯¹é½å³å¯ â€#â€ è¡¨ç¤ºæ³¨é‡Šï¼Œä»è¿™ä¸ªå­—ç¬¦ä¸€ç›´åˆ°è¡Œå°¾ï¼Œéƒ½ä¼šè¢«è§£æå™¨å¿½ç•¥ åœ¨Kubernetesä¸­ï¼Œåªéœ€è¦çŸ¥é“ä¸¤ç§ç»“æ„ç±»å‹å³å¯ï¼š Lists Maps ####YAMLå±æ€§è§£é‡Š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576# yamlæ ¼å¼çš„podå®šä¹‰æ–‡ä»¶å®Œæ•´å†…å®¹ï¼šapiVersion: v1 #å¿…é€‰ï¼Œç‰ˆæœ¬å·ï¼Œä¾‹å¦‚v1kind: Pod #å¿…é€‰ï¼ŒPodmetadata: #å¿…é€‰ï¼Œå…ƒæ•°æ® name: string #å¿…é€‰ï¼ŒPodåç§° namespace: string #å¿…é€‰ï¼ŒPodæ‰€å±çš„å‘½åç©ºé—´ labels: #è‡ªå®šä¹‰æ ‡ç­¾ - name: string #è‡ªå®šä¹‰æ ‡ç­¾åå­— annotations: #è‡ªå®šä¹‰æ³¨é‡Šåˆ—è¡¨ - name: stringspec: #å¿…é€‰ï¼ŒPodä¸­å®¹å™¨çš„è¯¦ç»†å®šä¹‰ containers: #å¿…é€‰ï¼ŒPodä¸­å®¹å™¨åˆ—è¡¨ - name: string #å¿…é€‰ï¼Œå®¹å™¨åç§° image: string #å¿…é€‰ï¼Œå®¹å™¨çš„é•œåƒåç§° imagePullPolicy: [Always | Never | IfNotPresent] #è·å–é•œåƒçš„ç­–ç•¥ Alawysè¡¨ç¤ºä¸‹è½½é•œåƒ IfnotPresentè¡¨ç¤ºä¼˜å…ˆä½¿ç”¨æœ¬åœ°é•œåƒï¼Œå¦åˆ™ä¸‹è½½é•œåƒï¼ŒNerverè¡¨ç¤ºä»…ä½¿ç”¨æœ¬åœ°é•œåƒ command: [string] #å®¹å™¨çš„å¯åŠ¨å‘½ä»¤åˆ—è¡¨ï¼Œå¦‚ä¸æŒ‡å®šï¼Œä½¿ç”¨æ‰“åŒ…æ—¶ä½¿ç”¨çš„å¯åŠ¨å‘½ä»¤ args: [string] #å®¹å™¨çš„å¯åŠ¨å‘½ä»¤å‚æ•°åˆ—è¡¨ workingDir: string #å®¹å™¨çš„å·¥ä½œç›®å½• volumeMounts: #æŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨çš„å­˜å‚¨å·é…ç½® - name: string #å¼•ç”¨podå®šä¹‰çš„å…±äº«å­˜å‚¨å·çš„åç§°ï¼Œéœ€ç”¨volumes[]éƒ¨åˆ†å®šä¹‰çš„çš„å·å mountPath: string #å­˜å‚¨å·åœ¨å®¹å™¨å†…mountçš„ç»å¯¹è·¯å¾„ï¼Œåº”å°‘äº512å­—ç¬¦ readOnly: boolean #æ˜¯å¦ä¸ºåªè¯»æ¨¡å¼ ports: #éœ€è¦æš´éœ²çš„ç«¯å£åº“å·åˆ—è¡¨ - name: string #ç«¯å£å·åç§° containerPort: int #å®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å· hostPort: int #å®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤ä¸Containerç›¸åŒ protocol: string #ç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤TCP env: #å®¹å™¨è¿è¡Œå‰éœ€è®¾ç½®çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ - name: string #ç¯å¢ƒå˜é‡åç§° value: string #ç¯å¢ƒå˜é‡çš„å€¼ resources: #èµ„æºé™åˆ¶å’Œè¯·æ±‚çš„è®¾ç½® limits: #èµ„æºé™åˆ¶çš„è®¾ç½® cpu: string #Cpuçš„é™åˆ¶ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå°†ç”¨äºdocker run --cpu-shareså‚æ•° memory: string #å†…å­˜é™åˆ¶ï¼Œå•ä½å¯ä»¥ä¸ºMib/Gibï¼Œå°†ç”¨äºdocker run --memoryå‚æ•° requests: #èµ„æºè¯·æ±‚çš„è®¾ç½® cpu: string #Cpuè¯·æ±‚ï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡ memory: string #å†…å­˜æ¸…æ¥šï¼Œå®¹å™¨å¯åŠ¨çš„åˆå§‹å¯ç”¨æ•°é‡ livenessProbe: #å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥çš„è®¾ç½®ï¼Œå½“æ¢æµ‹æ— å“åº”å‡ æ¬¡åå°†è‡ªåŠ¨é‡å¯è¯¥å®¹å™¨ï¼Œæ£€æŸ¥æ–¹æ³•æœ‰execã€httpGetå’ŒtcpSocketï¼Œå¯¹ä¸€ä¸ªå®¹å™¨åªéœ€è®¾ç½®å…¶ä¸­ä¸€ç§æ–¹æ³•å³å¯ exec: #å¯¹Podå®¹å™¨å†…æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºexecæ–¹å¼ command: [string] #execæ–¹å¼éœ€è¦åˆ¶å®šçš„å‘½ä»¤æˆ–è„šæœ¬ httpGet: #å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹æ³•è®¾ç½®ä¸ºHttpGetï¼Œéœ€è¦åˆ¶å®šPathã€port path: string port: number host: string scheme: string HttpHeaders: - name: string value: string tcpSocket: #å¯¹Podå†…ä¸ªå®¹å™¨å¥åº·æ£€æŸ¥æ–¹å¼è®¾ç½®ä¸ºtcpSocketæ–¹å¼ port: number initialDelaySeconds: 0 #å®¹å™¨å¯åŠ¨å®Œæˆåé¦–æ¬¡æ¢æµ‹çš„æ—¶é—´ï¼Œå•ä½ä¸ºç§’ timeoutSeconds: 0 #å¯¹å®¹å™¨å¥åº·æ£€æŸ¥æ¢æµ‹ç­‰å¾…å“åº”çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤1ç§’ periodSeconds: 0 #å¯¹å®¹å™¨ç›‘æ§æ£€æŸ¥çš„å®šæœŸæ¢æµ‹æ—¶é—´è®¾ç½®ï¼Œå•ä½ç§’ï¼Œé»˜è®¤10ç§’ä¸€æ¬¡ successThreshold: 0 failureThreshold: 0 securityContext: privileged:false restartPolicy: [Always | Never | OnFailure]#Podçš„é‡å¯ç­–ç•¥ï¼ŒAlwaysè¡¨ç¤ºä¸€æ—¦ä¸ç®¡ä»¥ä½•ç§æ–¹å¼ç»ˆæ­¢è¿è¡Œï¼Œkubeletéƒ½å°†é‡å¯ï¼ŒOnFailureè¡¨ç¤ºåªæœ‰Podä»¥é0é€€å‡ºç é€€å‡ºæ‰é‡å¯ï¼ŒNerverè¡¨ç¤ºä¸å†é‡å¯è¯¥Pod nodeSelector: obeject #è®¾ç½®NodeSelectorè¡¨ç¤ºå°†è¯¥Podè°ƒåº¦åˆ°åŒ…å«è¿™ä¸ªlabelçš„nodeä¸Šï¼Œä»¥keyï¼švalueçš„æ ¼å¼æŒ‡å®š imagePullSecrets: #Pullé•œåƒæ—¶ä½¿ç”¨çš„secretåç§°ï¼Œä»¥keyï¼šsecretkeyæ ¼å¼æŒ‡å®š - name: string hostNetwork:false #æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸ºfalseï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œ volumes: #åœ¨è¯¥podä¸Šå®šä¹‰å…±äº«å­˜å‚¨å·åˆ—è¡¨ - name: string #å…±äº«å­˜å‚¨å·åç§° ï¼ˆvolumesç±»å‹æœ‰å¾ˆå¤šç§ï¼‰ emptyDir: &#123;&#125; #ç±»å‹ä¸ºemtyDirçš„å­˜å‚¨å·ï¼Œä¸PodåŒç”Ÿå‘½å‘¨æœŸçš„ä¸€ä¸ªä¸´æ—¶ç›®å½•ã€‚ä¸ºç©ºå€¼ hostPath: string #ç±»å‹ä¸ºhostPathçš„å­˜å‚¨å·ï¼Œè¡¨ç¤ºæŒ‚è½½Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½• path: string #Podæ‰€åœ¨å®¿ä¸»æœºçš„ç›®å½•ï¼Œå°†è¢«ç”¨äºåŒæœŸä¸­mountçš„ç›®å½• secret: #ç±»å‹ä¸ºsecretçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é›†ç¾¤ä¸å®šä¹‰çš„secreå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨ scretname: string items: - key: string path: string configMap: #ç±»å‹ä¸ºconfigMapçš„å­˜å‚¨å·ï¼ŒæŒ‚è½½é¢„å®šä¹‰çš„configMapå¯¹è±¡åˆ°å®¹å™¨å†…éƒ¨ name: string items: - key: string","categories":[{"name":"kubernates","slug":"kubernates","permalink":"http://luxiaowan.github.io/categories/kubernates/"}],"tags":[]},{"title":"Gitä¿®æ”¹å·²æäº¤ç”¨æˆ·ä¿¡æ¯","slug":"Gitä¿®æ”¹å·²æäº¤ç”¨æˆ·ä¿¡æ¯","date":"2020-02-11T08:46:00.000Z","updated":"2020-02-11T10:03:16.813Z","comments":true,"path":"2020/02/11/Gitä¿®æ”¹å·²æäº¤ç”¨æˆ·ä¿¡æ¯/","link":"","permalink":"http://luxiaowan.github.io/2020/02/11/Gitä¿®æ”¹å·²æäº¤ç”¨æˆ·ä¿¡æ¯/","excerpt":"","text":"ä¿®æ”¹Gitç”¨æˆ·åå’Œé‚®ç®± ä¿®æ”¹æŸä¸€é¡¹ç›®é…ç½® ç»ˆç«¯è¿›å…¥åˆ°é¡¹ç›®æ‰€åœ¨ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 123git config user.name \"cc\"git config user.email \"cc@cc.cc\" ä¿®æ”¹å…¨å±€é…ç½® æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 123git config --global user.name \"cc\"git config --global user.email \"cc@cc.cc\" ä¿®æ”¹é¡¹ç›®æœ€è¿‘ä¸€æ¬¡æäº¤ä¿¡æ¯ ä¿®æ”¹æäº¤ç”¨æˆ· 1git commit --amend --author=\"username &lt;email&gt;\" ä¿®æ”¹æäº¤å¤‡æ³¨ä¿¡æ¯ 1git commit --amend ç„¶åæ‰§è¡Œä¹‹åè·³è½¬åˆ°æ–°çš„é¡µé¢ ä¿®æ”¹é¡¶éƒ¨å¤‡æ³¨ä¿¡æ¯ç„¶åä¿å­˜å³å¯","categories":[{"name":"Git","slug":"Git","permalink":"http://luxiaowan.github.io/categories/Git/"}],"tags":[]},{"title":"Linuxç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»å½•","slug":"Linuxç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»å½•","date":"2020-02-11T03:35:00.000Z","updated":"2020-02-11T05:05:54.080Z","comments":true,"path":"2020/02/11/Linuxç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»å½•/","link":"","permalink":"http://luxiaowan.github.io/2020/02/11/Linuxç¦æ­¢rootç”¨æˆ·è¿œç¨‹ç™»å½•/","excerpt":"","text":"æ·»åŠ ä¸€ä¸ªæ–°ç”¨æˆ· æ·»åŠ æ–°ç”¨æˆ· useradd cc è®¾ç½®æ–°ç”¨æˆ·å¯†ç  passwd cc ä¿®æ”¹/etc/sudoersæ–‡ä»¶ æ‰¾åˆ°## Allow root to run any commands anywhere åœ¨root ALL=(ALL) ALLä¸‹æ–¹æ·»åŠ è¯­å¥cc ALL=(ALL) ALL æ­¤æ–‡ä»¶ä¸ºreadonlyæ–‡ä»¶ï¼Œä¿å­˜ä½¿ç”¨wq!å‘½ä»¤ ä¿®æ”¹/etc/ssh/sshd_configæ–‡ä»¶ æ‰¾åˆ°PermitRootLogin yesä¿®æ”¹ä¸ºPermitRootLogin no ä¿å­˜ä¹‹åæ‰§è¡Œservice sshd restartå‘½ä»¤å³å¯","categories":[{"name":"Linux","slug":"Linux","permalink":"http://luxiaowan.github.io/categories/Linux/"}],"tags":[]},{"title":"MacBookè¿æ¥iPhoneä¸ç¨³å®š","slug":"MacBookè¿æ¥iPhoneä¸ç¨³å®š","date":"2020-02-11T01:32:00.000Z","updated":"2020-02-11T01:34:27.294Z","comments":true,"path":"2020/02/11/MacBookè¿æ¥iPhoneä¸ç¨³å®š/","link":"","permalink":"http://luxiaowan.github.io/2020/02/11/MacBookè¿æ¥iPhoneä¸ç¨³å®š/","excerpt":"","text":"é—®é¢˜ MacBookç»å¸¸åœ¨ä½¿ç”¨USBè¿æ¥iPhoneçš„æ—¶å€™ä¸ç¨³å®šï¼Œè¿æ¥ä¸€è·³ä¸€è·³çš„ è§£å†³ åœ¨ç”µè„‘ç»ˆç«¯ä¸‹è¿è¡Œsudo killall -STOP -c usbdï¼Œç„¶åè¾“å…¥ç”µè„‘å¯†ç ï¼Œç„¶åé‡æ–°æ’ä¸Šè¿æ¥çº¿ï¼Œå°±OKäº†","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://luxiaowan.github.io/categories/æ‚è°ˆ/"}],"tags":[]},{"title":"å¤´æ¡ã€ç¾å›¢ã€æ»´æ»´ã€äº¬ä¸œç­‰å¤§å‚é¢è¯•é¢˜","slug":"åˆ·é¢˜","date":"2019-12-24T16:35:00.000Z","updated":"2019-12-24T16:36:27.409Z","comments":true,"path":"2019/12/25/åˆ·é¢˜/","link":"","permalink":"http://luxiaowan.github.io/2019/12/25/åˆ·é¢˜/","excerpt":"","text":"å¤´æ¡ èŠé¡¹ç›®ï¼Œç”»é¡¹ç›®æ¶æ„å›¾ï¼Œç”»ä¸€ä¸ªç”¨æˆ·ä»å‘èµ·è¯·æ±‚åˆ°æ¥æ”¶åˆ°å“åº”ï¼Œä¸­é—´ç»è¿‡å“ªäº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡åšä»€ä¹ˆäº‹æƒ…çš„æµç¨‹å›¾ã€‚ è®²é¡¹ç›®ä¸­çš„éš¾ç‚¹ã€æŒ‘æˆ˜ï¼Œä½ æ˜¯å¦‚ä½•è§£å†³çš„ï¼Ÿ Redis ä¸­æœ‰å‡ ç§ç±»å‹ &amp; å„è‡ªåº•å±‚æ€ä¹ˆå®ç°çš„ &amp; é¡¹ç›®ä¸­å“ªä¸ªåœ°æ–¹ç”¨äº†ä»€ä¹ˆç±»å‹ï¼Œæ€ä¹ˆä½¿ç”¨çš„ï¼Ÿ Rediså¦‚ä½•å®ç°åˆ†å¸ƒå¼é”ï¼Œzkå¦‚ä½•å®ç°åˆ†å¸ƒå¼é”ï¼Œä¸¤è€…çš„åŒºåˆ«ã€‚å¦‚æœserviceè¿˜æ²¡æ‰§è¡Œå®Œï¼Œåˆ†å¸ƒå¼é”åœ¨Redisä¸­å·²ç»è¿‡æœŸäº†ï¼Œæ€ä¹ˆè§£å†³è¿™ç§é—®é¢˜ï¼Ÿ synchronizedåº•å±‚å®ç°ï¼ŒåŠ åœ¨æ–¹æ³•ä¸Šå’ŒåŠ åœ¨åŒæ­¥ä»£ç å—ä¸­ç¼–è¯‘åçš„åŒºåˆ«ã€ç±»é”ã€å¯¹è±¡é”ã€‚ é”å‡çº§çš„è¿‡ç¨‹ã€‚ Javaè¿è¡Œæ—¶åŒºåŸŸåŠå„ä¸ªåŒºåŸŸçš„ä½œç”¨ã€å¯¹GCçš„äº†è§£ã€Javaå†…å­˜æ¨¡å‹åŠä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ å¯¹ç´¢å¼•çš„ç†è§£ï¼Œç»„åˆç´¢å¼•ï¼Œç´¢å¼•çš„æœ€ä½³å®è·µ countDownLatchç”¨è¿‡æ²¡æœ‰ï¼Œåœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„ï¼Œå¯¹AQSçš„äº†è§£ã€‚ å†™ç”Ÿäº§è€…æ¶ˆè´¹è€…é—®é¢˜ï¼Œè€ƒè™‘é«˜å¹¶å‘çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨Java ç±»åº“ï¼Œç™½çº¸å†™ä»£ç ã€‚ è®¾è®¡ä¸€ä¸ªå‘å·å™¨ï¼Œè€ƒè™‘é›†ç¾¤å’Œé«˜å¹¶å‘çš„æƒ…å†µï¼Œè¦æ±‚å‘å·å™¨ç”Ÿæˆçš„idæ˜¯é€’å¢è¶‹åŠ¿ï¼Œé€šè¿‡idå¯ä»¥åŒºåˆ†å‡ºæ¥æ˜¯ä»Šå¤©ç”Ÿæˆçš„idè¿˜æ˜¯æ˜¨å¤©ç”Ÿæˆçš„idï¼Œä½†æ˜¯ç”Ÿæˆçš„idä¸­ä¸èƒ½ç›´æ¥å¸¦æœ‰æ—¥æœŸï¼Œè¦å…·æœ‰ä¸€å®šçš„æ··æ·†åŠŸèƒ½ï¼Œç™½çº¸å†™ä»£ç ã€‚ ä¸€ä¸ªäºŒä½æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥å¾€ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘èµ°ï¼Œå¯»æ‰¾æœ€é•¿é€’å¢è·¯å¾„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæœ€é•¿é€’å¢è·¯å¾„å³çº¢è‰²å­—ä½“è·¯å¾„ã€‚ç™½çº¸å†™ä»£ç ã€‚ ![image-20190924230411189](/Users/chuan/Library/Application Support/typora-user-images/image-20190924230411189.png) ç¾å›¢ æ•°æ®åº“å’Œç¼“å­˜çš„ä¸€è‡´æ€§é—®é¢˜ã€‚å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ›´æ–°ç¼“å­˜ï¼Œè‹¥æ›´æ–°å®Œæ•°æ®åº“äº†ï¼Œè¿˜æ²¡æœ‰æ›´æ–°ç¼“å­˜ï¼Œæ­¤æ—¶æœ‰è¯·æ±‚è¿‡æ¥äº†ï¼Œè®¿é—®åˆ°äº†ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œæ€ä¹ˆåŠï¼Ÿ èšç°‡ç´¢å¼•/éèšç°‡ç´¢å¼•ï¼ŒMySQLç´¢å¼•åº•å±‚å®ç°ï¼Œä¸ºä»€ä¹ˆä¸ç”¨B-Treeï¼Œä¸ºä»€ä¹ˆä¸ç”¨hashï¼Œå¶å­ç»“ç‚¹å­˜æ”¾çš„æ˜¯æ•°æ®è¿˜æ˜¯æŒ‡å‘æ•°æ®çš„å†…å­˜åœ°å€ï¼Œä½¿ç”¨ç´¢å¼•éœ€è¦æ³¨æ„çš„å‡ ä¸ªåœ°æ–¹ï¼Ÿ MySQLé»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ŒMVCCã€RRæ€ä¹ˆå®ç°çš„ï¼ŸRCå¦‚ä½•å®ç°çš„ï¼Ÿ MySQLé—´éš™é”æœ‰æ²¡æœ‰äº†è§£ï¼Œæ­»é”æœ‰æ²¡æœ‰äº†è§£ï¼Œå†™ä¸€æ®µä¼šé€ æˆæ­»é”çš„SQLè¯­å¥ï¼Œæ­»é”å‘ç”Ÿäº†å¦‚ä½•è§£å†³ï¼ŒMySQLæœ‰æ²¡æœ‰æä¾›ä»€ä¹ˆæœºåˆ¶å»è§£å†³æ­»é” è°ˆä¸‹å¯¹GCçš„äº†è§£ï¼Œä½•ä¸ºåƒåœ¾ï¼Œæœ‰å“ªäº›GCç®—æ³•ï¼Œæœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Œcmså’Œg1çš„åŒºåˆ«ï¼Œè¿˜æœ‰ä¸€ä¸ªç›´å‡»çµé­‚çš„é—®é¢˜ï¼Œçœ‹è¿‡cmsçš„æºç å—ï¼Ÿ æœ‰æ²¡æœ‰æ’æŸ¥è¿‡çº¿ä¸ŠOOMçš„é—®é¢˜ï¼Œå¦‚ä½•æ’æŸ¥çš„ï¼Ÿ æœ‰æ²¡æœ‰ä½¿ç”¨è¿‡JVMè‡ªå¸¦çš„å·¥å…·ï¼Œå¦‚ä½•ä½¿ç”¨çš„ï¼Ÿ å‡è®¾æœ‰ä¸‹å›¾æ‰€ç¤ºçš„ä¸€ä¸ªFull GC çš„å›¾ï¼Œçºµå‘æ˜¯å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œæ¨ªå‘æ˜¯æ—¶é—´ï¼Œä½ å¦‚ä½•æ’æŸ¥è¿™ä¸ªFull GC çš„é—®é¢˜ï¼Œæ€ä¹ˆå»è§£å†³ä½ è¯´å‡ºæ¥çš„è¿™äº›é—®é¢˜ï¼Ÿ ![image-20190924230348754](/Users/chuan/Library/Application Support/typora-user-images/image-20190924230348754.png) è¯´è¯´å¯¹Javaä¸­é›†åˆç±»çš„ç†è§£ï¼Œé¡¹ç›®ä¸­ç”¨è¿‡å“ªäº›ï¼Œå“ªä¸ªåœ°æ–¹ç”¨çš„ï¼Œå¦‚ä½•ä½¿ç”¨çš„ï¼Ÿ å¯¹CASçš„ç†è§£ï¼ŒCASå¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜ï¼Ÿ volatileåº•å±‚ã€synchronizedåº•å±‚ã€é”å‡çº§çš„è¿‡ç¨‹ã€MESI Ehcacheæ”¯æŒå“ªäº›ç¼“å­˜ï¼Ÿ JUCæœ‰ç ”ç©¶æ²¡æœ‰ï¼Œè®²ä¸€è®²ï¼Ÿ èŠé¡¹ç›®ï¼Œç”»é¡¹ç›®æ¶æ„å›¾ï¼Œç”»ä¸€ä¸ªç”¨æˆ·ä»å‘èµ·è¯·æ±‚åˆ°æ¥æ”¶åˆ°å“åº”ï¼Œä¸­é—´ç»è¿‡å“ªäº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡åšä»€ä¹ˆäº‹æƒ…çš„æµç¨‹å›¾ã€‚ è®²é¡¹ç›®ä¸­çš„éš¾ç‚¹ã€æŒ‘æˆ˜ï¼Œå¦‚ä½•è§£å†³çš„ï¼Œé¡¹ç›®è¿™ä¸€å—ä¼šé—®çš„ç‰¹åˆ«ç»†ã€‚ å¦‚ä½•ä¿è¯RocketMQ æ¶ˆæ¯çš„é¡ºåºæ€§ï¼Œå¦‚ä½•è§£å†³é‡å¤æ¶ˆè´¹é—®é¢˜ã€‚ é¡¹ç›®ä¸­å¦‚ä½•ä¿è¯æ¥å£çš„å¹‚ç­‰æ“ä½œã€‚ è®²ä¸€è®²å¯¹Redis çš„äº†è§£ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„ï¼Œå“ªä¸ªåœ°æ–¹ä½¿ç”¨çš„ï¼Œä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ å“¨å…µæœºåˆ¶ã€Redis ä¸¤ç§å¤‡ä»½æ–¹å¼çš„åŒºåˆ«ï¼Œé¡¹ç›®ä¸­ç”¨çš„å“ªç§ï¼Œä¸ºä»€ä¹ˆï¼Ÿ è®²ä¸€è®²å¯¹åˆ†å¸ƒå¼é”çš„äº†è§£ é¡¹ç›®ä¸­ç³»ç»Ÿç›‘æ§æ€ä¹ˆåšçš„ï¼Ÿ å¦‚ä½•ç†è§£Springä¸­çš„AOP å’Œ IOCï¼Œä»¥åŠDIï¼Œè¯»è¿‡Springæºç æ²¡æœ‰ï¼Ÿ è¯»è¿‡MyBatisæºç æ²¡æœ‰ï¼Ÿ è¯´ä¸€ä¸ªä½ äº†è§£æœ€å¤šçš„æ¡†æ¶ï¼Œè¯´å‡ºä½ çš„ç†è§£ã€‚ å¦‚ä½•ç†è§£åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œå¦‚ä½•å»è§£å†³ï¼Œäº†è§£å“ªäº›åˆ†å¸ƒå¼äº‹åŠ¡ä¸­é—´ä»¶ï¼Ÿ èŠä¸€èŠå¯¹åˆ†åº“åˆ†è¡¨çš„ç†è§£ã€‚ HystrixåŠŸèƒ½å’Œåœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨çš„ï¼ŸHystrixæ€ä¹ˆæ£€æµ‹æ–­è·¯å™¨æ˜¯å¦è¦å¼€å¯/å…³é—­ï¼ŸHystrixå®ç°åŸç†ï¼Ÿé™¤Hystrixä¹‹å¤–çš„å…¶ä»–ç†”æ–­é™æµä¸­é—´ä»¶æœ‰äº†è§£æ²¡æœ‰ï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ Dubboæœ‰äº†è§£æ²¡æœ‰ï¼Ÿ æ€ä¹ˆç†è§£Java ä¸­å’Œ MySQLä¸­çš„ä¹è§‚é”ã€æ‚²è§‚é”ï¼Ÿ ä¸€è‡´æ€§hash æ»´æ»´ èŠé¡¹ç›®ï¼Œç”»é¡¹ç›®æ¶æ„å›¾ï¼Œç”»ä¸€ä¸ªç”¨æˆ·ä»å‘èµ·è¯·æ±‚åˆ°æ¥æ”¶åˆ°å“åº”ï¼Œä¸­é—´ç»è¿‡å“ªäº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡åšä»€ä¹ˆäº‹æƒ…çš„æµç¨‹å›¾ï¼Œè®²æ•°æ®åº“è®¾è®¡ã€‚ å¤„ç†è¿‡çº¿ä¸ŠOOMé—®é¢˜æ²¡æœ‰ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ é‡åˆ°è¿‡çº¿ä¸ŠæœåŠ¡å™¨CPUé£™é«˜çš„æƒ…å†µæ²¡æœ‰ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ çº¿ä¸Šæœ‰æ²¡æœ‰é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå¦‚ä½•å¤„ç†çš„ï¼Ÿ å¯¹çº¿ç¨‹æ± çš„ç†è§£ï¼Œé¡¹ç›®ä¸­å“ªä¸ªåœ°æ–¹ä½¿ç”¨äº†ï¼Œå¦‚ä½•ä½¿ç”¨çš„ï¼Œç”¨çš„Excutoræ¡†æ¶ä¸­çš„å“ªä¸ªå®ç°ç±»ï¼Œä¸ºä»€ä¹ˆç”¨è¿™ä¸ª å¯¹CASçš„ç†è§£ï¼ŒCASå¸¦æ¥çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³è¿™äº›é—®é¢˜? volatileåº•å±‚ã€synchronizedåº•å±‚ã€é”å‡çº§çš„è¿‡ç¨‹ã€MESI å¯¹MySQLç´¢å¼•çš„ç†è§£ã€å¯¹ç»„åˆç´¢å¼•çš„ç†è§£ã€ç´¢å¼•çš„æœ€ä½³å®è·µ åˆ†å¸ƒå¼é”çš„å®ç°ã€å¯¹æ¯”Redisåˆ†å¸ƒå¼é” &amp; ZKåˆ†å¸ƒå¼é” å”¯ä¸€IDå¦‚ä½•å®ç°çš„ï¼ŒSnowflakeå®ç°åŸç†ï¼ŒSnowflakeæœ‰å“ªäº›é—®é¢˜ï¼Œå¦‚ä½•é¿å…æ ¹æ®è®¢å•å·å¯ä»¥æ¨ç®—å‡ºä»Šå¤©çš„è®¢å•é‡ å¦‚æœçº¿ä¸Šä¸€ä¸ªåŠŸèƒ½æ˜¯ç”¨æ ˆç»“æ„å®ç°çš„ï¼Œä½¿ç”¨è¿‡ç¨‹ä¸­è¦æ³¨æ„å“ªäº›é—®é¢˜ï¼Œä¸ºä»€ä¹ˆï¼Ÿ æ€ä¹ˆç†è§£çº¿ç¨‹å®‰å…¨ï¼Ÿ æ€ä¹ˆç†è§£æ¥å£å¹‚ç­‰ï¼Ÿé¡¹ç›®ä¸­å¦‚ä½•ä¿è¯çš„æ¥å£å¹‚ç­‰ï¼Ÿ æ€ä¹ˆç†è§£å¾®æœåŠ¡ï¼ŒæœåŠ¡å¦‚ä½•åˆ’åˆ†ï¼Œå¯ä»¥ä»å“ªå‡ ä¸ªæ–¹é¢å»åˆ’åˆ†ï¼Œä¸ºä»€ä¹ˆè¿™æ ·åˆ’åˆ†ï¼Œå¾®æœåŠ¡å¸¦æ¥äº†å“ªäº›å¥½å¤„ï¼Œå“ªäº›åå¤„ï¼Œå¦‚ä½•çœ‹å¾…è¿™ä¸ªé—®é¢˜ï¼Ÿ å¦‚ä½•ç†è§£ç½‘å…³ï¼Œç½‘å…³å¸¦æ¥çš„å¥½å¤„å’Œåå¤„ï¼Œå¦‚ä½•è§£å†³ HystrixåŠŸèƒ½ &amp; åœ¨é¡¹ç›®ä¸­æ€ä¹ˆä½¿ç”¨çš„ &amp; Hystrixæ€ä¹ˆæ£€æµ‹æ–­è·¯å™¨æ˜¯å¦è¦å¼€å¯/å…³é—­ &amp;Hystrixå®ç°åŸç† æ€ä¹ˆç†è§£å‘½ä»¤æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼ï¼Œæ‰‹å†™ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼æˆ–è€…å‘½ä»¤æ¨¡å¼çš„ä»£ç ï¼Œç­–ç•¥æ¨¡å¼ä¹Ÿè¡Œ æŒæ¡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œå¸¸ç”¨å“ªäº›ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„ï¼Œä¸ºä»€ä¹ˆç”¨è¿™ä¸ªï¼Œä¸ç”¨é‚£ä¸ªï¼Ÿæ‰‹å†™ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ å¦‚ä½•è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Ÿ å¦‚æœæˆ‘ç°åœ¨å°±æ˜¯è¦å®ç°æ¯ç§’10wè¯·æ±‚ï¼Œä¸èƒ½ç†”æ–­é™æµï¼Œå¦‚ä½•å»è®¾è®¡ï¼Ÿ å‡è®¾ç°åœ¨åŒåä¸€é›¶ç‚¹ï¼Œå¤§é‡ä¸‹å•è¯·æ±‚ï¼Œå¦‚ä½•å¯¹è¿™äº›è®¢å•è¿›è¡Œåˆ†åº“åˆ†è¡¨ï¼Œä¸ºä»€ä¹ˆï¼Ÿ æœåŠ¡Aè°ƒç”¨æœåŠ¡Bä¸­ä¸€ä¸ªæ¥å£ï¼ŒæœåŠ¡Bè°ƒç”¨æœåŠ¡Cä¸­ä¸€ä¸ªæ¥å£ï¼Œå¦‚ä½•å®ç°è‹¥æœåŠ¡Bå“åº”æœåŠ¡AæˆåŠŸï¼Œåˆ™æœåŠ¡Cä¸€å®šå“åº”æœåŠ¡BæˆåŠŸï¼Œéœ€è¦è€ƒè™‘ç³»ç»Ÿæ€§èƒ½é—®é¢˜ï¼Ÿ é€’å½’ä½¿ç”¨ä¸­æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œé€’å½’å†™æ³•ä¸€èˆ¬å¯ä»¥ç”¨ä»€ä¹ˆå»æ›¿æ¢ï¼Ÿ æœ‰ä¸¤ä¸ªè¡¨ï¼Œtable aï¼Œtable bï¼Œå†™SQLæŸ¥è¯¢å‡ºä»…åœ¨table aä¸­çš„æ•°æ®ã€ä»…åœ¨table bä¸­çš„æ•°æ®ã€æ—¢åœ¨table a åˆåœ¨table b ä¸­çš„æ•°æ®ï¼Ÿ Spring æºç æœ‰äº†è§£æ²¡æœ‰ï¼Ÿ MyBatisæºç æœ‰äº†è§£æ²¡æœ‰ï¼Ÿ MySQLäº‹åŠ¡éš”ç¦»çº§åˆ«ã€MVCCï¼Ÿ äº¬ä¸œ ä¸€ä¸ªfinalä¿®é¥°çš„å±æ€§ï¼Œå®šä¹‰çš„æ—¶å€™æ²¡æœ‰åˆå§‹åŒ–ï¼Œåœ¨æ— å‚æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–ï¼Œå¯ä»¥å—ï¼Œä¸ºä»€ä¹ˆ è¯´è¯´å¯¹Javaä¸­é›†åˆç±»çš„ç†è§£ï¼Œé¡¹ç›®ä¸­ç”¨è¿‡å“ªäº›ï¼Œå“ªä¸ªåœ°æ–¹ç”¨çš„ï¼Œå¦‚ä½•ä½¿ç”¨çš„ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å…¶ä»–çš„é›†åˆç±» HashMapï¼ŒconcurrentHashMapåº•å±‚å®ç° Liståˆ é™¤æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œéå†çš„æ—¶å€™å¯ä»¥åˆ é™¤å—ï¼Ÿä¸ºä»€ä¹ˆ? Redisä¸­æœ‰å“ªäº›æ•°æ®ç»“æ„ï¼Œäº†è§£è¿‡å…¶åº•å±‚æ€ä¹ˆå®ç°çš„å—ï¼Œå’ŒJavaä¸­ç›¸ä¼¼çš„æ•°æ®ç»“æ„çš„å¯¹æ¯”ï¼Ÿ Redisæ˜¯å•çº¿ç¨‹çš„è¿˜æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«ï¼Ÿ Redis Hashä¸­æŸä¸ªkeyè¿‡å¤§ï¼Œå˜ä¸ºStringç±»å‹çš„å¤§keyï¼Œæ€ä¹ˆå¤„ç†ï¼Œä½¿ç”¨ä¸­å¦‚ä½•é¿å…å‡ºç°è¿™ç§é—®é¢˜? è®¾è®¡æ¨¡å¼åœ¨é¡¹ç›®ä¸­å“ªä¸ªåœ°æ–¹ç”¨åˆ°äº†ï¼Œæ€ä¹ˆä½¿ç”¨çš„ï¼Œèƒ½ä¸èƒ½ç”»ä¸€ä¸ªä½ ç†Ÿæ‚‰çš„è®¾è®¡æ¨¡å¼çš„UMLå›¾ï¼Œæ‰‹å†™å•ä¾‹æ¨¡å¼ï¼Œæ‰‹å†™é™æ€å†…éƒ¨ç±»å®ç°çš„å•ä¾‹æ¨¡å¼ã€‚ è®²ä¸€è®²MySQLç´¢å¼•ï¼Œå®é™…å·¥ä½œä¸­ï¼Œå“ªäº›åœºæ™¯ç”¨äº†B+Treeç´¢å¼•ï¼Œå“ªäº›åœºæ™¯ç”¨äº†hashç´¢å¼•ï¼Ÿ explain å¯ä»¥çœ‹åˆ°å“ªäº›ä¿¡æ¯ï¼Œä»€ä¹ˆä¿¡æ¯è¯´æ˜ä»€ä¹ˆï¼Œexplainçš„ç»“æœåˆ—è®²ä¸€ä¸‹ Springæºç çœ‹è¿‡æ²¡æœ‰ï¼Œä¼šå¤šå°‘è®²å¤šå°‘ï¼Ÿ MyBatisæºç çœ‹è¿‡æ²¡æœ‰ï¼Œä¼šå¤šå°‘è®²å¤šå°‘ï¼Ÿ CASçš„ç¼ºç‚¹ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ AQSã€countDownLatchå¦‚ä½•å®ç°ï¼Ÿ çº¿ç¨‹æ± å¦‚ä½•å®ç°ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°è®¾ç½®æˆå¤šå°‘ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾ç½®ï¼Œé¡¹ç›®ä¸­å“ªä¸ªåœ°æ–¹ä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»€ä¹ˆ MySQLäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå¹»è¯»ï¼Œè„è¯»ï¼Œé¡¹ç›®ä¸­ç”¨ä»€ä¹ˆäº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¸ºä»€ä¹ˆï¼Ÿ volatileåº•å±‚åŸç†ã€synchronizedå®ç°æœºåˆ¶ å¯¹XAã€TCCçš„ç†è§£ï¼Œäº†è§£å“ªäº›åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ï¼Œæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ Feign å’Œ Dubboï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ Eureka å’Œ Zookeeperï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ Hystrix å’Œ sentinelï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ Spring Cloud Alibabaï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ å¯¹åˆ†åº“åˆ†è¡¨ã€è¯»å†™åˆ†ç¦»çš„äº†è§£ï¼Œäº†è§£å¤šå°‘è¯´å¤šå°‘ï¼Ÿ ç”»ä¸€ä¸‹Java çº¿ç¨‹å‡ ä¸ªçŠ¶æ€åŠçŠ¶æ€ä¹‹é—´äº’ç›¸è½¬æ¢çš„å›¾ï¼Ÿ èŠé¡¹ç›®ï¼Œç”»é¡¹ç›®æ¶æ„å›¾ï¼Œç”»ä¸€ä¸ªç”¨æˆ·ä»å‘èµ·è¯·æ±‚åˆ°æ¥æ”¶åˆ°å“åº”ï¼Œä¸­é—´ç»è¿‡å“ªäº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡åšä»€ä¹ˆäº‹æƒ…çš„æµç¨‹å›¾ï¼Œè®²æ•°æ®åº“è®¾è®¡å…·ä½“åˆ°éƒ¨åˆ†è¡¨ä¸­æœ‰å“ªäº›å­—æ®µï¼Ÿ éƒ¨é—¨ä½“é‡æ¯”è¾ƒå¤§ï¼Œå¯èƒ½éœ€è¦åŠ ç­ï¼Œåˆ°å‡Œæ™¨ä¸¤ä¸‰ç‚¹çš„é‚£ç§ï¼Œä¹Ÿå¯èƒ½é€šå®µï¼Œé€šå®µæ˜¯å¤§ä¿ƒæœŸé—´ï¼Œä½ èƒ½æ¥å—å—ï¼Ÿ ä¹Ÿä¼šåŠ ç­åˆ°åç‚¹ï¼Œè¿™ä¸ªä¸æ˜¯å¤§ä¿ƒæœŸé—´ï¼Œä½†ä¹Ÿä¸æ˜¯æ¯å¤©ï¼Œéå¸¸æ€æƒ…å†µï¼Œä½ èƒ½æ¥å—å—ï¼Œä½ åœ¨å“ªé‡Œä½ï¼Œè¿‡æ¥è¦å¤šä¹…ï¼Œæœ‰ç”·æœ‹å‹å—ï¼Ÿ ç«å¸ Kafka å¦‚ä½•ä¿è¯æ¶ˆæ¯é¡ºåºæ¶ˆè´¹ã€åœ¨consumer group ä¸­æ–°å¢ä¸€ä¸ªconsumer ä¼šæé«˜æ¶ˆè´¹æ¶ˆæ¯çš„é€Ÿåº¦å—ã€é‚£å¦‚æœæˆ‘æƒ³æé«˜æ¶ˆæ¯æ¶ˆè´¹çš„é€Ÿåº¦ï¼Œæˆ‘è¦æ€ä¹ˆåŠï¼Ÿ Rediså‡ ç§æ•°æ®ç»“æ„åŠåº•å±‚ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„Redisï¼Ÿ å“¨å…µæœºåˆ¶ã€é€‰ä¸¾ç®—æ³• ä¸€è‡´æ€§hash Redisæ˜¯å•çº¿ç¨‹çš„è¿˜æ˜¯å¤šçº¿ç¨‹çš„ï¼Œä¸ºä»€ä¹ˆé€Ÿåº¦è¿™ä¹ˆå¿«ï¼Ÿ å¤šè·¯å¤ç”¨çš„å‡ ç§æ–¹å¼ä»¥åŠåŒºåˆ«ï¼Ÿ å¯¹çº¿ç¨‹æ± çš„ç†è§£ï¼Œåœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹ä¹‹é—´å¦‚ä½•å…±äº«æ•°æ®ï¼Œå¤šä¸ªè¿›ç¨‹ä¹‹é—´å¦‚ä½•å…±äº«æ•°æ®ï¼Ÿ HashMapã€concurrentHashMapçš„åŒºåˆ«åŠåº•å±‚å®ç°ã€HashMapå’ŒHashTable çš„åŒºåˆ«ï¼Ÿ ä»€ä¹ˆæ˜¯çº¢é»‘æ ‘ï¼Œä»€ä¹ˆæ˜¯B-Treeï¼Œä¸ºä»€ä¹ˆHashMapä¸­ç”¨çº¢é»‘æ ‘ä¸ç”¨å…¶ä»–æ ‘ï¼Ÿ å¯¹MySQLç´¢å¼•çš„ç†è§£ï¼Œä¸ºä»€ä¹ˆMySQLç´¢å¼•ä¸­ç”¨B+Treeï¼Œä¸ç”¨B-Tree æˆ–è€…å…¶ä»–æ ‘ï¼Œä¸ºä»€ä¹ˆä¸ç”¨hash ç´¢å¼•ï¼Ÿ æ•°æ®åº“å’Œç¼“å­˜çš„åŒå†™ä¸€è‡´æ€§é—®é¢˜ï¼Ÿ æ¯æ—¥ä¸€æ·˜ ç”¨è¿‡å“ªäº›Objectç±»çš„æ–¹æ³•ï¼Œå¦‚ä½•ä½¿ç”¨çš„ Javaå¦‚ä½•å®ç°åºåˆ—åŒ–çš„ï¼ŒSerializationåº•å±‚å¦‚ä½•å®ç°çš„ countDownLatchå¦‚ä½•å®ç°çš„ é¡¹ç›®ä¸­ç›‘æ§æŠ¥è­¦æœºåˆ¶å¦‚ä½•åšçš„ï¼Œè¯´è¯´ä½ çš„äº†è§£ çº¿ä¸ŠæœåŠ¡å™¨CPUé£™é«˜ï¼Œå¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜ æœåŠ¡Aè°ƒç”¨æœåŠ¡Bï¼Œç”¨æˆ·è¯·æ±‚æœåŠ¡Aï¼Œå‘ç°è¿”å›è¾ƒæ…¢ï¼Œå¦‚ä½•å®šä½è¿™ä¸ªé—®é¢˜ TIME_WAITæ˜¯ä»€ä¹ˆçŠ¶æ€è¿˜è®°å¾—å—ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç½‘ç»œä¼šå‡ºç°è¿™ä¸ªçŠ¶æ€ linkedme å†…æ ¸æ€å’Œç”¨æˆ·æ€ã€cas å’Œ sout å“ªä¸ªç”¨åˆ°äº†å†…æ ¸æ€å’Œç”¨æˆ·æ€çš„åˆ‡æ¢ å“ªäº›å…¸å‹çš„åº”ç”¨ç”¨çš„æ˜¯UDPï¼Ÿ çº¿ç¨‹æ± æœ‰äº†è§£å—ï¼Œé¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿ è®¡ç®—å¯†é›†å‹/IOå¯†é›†å‹ä»»åŠ¡åˆ†åˆ«å¦‚ä½•è®¾ç½®çº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾ç½®ï¼Ÿ å‡å¦‚æˆ‘ä¸‹åˆ5ç‚¹è¦å’Œ5ä¸ªäººä¸€èµ·å¼€ä¼šï¼Œä½†æ˜¯è¿™5ä¸ªäººç°åœ¨éƒ½å‡ºå»äº†ï¼Œä¸åœ¨å…¬å¸ï¼Œä½†æ˜¯ä»Šå¤©ä¼šå›æ¥ï¼Œé—®ï¼Œæˆ‘å¦‚ä½•å¼€è¿™åœºä¼šï¼Œç”¨Java å¹¶å‘æ–¹é¢çš„çŸ¥è¯†å›ç­”ã€‚ ç®—æ³•é¢˜ [1,1,2,2,3,4,4,5,5,5] æ‰¾å‡ºä¸é‡å¤çš„å…ƒç´ ï¼ˆé»„åŒ…è½¦ï¼‰ åè½¬é“¾è¡¨ï¼Œè¦æ±‚æ—¶é—´å¤æ‚åº¦O(N)ï¼Œç©ºé—´å¤æ‚åº¦O(1) ï¼ˆç«å¸ï¼‰ éé€’å½’å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ— ï¼ˆçˆ±å¥‡è‰ºï¼‰ è¿™ä¸€å‘¨è‚¡å¸‚ä»·æ ¼ä¸º[2,6,1,4,8]ï¼Œæ±‚å“ªä¸€å¤©ä¹°å…¥å“ªä¸€å¤©å–å‡ºï¼Œå¯è·å¾—æœ€å¤§æ”¶ç›Šï¼Œæœ€å¤§æ”¶ç›Šä¸ºå¤šå°‘ ï¼ˆçˆ±å¥‡è‰ºï¼‰ æŒ‰ç…§ç®­å¤´æ–¹å‘æŸ¥æ‰¾äºŒå‰æ ‘ ï¼ˆé‡‘å±±äº‘ï¼‰ ![image-20190924230728819](/Users/chuan/Library/Application Support/typora-user-images/image-20190924230728819.png) è¡¨a b cä¹‹é—´ç”¨IDå…³è”ï¼Œæ±‚é˜´å½±éƒ¨åˆ†çš„æ•°æ® ï¼ˆé‡‘å±±äº‘ï¼‰ ![image-20190924230750484](/Users/chuan/Library/Application Support/typora-user-images/image-20190924230750484.png) ä¸€ä¸ªæ•´å½¢æ— åºæ•°ç»„ï¼Œé‡Œé¢ä¸‰ä¸ªæ•°åªå’Œç­‰äºä¸€ä¸ªç›®æ ‡å€¼ï¼Œæ±‚è¿™ä¸‰ä¸ªæ•° ï¼ˆå°ç±³ï¼‰ é“¾è¡¨é—®é¢˜ ï¼ˆå°ç±³ï¼‰ ![image-20190924230830166](/Users/chuan/Library/Application Support/typora-user-images/image-20190924230830166.png) æ‰‘å…‹ç‰Œé—®é¢˜ ï¼ˆå°ç±³ï¼‰ æœ‰åå¼ æ‰‘å…‹ç‰Œï¼Œä»ä¸Šé¢å¼€å§‹æŠ½ï¼ŒæŠ½å‡ºä¸€å¼ æ”¾æ¡Œå­ä¸Šï¼Œç„¶åå†æŠ½å‡ºä¸€å¼ æ”¾æ‰‘å…‹ç‰Œçš„æœ€ä¸‹é¢ï¼Œè¿™æ ·å¾ªç¯å¾€å¤çš„æ“ä½œï¼Œç›´åˆ°æ‰‹é‡Œçš„ç‰Œéƒ½æ²¡æœ‰äº†ã€‚è¿™æ—¶ï¼Œæ¡Œå­ä¸Šç‰Œçš„é¡ºåºæ­£å¥½æ˜¯1 2 3 4 5 6 7 8 9 10ã€‚è¦æ±‚å†™ä»£ç æ±‚å‡ºåŸé¡ºåº æ‰‹å†™å¤§é¡¶å † ï¼ˆlinkedMeï¼‰ æ‰‹å†™LRU ç®—æ³• ï¼ˆç«å¸ï¼‰ å­—ç¬¦ä¸²ç›¸åŠ  ï¼ˆæ»´æ»´ï¼‰ ä¸¤ä¸ªæ•°å­—ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œç›´æ¥è½¬intæˆ–è€…doubleè‚¯å®šéƒ½æ”¾ä¸ä¸‹ï¼Œç„¶åæ±‚è¿™ä¸¤ä¸ªæ•°çš„å’Œï¼Œè¿”å›å€¼è¿˜æ˜¯å­—ç¬¦ä¸²ï¼Œ15åˆ†é’Ÿæ—¶é—´ï¼Œè¦æ±‚æ— Bug å¯»æ‰¾ç›®æ ‡å€¼ä½ç½® ï¼ˆæ»´æ»´ï¼‰ æœ‰ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ•°ç»„æ¨ªå‘æœ‰åºï¼Œçºµå‘æœ‰åºï¼Œæ±‚ç›®æ ‡å€¼çš„ä½ç½®ï¼Œ10åˆ†é’Ÿæ—¶é—´ æ±‚å­—ç¬¦ä¸²â€œefabcbaefehiabcbaâ€ä¸­æœ€é•¿çš„å›æ–‡æ•°ï¼Œä¸å»é‡ï¼ˆç¾å›¢ï¼‰ åè½¬intç±»å‹çš„å€¼xï¼Œä¸è¦å€Ÿç”¨Stringï¼Œåªç”¨int å³å¯ã€‚&amp;&amp; é’ˆå¯¹è¯¥ç¨‹åºï¼Œå†™å‡ºå…¶åº”æœ‰çš„æµ‹è¯•ç”¨ä¾‹ ï¼ˆç¾å›¢ï¼‰ top K é—®é¢˜ï¼ˆæ¯æ—¥ä¸€æ·˜ï¼‰","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://luxiaowan.github.io/tags/é¢è¯•/"}]},{"title":"å·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜çš„åŒºåˆ«","slug":"å·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜çš„åŒºåˆ«","date":"2019-12-20T17:03:00.000Z","updated":"2019-12-20T17:03:48.136Z","comments":true,"path":"2019/12/21/å·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜çš„åŒºåˆ«/","link":"","permalink":"http://luxiaowan.github.io/2019/12/21/å·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜çš„åŒºåˆ«/","excerpt":"","text":"å¼€ä¸€ä¸ªæ‚è°ˆçš„ç±»ç›®ï¼Œæ¢è®¨å¹³æ—¶å·¥ä½œä¸­é‡åˆ°çš„è¶£äº‹ï¼Œå¯èƒ½å¶å°”ä¹Ÿä¼šè½¬è½½ä¸€äº›å…¶ä»–åœ°æ–¹çœ‹åˆ°çš„æœ‰æ„æ€çš„è¡Œä¸šè¶£äº‹ï¼Œçº¯å±ä¸€ä¹ã€‚ å¼€ç«¯ ä»Šå¤©ä¸‹ç­åï¼Œå…¬å¸é‡Œä¸€ä¸ªå·¥ä½œå¤šå¹´çš„å°æœ‹å‹æ‰¾æˆ‘é—²èŠï¼Œç„¶åèŠç€èŠç€ä¸çŸ¥ä¸ºå•¥èŠåˆ°äº†è¡Œä¸šä¸Šï¼š 12345678å°æœ‹å‹ï¼šä¸²ä¸²ï¼Œä½ ä¸ºä»€ä¹ˆä¸æ„¿æ„å¸¦å›¢é˜Ÿï¼Ÿä¸² ä¸²ï¼šä¸æ„Ÿå…´è¶£ï¼å°æœ‹å‹ï¼šä½ æ‰“ç®—æ•²ä»£ç åˆ°35å²å—ğŸ˜…ä¸² ä¸²ï¼š40å°æœ‹å‹ï¼šå°±ç®—æŠ€æœ¯ä¸Šå†ç‰›é€¼ï¼Œç¨‹åºå‘˜åœ¨ä¸­å›½ï¼Œåˆ°äº†å››åä¹Ÿåˆ°å¤´äº†å§ä¸² ä¸²ï¼šå·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜æ˜¯ä¸¤ç äº‹å°æœ‹å‹ï¼šæœ¬è´¨åŒºåˆ«åœ¨å“ªå‘¢ï¼Ÿä½ æŒ‡æœ‰æ¶æ„çš„èƒ½åŠ›å—ï¼Ÿä¸² ä¸²ï¼šã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ æˆ‘æƒ³è¯´ å…¶å®èŠåˆ°è¿™é‡Œï¼Œæˆ‘çªç„¶å‘ç°å¾ˆå¤šåšå¼€å‘çš„åŒå­¦å¯¹ç¨‹åºå‘˜å’Œå·¥ç¨‹å¸ˆè¿™ä¸¤ä¸ªèŒä¸šçš„è®¤çŸ¥å¥½åƒå¹¶ä¸æ˜¯é‚£ä¹ˆçš„åˆ†æ˜ï¼Œå…¶å®ä¸Šé¢çš„å¯¹è¯è¿˜æ²¡æœ‰ç»“æŸï¼Œæˆ‘æŠŠå·¥ç¨‹å¸ˆå’Œç¨‹åºå‘˜å¯¹ç­‰ä¸ºè¿›ç¨‹å’Œçº¿ç¨‹ï¼Œåšå¼€å‘çš„åŒå­¦åº”è¯¥éƒ½çŸ¥é“è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«(è¯´ä¸äº†è§£çš„å›å»æŠŠæ“ä½œç³»ç»Ÿå†ç»†å­¦ä¸€é)ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆæ¯”å–»å‘¢(å…¶å®è¿™ä¸ªæ¯”å–»ä¹Ÿä¸æ°å½“ï¼Œå°±æ˜¯æƒ³æŠŠä¸¤è€…çš„åŒºåˆ«æ‰©å¤§åŒ–ä¸€ä¸‹ï¼Œå„ä½ä¸è¦æŒ‘è¿™ä¸ªæ¯”å–»å•¦ï¼ŒæŒ‘äº†æˆ‘ä¹Ÿä¸æ”¹)ï¼Œå› ä¸ºè¿›ç¨‹æ˜¯ç”±å¾ˆå¤šçº¿ç¨‹ç»„æˆçš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åªå¤„ç†è¿›ç¨‹ä¸­å¾ˆå°å¾ˆå°çš„ä¸€ä¸ªæ¨¡å—ï¼Œå¯èƒ½ä»…ä»…å°±æ˜¯å»æŠŠç£ç›˜ä¸Šçš„æ•°æ®è¯»åˆ°å†…å­˜ä¸­è€Œå·²ï¼Œè¿›ç¨‹å°±åƒæ˜¯ä¸€ç‰‡æ£®æ—ï¼Œçº¿ç¨‹åªæ˜¯ä¸€æ£µæ ‘ï¼Œæˆ‘æƒ³è¡¨è¾¾çš„æ„æ€å°±æ˜¯å·¥ç¨‹å¸ˆæ‰€è¦æŒæ¡çš„çŸ¥è¯†æŠ€èƒ½ï¼Œè¦æ¯”ç¨‹åºå‘˜å¤šçš„å¤šçš„å¤šï¼Œä¹Ÿå°±æ˜¯éœ€è¦æœ‰å¤§å±€è§‚ã€çŸ¥è¯†å¹¿åº¦ã€çŸ¥è¯†æ·±åº¦ã€è¡Œå†›çº¿è·¯ç­‰ï¼Œè€Œç¨‹åºå‘˜æ˜¯ä»€ä¹ˆï¼Ÿä½ å¯ä»¥è®¤ä¸ºä¼šå†™ä»£ç çš„éƒ½å«ç¨‹åºå‘˜ï¼Œä½†åªä¼šå†™ä»£ç çš„ç¨‹åºå‘˜ä¸èƒ½å«åšå·¥ç¨‹å¸ˆ!!! æˆ‘è¿˜æƒ³è¯´ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹BOSSç›´è˜ä¸Šæ‹›è˜ç¨‹åºå‘˜å’Œå·¥ç¨‹å¸ˆå²—ä½JDçš„åŒºåˆ«ï¼Œè¿™é‡Œå¯èƒ½è¦æœ‰å›¾ï¼š çœ‹åˆ°æ²¡ï¼ŒåŒæ ·æ˜¯é«˜çº§å²—ä½ï¼Œä½†æ˜¯å²—ä½JDå·®åˆ«å´å¾ˆå¤§ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹åŒºåˆ«ï¼š 1234Javaé«˜çº§ç¨‹åºå‘˜ï¼š Javaé«˜çº§ç ”å‘å·¥ç¨‹å¸ˆï¼š æ— å­¦å†è¦æ±‚ï¼Œä¼šå†™ä»£ç å°±è¡Œ æœ€ä½ç§‘ç­å‡ºèº« èƒ½ç”¨æŠ€æœ¯æ¡†æ¶å†™ä»£ç ï¼Œå…¶ä»–ä½è¦æ±‚ ä¸šåŠ¡ã€äº§å“ã€ç ”å‘å‡è¦æ“…é•¿ï¼Œè‡ªæˆ‘é©±åŠ¨ï¼ŒæŠ€æœ¯æ”»åšï¼Œæ¶æ„è®¾è®¡ å¼ºè°ƒæŠ€æœ¯è¦æ±‚ï¼Œç½—åˆ—ä¸€å †æŠ€æœ¯æ¡†æ¶ æ— æŠ€æœ¯æ¡†æ¶è¦æ±‚ï¼Œå¯¹è½¯æŠ€èƒ½æåˆ°å¤šæ¬¡(ä»£ç æ´ç™–ã€è®¡ç®—æœºåŸç†ã€ç®—æ³•ã€è¡Œä¸šç»éªŒã€èŒè´£ã€è´¨é‡ã€ä¸šåŠ¡/äº§å“/è®¾è®¡/ç ”å‘) æˆ‘ä»¬ä»åˆ†æç»“æœå¯ä»¥çœ‹å‡ºï¼Œä¸€æ ·çš„èŒçº§ï¼Œä¸€æ ·çš„å²—ä½ï¼Œä¸€æ ·çš„æŠ€æœ¯ï¼Œå¯¹ç¨‹åºå‘˜çš„è¦æ±‚æ˜¯ä½ ä¼šå†™ä»£ç å°±è¡Œï¼Œå¯¹å·¥ç¨‹å¸ˆçš„è¦æ±‚æ˜¯ä½ ä¸ä»…è¦ä¼šå†™ä»£ç ï¼Œè¿˜è¦æ‡‚ä¸šåŠ¡ã€äº§å“ã€è®¾è®¡ã€äº§å“å’Œç ”å‘è´¨é‡ã€æ•°æ®ç»“æ„å’Œç®—æ³•ã€è®¡ç®—æœºåŸç†ã€è½¯ä»¶å·¥ç¨‹å­¦ï¼Œç°åœ¨æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°çš„çŸ¥é“äº†ç¨‹åºå‘˜å’Œå·¥ç¨‹å¸ˆçš„åŒºåˆ«ï¼Ÿ æˆ‘å†è¯´ä¸€ä¸‹ å¾ˆå¤šäººä¼šé—®ï¼šä¸ºä»€ä¹ˆå›½å¤–çš„ç¨‹åºå‘˜åˆ°60å²è¿˜å¯ä»¥å†™ä»£ç ï¼Œè€Œä¸­å›½çš„ç¨‹åºå‘˜35å²å°±è¦è¢«æ·˜æ±°ï¼Ÿ å…¶å®è¡Œä¸šæ·˜æ±°çš„æ˜¯ç¨‹åºå‘˜è€Œä¸æ˜¯å·¥ç¨‹å¸ˆï¼Œä¸€ä¸ªæœ‰æ€æƒ³æœ‰çœ¼ç•Œæœ‰èƒ½åŠ›çš„å·¥ç¨‹å¸ˆæ˜¯æ¯ä¸€ä¸ªå…¬å¸éƒ½æƒ³è˜ç”¨çš„ï¼Œè¿™ä¸€ç±»äººåªä¼šè¶Šè€è¶Šåƒé¦™ã€‚ é‚£ä¹ˆç¨‹åºå‘˜ä¸ºä»€ä¹ˆåˆ°35å²å°±ä¼šè¢«æ·˜æ±°å‘¢ï¼Ÿå› ä¸º35å²è¿˜åªæ˜¯ä¼šå†™ä»£ç çš„äººï¼Œèº«ä½“å·²ç»è¢«åŠ ç­æ‘§æ®‹çš„&quot;é£çƒ›æ®‹å¹´&quot;äº†ï¼Œæ¯ä¸€å¹´éƒ½ä¼šæœ‰ä¸€å¤§æ‰¹æ¯•ä¸šç”Ÿ/åŸ¹è®­ç”Ÿèµ°å…¥ç¤¾ä¼šï¼Œä»–ä»¬èº«ä½“å¥åº·ã€å¼ºå£®ã€ä»»åŠ³ä»»æ€¨ã€çˆ±åŠ ç­ï¼Œèº«ä¸º35å²çš„&quot;è€å¹´äºº&quot;ï¼Œé™¤äº†å¹´é¾„å¤§ã€å‘é™…çº¿é«˜ã€ä½“é‡è¶…æ ‡ã€è„‘å­è¿Ÿé’ï¼Œè¿˜æœ‰å“ªä¸€ç‚¹æ¯”å¾—è¿‡é‚£ä¹ˆä¸€ç¾¤å°é²œè‚‰ï¼Ÿå“¦~è¿˜æœ‰ä¸Šæœ‰è€ä¸‹æœ‰å°çš„å±±ä¸€èˆ¬å¤§çš„å‹åŠ›!!! é‚£ä¹ˆå·¥ç¨‹å¸ˆä¸ºä»€ä¹ˆè¶Šè€è¶Šåƒé¦™å‘¢ï¼Ÿå› ä¸ºå·¥ç¨‹å¸ˆé çš„ä¸æ˜¯å†™ä»£ç ï¼Œé çš„æ˜¯è‡ªæˆ‘æ²‰æ·€å’Œè¡Œä¸šç»éªŒã€‚ æ€»ç»“ä¸‹ å¤§å®¶ä¸€å¼€å§‹éƒ½æ˜¯ä»ç¨‹åºå‘˜åšèµ·çš„ï¼Œä¸ºä»€ä¹ˆæœ‰çš„äººå¯ä»¥æˆä¸ºå·¥ç¨‹å¸ˆï¼Œæœ‰çš„äººè¿˜æ˜¯ç¨‹åºå‘˜å‘¢ï¼Ÿè¿™å°±åœ¨äºä¸ªäººå¹³æ—¶çš„ç§¯ç´¯äº†ã€‚ ç© æœ€è¿‘ä¸€å¹´é¢è¯•äº†äºŒåå¤šä¸ª7ã€8å¹´å·¥ä½œç»éªŒçš„äººï¼Œå¾ˆå¤šäººè¿æœ€åŸºæœ¬çš„æŠ€æœ¯çŸ¥è¯†å’Œæ•°æ®ç»“æ„éƒ½ä¸çŸ¥é“ï¼Œè®°å¿†æœ€æ·±çš„å°±æ˜¯æœ‰ä¸€ä¸ªè·Ÿç€7å¹´çš„äººè·Ÿæˆ‘è¯´ï¼šæˆ‘ä¼šå†™ä»£ç ï¼Œæˆ‘èƒ½å®ç°ä¸šåŠ¡éœ€æ±‚ï¼Œä¸å°±è¡Œäº†ä¹ˆï¼Œæˆ‘è¦çŸ¥é“é‚£äº›åŸç†å¹²å•¥ï¼Ÿ æ˜¯ä¸æ˜¯åˆå¾ˆå¤šäººä¹Ÿè¿™ä¹ˆæƒ³çš„ï¼Ÿè¿™ä¹ˆæƒ³å°±å¯¹å•¦ï¼Œç­‰ç€30å²å°±è¢«æ·˜æ±°å§ï¼Œ35éƒ½ä¸ç”¨ç­‰å•¦ï¼ çŸ¥é“çš„è¶Šå¤šï¼Œä¸çŸ¥é“çš„å°±è¶Šå¤š","categories":[{"name":"æ‚è°ˆ","slug":"æ‚è°ˆ","permalink":"http://luxiaowan.github.io/categories/æ‚è°ˆ/"}],"tags":[]},{"title":"Dockerå®‰è£…phpmyadmin","slug":"Dockerå®‰è£…phpmyadmin","date":"2019-12-20T09:00:00.000Z","updated":"2019-12-20T15:07:26.882Z","comments":true,"path":"2019/12/20/Dockerå®‰è£…phpmyadmin/","link":"","permalink":"http://luxiaowan.github.io/2019/12/20/Dockerå®‰è£…phpmyadmin/","excerpt":"","text":"æˆ‘ä»¬åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„MySQLæ•°æ®åº“åœ¨æš´éœ²ç«¯å£å’Œå¼€å¯è¿œç¨‹è¿æ¥çš„æƒ…å†µä¸‹ï¼Œæ˜¯éå¸¸ä¸å®‰å…¨çš„ï¼Œæ˜¨å¤©æˆ‘çš„ä¸€å°æœåŠ¡å™¨å°±é­åˆ°äº†å‹’ç´¢ç—…æ¯’çš„æ”»å‡»ï¼Œè®©æˆ‘æ”¯ä»˜0.06æ¯”ç‰¹å¸èµå›æˆ‘çš„æ•°æ®ã€‚è¿˜å¥½é‚£ä¸ªåº“ä¸­æ²¡æœ‰é‡è¦æ•°æ®ï¼Œåªæ˜¯ä¸€ä¸ªå¼ƒç”¨äº†åŠå¹´çš„æ•°æ®åº“ï¼Œå¯†ç æˆ‘è‡ªå·±éƒ½å¿˜è®°äº†ï¼Œè¿˜å¥½é€šè¿‡æ‰‹æ®µæ‰¾å›äº†å¯†ç ï¼Œç™»ä¸Šå»ä¹‹åå°±å‚»çœ¼äº†ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¸æƒ³å¼€å¯è¿œç¨‹ç™»å½•è¿˜æƒ³æ“ä½œæ•°æ®åº“ï¼Œæ€ä¹ˆåŠï¼Ÿæ€ä¹ˆåŠï¼Ÿç”¨phpmyadminå°±å¯ä»¥è§£å†³äº†ï¼Œä¸è¿‡phpmyadminä¹Ÿæœ‰ä¸€å®šçš„é£é™©ï¼Œä¸‹é¢çœ‹ä¸‹æ€ä¹ˆç©ã€‚ ä½¿ç”¨Dockerå‘å¸ƒphpmyadminå¹¶ä¸”è¿æ¥å·²ç»å­˜åœ¨çš„MySQLå®¹å™¨ é¦–å…ˆä¸‹è½½phpmyadminçš„dockeré•œåƒ 1234567# å…ˆæŸ¥è¯¢é•œåƒä»“åº“é‡Œæœ‰å“ªäº›é•œåƒdocker search phpmyadmin# æ‹‰å–staræœ€å¤šçš„é•œåƒoræ‹‰å–ä½ æƒ³ç”¨çš„é•œåƒdocker pull docker.io/phpmyadmin/phpmyadminæ‹‰å–é•œåƒéœ€è¦ä¸€æ®µæ—¶é—´ï¼Œè¿™ä¸ªè¦çœ‹æœåŠ¡å™¨çš„å¸¦å®½ç½‘é€Ÿäº† å¯åŠ¨é•œåƒï¼Œè¿æ¥åˆ°å·²å­˜åœ¨çš„MySQLå®¹å™¨ 1234567891011121314# å¯åŠ¨é•œåƒdocker run --name myadmin -p 80:80 -d --link mysql-db:db docker.io/phpmyadmin/phpmyadmin# ä¿®æ”¹å®¹å™¨é…ç½®æ–‡ä»¶## å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å®¿ä¸»æœºä¸­docker cp myadmin:/etc/phpmyadmin/config.inc.php .## ä¿®æ”¹é…ç½®æ–‡ä»¶ä¿¡æ¯(è¿™é‡Œä¿®æ”¹çš„dbå°±æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™--linkåé¢æŒ‡å®šçš„åˆ«å)$cfg['Servers'][$i]['host'] = 'localhost' â€”â€”&gt; $cfg['Servers'][$i]['host'] = 'db'## å°†ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶å¤åˆ¶å›å®¹å™¨ä¸­docker cp ./config.inc.php myadmin:/etc/phpmyadmin/# é‡å¯phpmyadminå®¹å™¨ æ­¤å¤„å°±å¯ä»¥è¿æ¥äº†ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¿®æ”¹é…ç½®æ–‡ä»¶é™åˆ¶è¿æ¥çš„ç”¨æˆ·ï¼Œç„¶ååœ¨MySQLä¸­ç»™è¿æ¥ç”¨æˆ·æˆæƒ ä½¿ç”¨docker-composeåˆ›å»º å®‰è£…docker-composeï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå›å¤´ä¸“é—¨ç”¨ç¯‡æ–‡ç« æ¥è§£é‡Š ç¼–å†™docker-compose.ymlæ–‡ä»¶ 1234567891011121314151617181920212223242526272829version: \"2\"services: mysql: image: hub.c.163.com/library/mysql container_name: test-mysql restart: always ports: - \"3306:3306\" environment: MYSQL_USER: \"root\" MYSQL_PASSWORD: \"root\" MYSQL_ROOT_PASSWORD: \"root\" networks: - net-mysql phpmyadmin: image: docker.io/phpmyadmin/phpmyadmin container_name: test-myadmin ports: - \"80:80\" environment: MYSQL_USER: \"root\" MYSQL_PASSWORD: \"root\" MYSQL_ROOT_PASSWORD: \"root\" networks: - net-mysqlnetworks: net-mysql: å‘å¸ƒå®¹å™¨ 12# ä½¿ç”¨å‘½ä»¤å‘å¸ƒå®¹å™¨docker-compose up -d ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•é…ç½®æ–‡ä»¶","categories":[{"name":"Docker","slug":"Docker","permalink":"http://luxiaowan.github.io/categories/Docker/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"http://luxiaowan.github.io/tags/MySQL/"},{"name":"Docker","slug":"Docker","permalink":"http://luxiaowan.github.io/tags/Docker/"}]},{"title":"NacosåŸºæœ¬ä½¿ç”¨","slug":"NacosåŸºæœ¬ä½¿ç”¨","date":"2019-12-20T01:30:00.000Z","updated":"2019-12-20T15:07:26.882Z","comments":true,"path":"2019/12/20/NacosåŸºæœ¬ä½¿ç”¨/","link":"","permalink":"http://luxiaowan.github.io/2019/12/20/NacosåŸºæœ¬ä½¿ç”¨/","excerpt":"","text":"å•¥ Nacosæ˜¯ä»€ä¹ˆ Nacosè§£å†³ä»€ä¹ˆé—®é¢˜ Nacosæ€ä¹ˆä½¿ç”¨ Nacosæ¶æ„å›¾ Nacosä½œä¸ºé…ç½®ä¸­å¿ƒ Nacosä½œä¸ºæœåŠ¡æ³¨å†Œä¸­å¿ƒ ä»¥ä¸Šé—®é¢˜ï¼Œåœ¨Nacoså®˜ç½‘éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜ï¼Œè¦å­¦ä¼šæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œå…¶ä»–åœ°æ–¹å†™çš„åŸºæœ¬ä¹Ÿéƒ½æ˜¯copyçš„å®˜æ–¹æ–‡æ¡£ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œç›´æ¥ä¸Šå®˜ç½‘åœ°å€ç»™ä½ ä»¬ï¼šhttps://nacos.io/zh-cn/docs/what-is-nacos.html åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°ä»€ä¹ˆé—®é¢˜ï¼Œå¯ä»¥å»æissueï¼šhttps://github.com/alibaba/nacos/issues","categories":[{"name":"Nacos","slug":"Nacos","permalink":"http://luxiaowan.github.io/categories/Nacos/"}],"tags":[]},{"title":"å¿˜è®°MySQLçš„rootç”¨æˆ·å¯†ç æ€ä¹ˆåŠ","slug":"å¿˜è®°MySQLçš„rootç”¨æˆ·å¯†ç æ€ä¹ˆåŠ","date":"2019-12-19T16:53:00.000Z","updated":"2019-12-20T15:07:26.883Z","comments":true,"path":"2019/12/20/å¿˜è®°MySQLçš„rootç”¨æˆ·å¯†ç æ€ä¹ˆåŠ/","link":"","permalink":"http://luxiaowan.github.io/2019/12/20/å¿˜è®°MySQLçš„rootç”¨æˆ·å¯†ç æ€ä¹ˆåŠ/","excerpt":"","text":"åœ¨å·¥ä½œä¸­ï¼Œå¦‚æœæˆ‘ä»¬å¿˜è®°äº†æ•°æ®åº“çš„å¯†ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆåŠï¼Ÿå…¶å®æ–¹æ³•å¾ˆå¤šï¼Œä¸‹é¢æˆ‘ä»¬ä¸»è¦è¯´ä¸€ä¸‹å¦‚ä½•ä¿®æ”¹å®¿ä¸»æœºä¸Šçš„MySQLä»¥åŠDockerå®¹å™¨ä¸­çš„MySQLã€‚ 1. Dockerå®¹å™¨ä¸­çš„MySQL å¯åŠ¨MySQLçš„å®¹å™¨ é€šè¿‡dockerå‘½ä»¤è¿›å…¥åˆ°å®¹å™¨ä¸­docker exec -it container_id /bin/bash æ‰¾åˆ°docker.cnfé…ç½®æ–‡ä»¶ï¼Œå¤§æ¦‚åœ¨/etc/mysql/conf.d/ç›®å½•ä¸‹ æ‰“å¼€docker.cnfæ–‡ä»¶ï¼Œåœ¨æœ€åä¸€è¡Œåæ·»åŠ skip-grant-tablesè·³è¿‡ç”¨æˆ·æƒé™éªŒè¯ é€€å‡ºdockerå®¹å™¨ï¼Œç„¶åé‡å¯å®¹å™¨docker restart container_id å†æ¬¡è¿›å…¥åˆ°å®¹å™¨ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 12345678910111. è¿›å…¥mysqlæ§åˆ¶å° mysql2. è¿›å…¥mysqlæ•°æ®åº“ use mysql;3. ä¿®æ”¹rootç”¨æˆ·å¯†ç  MySQL5.7+: update user set authentication_string=password(&apos;newpwd&apos;) where user=&apos;root&apos;; MySQL5.6-: update user set password=password(&apos;newpwd&apos;) where user=&apos;root&apos;;4. åˆ·æ–°æƒé™ flush privileges; å°†docker.cnfä¸­æ·»åŠ çš„é‚£ä¸€è¡Œskip-grant-tablesåˆ é™¤ï¼Œé€€å‡ºdockerå®¹å™¨ï¼Œç„¶åé‡å¯å®¹å™¨ï¼Œæå®š 2. å®¿ä¸»æœºä¸­çš„MySQL æ‰¾åˆ°my.inié…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨[mysqld]ç»„ä¸‹åŠ å…¥skip-grant-tablesè·³è¿‡ç”¨æˆ·æƒé™éªŒè¯ ä¿®æ”¹å¯†ç ï¼ŒåŒä¸Šæ­¥éª¤6 å°†my.iniæ–‡ä»¶ä¸­æ·»åŠ çš„é‚£ä¸€è¡Œåˆ é™¤ï¼Œé‡å¯MySQLæœåŠ¡service mysqld restartï¼Œæå®š","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://luxiaowan.github.io/categories/MySQL/"}],"tags":[]},{"title":"Nacosç¼–è¯‘æŠ¥é”™Use STAR or POSIX Extensions to Overcome This Limit","slug":"Nacosç¼–è¯‘æŠ¥é”™Use-STAR-or-POSIX-extensions-to-overcome-this-limit","date":"2019-12-19T04:23:00.000Z","updated":"2019-12-19T16:51:55.995Z","comments":true,"path":"2019/12/19/Nacosç¼–è¯‘æŠ¥é”™Use-STAR-or-POSIX-extensions-to-overcome-this-limit/","link":"","permalink":"http://luxiaowan.github.io/2019/12/19/Nacosç¼–è¯‘æŠ¥é”™Use-STAR-or-POSIX-extensions-to-overcome-this-limit/","excerpt":"","text":"Nacaså®‰è£… å¯ä»¥é€šè¿‡ä¸‹è½½æºç è¿›è¡Œç¼–è¯‘å’Œä¸‹è½½å‘è¡ŒåŒ…ä¸¤ç§æ–¹å¼æ¥å¯åŠ¨Nacos æºç  1234567git clone https://github.com/alibaba/nacos.gitcd nacos/mvn -Prelease-nacos clean install -U ls -al distribution/target/// change the $version to your actual pathcd distribution/target/nacos-server-$version/nacos/bin å‘è¡ŒåŒ… æ‚¨å¯ä»¥ä» æœ€æ–°ç¨³å®šç‰ˆæœ¬ ä¸‹è½½ nacos-server-$version.zip åŒ…ã€‚ 12unzip nacos-server-$version.zip æˆ–è€… tar -xvf nacos-server-$version.tar.gzcd nacos/bin å¦‚ä½•å¯åŠ¨åœ¨è¿™é‡Œå°±ä¸åšè¯´æ˜äº†ï¼Œæˆ‘ä»¬é‡ç‚¹è¯´ä¸€ä¸‹é€šè¿‡æºç å®‰è£…æ—¶å‡ºç°çš„ä¸€ä¸ªç¼–è¯‘é”™è¯¯ é”™è¯¯ä¿¡æ¯ Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:3.0.0:single (make-assembly) on project nacos-distribution: Execution make-assembly of goal org.apache.maven.plugins:maven-assembly-plugin:3.0.0:single failed: group id â€˜1326029969â€™ is too big ( &gt; 2097151 ). Use STAR or POSIX extensions to overcome this limit -&gt; [Help 1] è¿™ä¸ªé”™è¯¯ä¸»è¦å‡ºç°åœ¨ç¼–è¯‘distributionè¿™ä¸ªç›®å½•æ—¶å‡ºç°çš„ï¼Œæ‰§è¡Œå‘½ä»¤æ˜¯mvn -Prelease-nacos clean install -Uï¼Œè¿™ä¸ªé”™è¯¯å¯¼è‡´nacos-server-1.2.0-SNAPSHOTç”Ÿæˆå¤±è´¥ è§£å†³åŠæ³• åœ¨distributionç›®å½•ä¸‹çš„pom.xmlæ–‡ä»¶ä¸­æ‰¾åˆ°idä¸ºrelease-nacosçš„profileï¼Œåœ¨pluginæ ‡ç­¾çš„configurationå†…åŠ ä¸Š&lt;tarLongFileMode&gt;posix&lt;/tarLongFileMode&gt;å³å¯è§£å†³","categories":[{"name":"Nacos","slug":"Nacos","permalink":"http://luxiaowan.github.io/categories/Nacos/"}],"tags":[{"name":"åŸºç¡€åº”ç”¨","slug":"åŸºç¡€åº”ç”¨","permalink":"http://luxiaowan.github.io/tags/åŸºç¡€åº”ç”¨/"},{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/tags/Java/"},{"name":"Maven","slug":"Maven","permalink":"http://luxiaowan.github.io/tags/Maven/"}]},{"title":"é˜¿é‡Œé¢è¯•é¢˜","slug":"é˜¿é‡Œé¢è¯•é¢˜","date":"2019-12-08T15:55:00.000Z","updated":"2019-12-19T17:07:06.991Z","comments":true,"path":"2019/12/08/é˜¿é‡Œé¢è¯•é¢˜/","link":"","permalink":"http://luxiaowan.github.io/2019/12/08/é˜¿é‡Œé¢è¯•é¢˜/","excerpt":"","text":"é˜¿é‡Œå·´å·´ä¸€é¢ å…ˆä»‹ç»ä¸€ä¸‹è‡ªå·±å§ è¯´ä¸€ä¸‹è‡ªå·±çš„ä¼˜ç¼ºç‚¹ å…·ä½“è®²ä¸€ä¸‹ä¹‹å‰åšè¿‡çš„é¡¹ç›® ä½ è§‰å¾—é¡¹ç›®é‡Œç»™é‡Œæœ€å¤§çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ HashMap äº†è§£ä¹ˆå—ï¼Ÿè¯´ä¸€ä¸‹ put æ–¹æ³•è¿‡ç¨‹ HashMapæ˜¯é”®å€¼å¯¹å­˜å‚¨æ•°æ®ç»“æ„ï¼Œå†…éƒ¨ä»¥key-value+é“¾è¡¨çš„å½¢å¼å­˜å‚¨æ•°æ®ï¼Œjdk1.8ä¹‹å‰ï¼Œæ˜¯ä»¥Entryåˆ›å»ºæ•°æ®èŠ‚ç‚¹ï¼Œjdk1.8ä¹‹åä»¥Nodeåˆ›å»ºæ•°æ®èŠ‚ç‚¹ã€‚ putæ–¹æ³•ä¸­è¦å…ˆæ£€æŸ¥å­˜å‚¨æ•°æ®çš„æ•°ç»„æ˜¯å¦å·²åˆå§‹åŒ–ï¼Œè®¡ç®—keyçš„å“ˆå¸Œå€¼ï¼Œè‹¥è¯¥å“ˆå¸Œå€¼æ‰€åœ¨æ§½æ— å¯¹è±¡ï¼Œåˆ™ç›´æ¥è®¾ç½®è¿›å»ï¼›è‹¥è¯¥æ§½æœ‰å€¼ï¼Œåˆ™æ ¡éªŒkeyå€¼æ˜¯å¦ç›¸ç­‰ï¼Œè‹¥ç›¸ç­‰åˆ™ç›´æ¥æ›¿æ¢ï¼Œå¹¶å°†æ—§å€¼è¿”å›ï¼›è‹¥keyä¸ç›¸ç­‰ï¼Œåˆ™æ ¡éªŒèŠ‚ç‚¹çš„ç±»å‹æ˜¯å¦ä¸ºTreeNodeï¼Œè‹¥ä¸ºTreeNodeåˆ™èµ°TreeNodeçš„putTreeValï¼›è‹¥ä¸ºæ™®é€šNodeèŠ‚ç‚¹ï¼Œåˆ™è¿­ä»£è¯¥æ§½ä¸Šçš„NodeèŠ‚ç‚¹ï¼Œé€šè¿‡å½“å‰èŠ‚ç‚¹çš„nextå±æ€§è·å–ä¸‹ä¸€èŠ‚ç‚¹ï¼Œè‹¥nextçš„keyä¸putçš„keyç›¸ç­‰(== &amp;&amp; equals)ï¼Œåˆ™æ›¿æ¢nextçš„valueï¼›è‹¥nextä¸ºnullï¼Œåˆ™åœ¨æ­¤å¤„å­˜å‚¨ï¼Œå¹¶ä¸”å½“å‰èŠ‚ç‚¹çš„nextæŒ‡å‘æ–°åˆ›å»ºçš„Nodeå¯¹è±¡ï¼›æœ€ç»ˆè¿”å›åŸå€¼æˆ–null HashMap æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿ ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œåœ¨é«˜å¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºç°è„æ•°æ®çš„æƒ…å†µ å¦‚æœæƒ³ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„Mapï¼Œåˆ™å¯ä»¥ä½¿ç”¨Collectionsç±»ä¸­çš„synchronizedMapæ–¹æ³•å»åˆ›å»ºä¸€ä¸ªCollectionså†…éƒ¨ç±»SynchronizedMapçš„å®ä¾‹ï¼Œè¯¥å†…éƒ¨ç±»ä¸­çš„æ–¹æ³•æ˜¯ä½¿ç”¨synchronizedå…³é”®å­—å®ç°çš„çº¿ç¨‹å¹¶å‘é”ï¼›Hashtableç±»åŒï¼›æˆ–è€…å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯jdk1.5åŠä»¥ä¸Šç‰ˆæœ¬çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ConcurrentHashMapç±»ï¼Œè¯¥ç±»æ˜¯ä½¿ç”¨äº†åˆ†æ®µé”å’ŒCASçš„æ–¹å¼å®ç°çš„å¹¶å‘æ§åˆ¶ï¼Œæ¯”synchronizedæ›´åŠ çµæ´»é«˜æ•ˆï¼Œåˆ†æ®µé”å¯ä»¥å®ç°åœ¨å†™çš„åŒæ—¶æ”¾ä»»å…¶ä»–çº¿ç¨‹è¯»å–éæœ¬æ®µçš„æ•°æ®ï¼ŒCASæ–¹å¼åˆ™ä»…ä»…é”ä½è¢«æ“ä½œçš„èŠ‚ç‚¹ã€‚ HashMap ä¸ºä»€ä¹ˆä¸ç”¨å¹³è¡¡æ ‘ï¼Ÿ å¹³è¡¡æ ‘åœ¨æç«¯æƒ…å†µä¸‹ä¼šå‡ºç°éå¸¸é«˜çš„æ ‘ï¼Œåœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ä¼šå˜æ…¢ï¼Œè€Œçº¢é»‘æ ‘åœ¨æ’å…¥æ•°æ®çš„æ—¶å€™ä¼šé€šè¿‡è‡ªæ—‹è½¬ç¼©çŸ­æ ‘çš„é«˜åº¦ AQS çŸ¥é“å—ï¼ŸçŸ¥é“å“ªä¸€äº›å‘¢ï¼Ÿè®²ä¸€è®²ã€‚ AQSæ˜¯AbstractQueuedSynchronizerç±»çš„ç¼©å†™ï¼ŒJUCåŒ…ä¸­çš„é”åŸºæœ¬å®ç°äºAQSï¼Œå¯ä»¥å®ç°å…±äº«é”å’Œæ’å®ƒé”ï¼ŒAQSæ˜¯è¯»å†™é”ReentrantLockçš„åŸºç±»ï¼Œå†…éƒ¨é€šè¿‡acquireå’ŒacquireSharedæ–¹æ³•åˆ†åˆ«å®ç°æ’å®ƒé”å’Œå…±äº«é”ã€‚ CLH åŒæ­¥é˜Ÿåˆ—æ˜¯æ€ä¹ˆå®ç°éå…¬å¹³å’Œå…¬å¹³çš„ï¼Ÿ CLHé˜Ÿåˆ—æ˜¯é€šè¿‡é“¾è¡¨çš„å½¢å¼å°†æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„è¿æ¥åˆ°ä¸€èµ·ï¼Œå…¬å¹³æ˜¯æŒ‡åœ¨å¤´ç»“ç‚¹è¢«å¤„ç†çš„æ—¶å€™ï¼Œå…¶ä»–èŠ‚ç‚¹éƒ½å¤„äºwaitçŠ¶æ€ï¼Œå½“å¤„ç†å®Œä¹‹åï¼Œå°†åç»­æ‰€æœ‰çš„èŠ‚ç‚¹å…¨éƒ¨å”¤é†’ï¼Œæ‰€æœ‰é˜Ÿåˆ—æ˜¯å…¬å¹³çš„ï¼›å³ä½¿é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½è¢«å”¤é†’ï¼Œä¹Ÿä¸ä¼šå‡ºç°è°å…ˆç«äº‰åˆ°èµ„æºè°æ‰§è¡Œçš„æƒ…å†µï¼Œæ°¸è¿œéƒ½æ˜¯å…ˆæ‰§è¡Œç¦»å¯¹åˆ—å¤´æœ€è¿‘çš„æ— ä¸­æ–­æ ‡å¿—çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥CLHé˜Ÿåˆ—åˆæ˜¯éå…¬å¹³çš„ã€‚ ReentrantLock å’Œ synchronized çš„åŒºåˆ« ä¸¤è€…éƒ½æ˜¯æœ¬åœ°é”ï¼Œéƒ½æ˜¯ä¸ºäº†é˜²æ­¢å¹¶å‘æƒ…å†µä¸‹å‡ºç°æ•°æ®é”™ä¹±çš„æƒ…å†µï¼Œéƒ½æ˜¯å¯é‡å…¥é”ã€‚ReentrantLockæœ‰å…±äº«é”å’Œæ’å®ƒé”ä¸¤ç§é”æœºåˆ¶ï¼Œè€Œsynchronizedåªèƒ½æ˜¯æ’å®ƒé”ï¼Œsynchronizedåœ¨jdk1.5ä¹‹åè‡ªå¸¦é”å‡çº§æœºåˆ¶ï¼ŒåŒ…æ‹¬äº†åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ï¼Œä½†ReentrantLockåªæ˜¯é‡é‡çº§é”ã€‚ è®²ä¸€ä¸‹ JVM çš„å†…å­˜ç»“æ„ JVMå†…å­˜ç»“æ„åˆ†ä¸ºçº¿ç¨‹å…±äº«å†…å­˜åŒºå’Œçº¿ç¨‹ç§æœ‰å†…å­˜åŒºï¼Œçº¿ç¨‹å…±äº«å†…å­˜åŒºåŒ…æ‹¬æ–¹æ³•åŒº/å…ƒç©ºé—´ã€å †ï¼Œçº¿ç¨‹ç§æœ‰å†…å­˜åŒºåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨ã€Javaæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆï¼Œå…ƒç©ºé—´æ˜¯åœ¨jdk1.8ä¹‹åç”¨æ¥ä»£æ›¿æ–¹æ³•åŒºçš„ï¼Œå¯ä»¥é€šè¿‡-XX:+MetaspaceSize=10g -XX:+MaxMetaspaceSize=20gæ¥æŒ‡å®šå…ƒç©ºé—´çš„å¤§å°ï¼Œæ–¹æ³•åŒº/å…ƒç©ºé—´ç”¨äºå­˜æ”¾ç±»çš„å®šä¹‰ä¿¡æ¯ã€å¸¸é‡ç­‰ä¿¡æ¯ï¼Œå †ç”¨äºå­˜æ”¾newå‡ºæ¥çš„å¯¹è±¡ï¼ŒJavaæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºçº¿ç¨‹ç§æœ‰ä¸»è¦å­˜å‚¨çº¿ç¨‹ä¸­çš„å¯¹è±¡å¼•ç”¨å’Œæ–¹æ³•è°ƒç”¨ä¿¡æ¯ç­‰ï¼Œç¨‹åºè®¡æ•°å™¨åˆ™ä¸ºäº†è®°å½•æ‰€åœ¨çº¿ç¨‹å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤ä½ç½®ã€‚ JVM é‡Œ new å¯¹è±¡æ—¶ï¼Œå †ä¼šå‘ç”ŸæŠ¢å å—ï¼Ÿä½ æ˜¯æ€ä¹ˆå»è®¾è®¡ JVM çš„å †çš„çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ ä¸ä¼šå‘ç”ŸæŠ¢å ï¼ŒJVMå¯ä»¥å°†newå‡ºæ¥çš„å¯¹è±¡å­˜åœ¨å †ä¸Šä¹Ÿå¯ä»¥å­˜å…¥çº¿ç¨‹æ ˆä¸­ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡é€ƒé€¸åˆ†æå†³å®šå¯¹è±¡æ˜¯åˆ†é…åˆ°çº¿ç¨‹å…±äº«çš„å †ä¸Šè¿˜æ˜¯æ ˆä¸Šåˆ†é…ï¼Œå¯ä»¥é€šè¿‡-XX:+DoEscapeAnalysis -XX:+EliminateLocksæ¥å¼€å¯é€ƒé€¸åˆ†æï¼Œä½†æ˜¯ä»…åœ¨-serveræ¨¡å¼ä¸‹æœ‰æ•ˆï¼Œå¯ä»¥é€šè¿‡java -versionæ¥æŸ¥çœ‹è‹¥jreæ˜¯serverç‰ˆæœ¬ï¼Œåˆ™é»˜è®¤å°±æ˜¯serveræ¨¡å¼ã€‚JVMå †çš„çº¿ç¨‹å®‰å…¨é€šè¿‡ä½¿ç”¨volatileå…³é”®å­—ã€ThreadLocalç±»æˆ–è€…åŠ é”æ¥å®ç°ã€‚ è®²ä¸€ä¸‹ Redis çš„æ•°æ®ç»“æ„ Rediså†…éƒ¨æ˜¯ä»¥key-valueçš„å½¢å¼å­˜å‚¨æ•°æ®çš„ï¼Œæ¯ä¸€ä¸ªkey-valueéƒ½ä¼šä»¥redisObjectç»“æ„ä½“ï¼Œç»“æ„ä½“ä¸­åŒ…æ‹¬æ•°æ®ç±»å‹ã€ç¼–ç æ–¹å¼ã€è¿‡æœŸç­–ç•¥ã€å¼•ç”¨æ•°é‡ã€å€¼ç»“æ„ä½“å®ä¾‹ï¼Œå€¼çš„ç»“æ„ä½“ä¸­åŒ…æ‹¬çš„keyçš„å€¼ï¼Œ Redis ç¼“å­˜åŒæ­¥é—®é¢˜ è®²ä¸€è®² MySQL çš„ç´¢å¼•ç»“æ„ MySQLçš„ç´¢å¼•æœ‰B+æ ‘å’ŒHashä¸¤ç§ç»“æ„ï¼Œåœ¨InnoDBå­˜å‚¨å¼•æ“ä¸­ï¼Œé»˜è®¤æ”¯æŒB+æ ‘ç»“æ„ï¼Œä¸æ”¯æŒHashç»“æ„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Hashç»“æ„ï¼ŒInnoDBé€šè¿‡B+æ ‘å®ç°è‡ªé€‚åº”Hashæ¥æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨Hashç»“æ„çš„ç´¢å¼•ã€‚MySQLä¹‹æ‰€ä»¥é€‰æ‹©B+æ ‘ä½œä¸ºå­˜å‚¨ç»“æ„ï¼Œæ˜¯å› ä¸ºå…¶æ¯”AVLæ ‘é«˜åº¦æ›´å¯æ§ï¼Œæ¯”B-æ ‘åœ¨æŸ¥è¯¢æ•ˆç‡ä¸Šæ›´å¿«ã€‚ è®²ä¸€ä¸‹ Redis åˆ†å¸ƒå¼é”çš„å®ç° Redisé€šè¿‡ä½¿ç”¨setnx+expireæˆ–è€…set key value nx ex timeæ¥è®¾ç½®åˆ†å¸ƒå¼é”ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨luaè„šæœ¬åˆ›å»ºåˆ†å¸ƒå¼é”ã€‚ä¸‰ç§æ–¹å¼ä¸­ï¼Œsetnx+expireå¯èƒ½ä¼šå‘ç”Ÿå¼‚å¸¸æƒ…å†µå¯¼è‡´é”çš„keyè®¾ç½®è¿‡æœŸæ—¶é—´å¤±è´¥ï¼Œæœ€ç»ˆé”æ— æ³•è‡ªåŠ¨é‡Šæ”¾è€Œå½±å“å…·ä½“ä¸šåŠ¡å¤„ç†ï¼›åˆ†å¸ƒå¼é”ä¹‹æ‰€ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢åœ¨åˆ›å»ºäº†é”ä¹‹åæœªé‡Šæ”¾é”è€Œäº§ç”Ÿçš„æ°¸ä¹…é”ï¼Œè¿™ç§æƒ…å†µå°†ä¼šå¯¼è‡´å…¶ä»–çº¿ç¨‹æ°¸ä¹…æ€§çš„åŠ é”å¤±è´¥ã€‚ å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨Redisé›†ç¾¤ä¸ºåº”ç”¨æä¾›ç¼“å­˜æœåŠ¡ï¼Œå¦‚æœåœ¨å¤šå†™çš„æƒ…å†µä¸‹ï¼ŒMasterå°šæœªåŒæ­¥åˆ°å…¨éƒ¨Slaveä¹‹å‰ï¼Œä¼šå‡ºç°åŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹å‘ä¸åŒçš„å†™æœåŠ¡å™¨å‘èµ·åŠ é”è¯·æ±‚ï¼Œä¸ºäº†é¢„é˜²è¿™ç§æƒ…å†µï¼Œåœ¨åŠ é”çš„æ—¶å€™ï¼Œå¯ä»¥å‘æ‰€æœ‰çš„èŠ‚ç‚¹åŒæ—¶å‘èµ·å†™è¯·æ±‚ï¼Œè¿™æ ·ä¿è¯äº†æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚ ConcurrentHashMap å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ ConcurrentHashMapåœ¨jdk1.8ä¹‹å‰ä½¿ç”¨Segment Lock(åˆ†æ®µé”)çš„æ–¹å¼å¯¹æ•°æ®æ®µè¿›è¡ŒåŠ é”ï¼Œåœ¨è¯¥æ•°æ®æ®µåŠ é”çš„æ—¶å€™ï¼Œä¸ä¼šå½±å“å…¶ä»–æ•°æ®æ®µçš„æ•°æ®è¯»å†™ï¼Œä»è€Œè¾¾åˆ°æé«˜å¹¶å‘çš„æ•ˆç‡ï¼›åœ¨jdk1.8ä¹‹åï¼Œä½¿ç”¨CASå¯¹å…·ä½“çš„æŸä¸ªNodeè¿›è¡ŒåŠ é”ï¼Œæ­¤æ–¹æ³•ä»…ä»…å¯¹çº¿ç¨‹æ­£åœ¨æ“ä½œçš„é‚£æ¡æ•°æ®åŠ é”ï¼Œä¸ä¼šå½±å“åˆ°Mapä¸­å…¶ä»–æ•°æ®çš„è¯»å†™ã€‚ æ•°æ®åº“ç´¢å¼•äº†è§£å—ï¼Ÿè®²ä¸€ä¸‹ MySQLç´¢å¼•æœ‰ä¸»é”®ç´¢å¼•ã€æ™®é€šç´¢å¼•ä¸¤ç§ï¼Œåˆå¯ç»†åˆ†ä¸ºå•ç´¢å¼•å’Œå¤åˆç´¢å¼•ï¼ŒInnoDBä¸­çš„ç´¢å¼•å­˜å‚¨ç»“æ„é»˜è®¤ä¸ºB+æ ‘ï¼ŒMyIsamä¸­ä¸»é”®ç´¢å¼•å­˜å‚¨çš„æ˜¯æ•°æ®åœ¨ç£ç›˜ä¸Šçš„ä½ç½®ï¼ŒInnoDBä¸­ä¸»é”®ç´¢å¼•å­˜å‚¨çš„æ˜¯å®é™…æ•°æ®ï¼Œæ™®é€šç´¢å¼•ä¸­å­˜å‚¨çš„æ˜¯ä¸»é”®æ•°æ®ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ™®é€šç´¢å¼•æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œæ˜¯å…ˆé€šè¿‡äºŒåˆ†æ³•æŸ¥è¯¢åˆ°ä¸»é”®å€¼ï¼Œç„¶åå†åˆ°ä¸»é”®ç´¢å¼•æ ‘ä¸­æ ¹æ®ä¸»é”®å€¼æŸ¥è¯¢å‡ºå…·ä½“çš„æ•°æ®ï¼Œè‹¥æ˜¯å¤åˆç´¢å¼•ä¸”æ‰€æŸ¥è¯¢çš„å­—æ®µå‡åœ¨å¤åˆç´¢å¼•ä¸­ï¼Œæ­¤ç±»ç´¢å¼•æŸ¥è¯¢ç§°ä¸ºè¦†ç›–ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦é€šè¿‡å›è¡¨æŸ¥è¯¢ä¸»é”®ç´¢å¼•æ ‘å³å¯è¿”å›ã€‚ å¸¸è§æ’åºç®—æ³• TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ã€‚ TCPåœ¨é€šä¿¡æ—¶éœ€è¦å…ˆå»ºç«‹è¿æ¥ï¼Œä¸ºäº†ä¿è¯æ•°æ®å‘é€çš„ç¨³å®šæ€§åŠå¯é æ€§ï¼Œéœ€è¦è¿›è¡Œé¢„é€šä¿¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶ä¸äººè§é¢æ—¶çš„æ¡æ‰‹ç¤¼ä»ªï¼Œç¬¬ä¸€æ¬¡æ¡æ‰‹æ˜¯clientç«¯å‘serverç«¯å‘é€ä¸€ä¸ªé€šçŸ¥(seq=x,SYN=1)ï¼Œå‘Šè¯‰serverç«¯æˆ‘è¦å‘ä½ å‘é€æ•°æ®äº†ï¼Œæ˜¯å¦åšå¥½äº†æ¥æ”¶å‡†å¤‡ï¼Œç„¶åclientç«¯çŠ¶æ€å˜ä¸ºSYN_SENTï¼Œserverç«¯è‹¥å·²ç»åšå¥½å‡†å¤‡ï¼Œåˆ™å‘clientç«¯å›åº”ä¸€æ¡æ¶ˆæ¯å‘Šè¯‰å®ƒæˆ‘å·²ç»åšå¥½äº†å‡†å¤‡ï¼Œå¯ä»¥å°†æ•°æ®å‘é€è¿‡æ¥äº†ï¼Œæ­¤ä¸ºç¬¬äºŒæ¬¡æ¡æ‰‹(seq=y,SYN=1,ACK=1,ack=x+1)ï¼Œserverç«¯çŠ¶æ€å˜ä¸ºSYN_RECVï¼Œclientç«¯æ¥æ”¶åˆ°serverç«¯å›åº”çš„æ¶ˆæ¯åï¼Œå‘serverç«¯å‘é€ç¡®è®¤åŒ…(seq=x+1,ACK=1,ack=y+1)ï¼Œç„¶åclientå’Œserverç«¯åŒæ—¶å˜æ›´çŠ¶æ€ä¸ºESTABLISHEDï¼Œåˆ°æ­¤å®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ åœ¨é€šä¿¡ç»“æŸåéœ€è¦å…³é—­è¿æ¥ï¼Œclientç«¯å‘serverç«¯å‘é€æ–­å¼€è¯·æ±‚(ç¬¬ä¸€æ¬¡æŒ¥æ‰‹)ï¼Œserverç«¯æ¥æ”¶åˆ°è¯·æ±‚åå›åº”clientç«¯ï¼Œç„¶åserverç«¯è¿›å…¥åˆ°ç­‰å¾…å…³é—­çŠ¶æ€(ç¬¬äºŒæ¬¡æŒ¥æ‰‹)ï¼Œclientæ¥æ”¶åˆ°å›åº”åå‘serverç«¯å‘é€ç¡®è®¤æ–­å¼€è¯·æ±‚(ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹)ï¼Œserverç«¯æ”¶åˆ°ç¡®è®¤æ¶ˆæ¯åå›åº”clientè¿›è¡Œæ–­å¼€(ç¬¬å››æ¬¡æŒ¥æ‰‹)ï¼Œè‹¥æœ€åclientè¿Ÿè¿Ÿæœªæ¥æ”¶åˆ°serverçš„ç¡®è®¤æ–­å¼€å›åº”ï¼Œåˆ™ä¼šé‡è¯•ä¸€æ¬¡ï¼Œé‡è¯•ä»ç„¶æœªæ”¶åˆ°å›åº”åˆ™è‡ªåŠ¨æ–­å¼€ã€‚ æ·±å…¥é—®äº†ä¹è§‚é”ï¼Œæ‚²è§‚é”åŠå…¶å®ç° æ‚²è§‚é”å’Œä¹è§‚é”åœ¨è¯»å†™æ•ˆç‡ä¸Šæœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œæ‚²è§‚é”æ˜¯åœ¨æ“ä½œæ•°æ®æ—¶ï¼Œè¢«æ“ä½œçš„æ•°æ®ä¸å¯è¢«å…¶ä»–çº¿ç¨‹/è¿æ¥è®¿é—®ï¼Œé™¤éç­‰å½“å‰æ“ä½œçš„äº‹åŠ¡æäº¤æˆ–é‡Šæ”¾é”ï¼Œåœ¨MySQLä¸­ï¼Œå¯ä»¥é€šè¿‡select for updateæ¥å®ç°æ‚²è§‚é”ï¼›ä¹è§‚é”åœ¨æ•ˆç‡ä¸Šæ¯”æ‚²è§‚é”é«˜å¾ˆå¤šï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬è¿›è¡Œæ•°æ®æ§åˆ¶ï¼Œæ¯”å¦‚MySQLä¸­çš„MVCCã€‚ é˜¿é‡Œå·´å·´äºŒé¢ è‡ªæˆ‘ä»‹ç» + é¡¹ç›®ä»‹ç»ã€‚ ä½ åœ¨é¡¹ç›®ä¸­æ‹…ä»»ä»€ä¹ˆæ ·çš„è§’è‰²ï¼Ÿ é‚£ä½ è§‰å¾—ä½ æ¯”åˆ«äººçš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿä½ ç”¨äº†å“ªäº›åˆ«äººæ²¡æœ‰çš„ä¸œè¥¿å—ï¼Ÿ è¯´ä¸€ä¸‹ HashMap çš„æ•°æ®ç»“æ„ çº¢é»‘æ ‘å’Œ AVL æ ‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ æ ‘é«˜åº¦ å¦‚ä½•æ‰èƒ½å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ HashMapï¼Ÿ è®²ä¸€ä¸‹ JVM å¸¸ç”¨åƒåœ¾å›æ”¶å™¨ JVMå¸¸ç”¨åƒåœ¾æ”¶é›†å™¨æœ‰CMSã€G1ï¼Œ Redis åˆ†å¸ƒå¼é” å†æè¿°ä¸€ä¸‹ä½ ä¹‹å‰çš„é¡¹ç›®å§ ä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®çš„äº®ç‚¹åœ¨å“ªé‡Œå‘¢ï¼Ÿ ä½ è®¾è®¡çš„æ•°æ®åº“éµå¾ªçš„èŒƒå¼ï¼Ÿ Java æ€ä¹ˆåŠ è½½ç±»ï¼Ÿ linux å¸¸ç”¨å‘½ä»¤æœ‰å“ªäº›ï¼Ÿ Spring çš„ IOC, AOPã€‚ è®²ä¸€ä¸‹ ORM æ¡†æ¶ Hibernate è®¾è®¡æ¨¡å¼äº†è§£å—ï¼Ÿè®²ä¸€ä¸‹ è‡ªå·±å®ç°ä¸€ä¸ªäºŒé˜¶æ®µæäº¤ï¼Œå¦‚ä½•è®¾è®¡ï¼Ÿ é˜¿é‡Œå·´å·´ä¸‰é¢ åœ¨é¡¹ç›®ä¸­ï¼Œå¹¶å‘é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æ‰èƒ½å¤Ÿä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ ElasticSearch ä¸ºä»€ä¹ˆæ£€ç´¢å¿«ï¼Œå®ƒçš„åº•å±‚æ•°æ®ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ JVM å†…å­˜æ¨¡å‹ Netty åº”ç”¨åœ¨å“ªäº›ä¸­é—´ä»¶å’Œæ¡†æ¶ä¸­å‘¢ï¼Ÿ çº¿ç¨‹æ± çš„å‚æ•° è®²ä¸€ä¸‹ B æ ‘å’Œ B+ æ ‘çš„åŒºåˆ« ä¸ºä»€ä¹ˆè¦ç”¨ Redis åšç¼“å­˜ï¼Ÿ äº†è§£ SpringBoot å—ï¼Ÿé‚£è®²ä¸€ä¸‹ SpringBoot çš„å¯åŠ¨æµç¨‹å§ å¦‚ä½•è§£å†³ bean çš„å¾ªç¯ä¾èµ–é—®é¢˜ï¼Ÿ Java æœ‰å“ªäº›é˜Ÿåˆ—ï¼Ÿ è®²ä¸€è®² Spring å’Œ Springboot çš„åŒºåˆ« æœ€è¿‘çœ‹äº†ä»€ä¹ˆä¹¦ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ ä½ å¹³æ—¶æ˜¯æ€ä¹ˆå­¦ä¹  Java çš„å‘¢ï¼Ÿ wait() å’Œ sleep() çš„åŒºåˆ« åŸå­å˜é‡çš„å®ç°åŸç† CAS çš„é—®é¢˜ï¼Œè®²ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚ æœ‰æ²¡æœ‰æ›´å¥½çš„è®¡æ•°å™¨è§£å†³ç­–ç•¥ è®²ä¸€è®² NIO å’Œ BIO çš„åŒºåˆ« Nginx è´Ÿè½½å‡è¡¡æ—¶æ˜¯å¦‚ä½•åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æŒ‚æ‰äº†ï¼Ÿ è®²ä¸€ä¸‹ Redis çš„æ•°æ®ç±»å‹å’Œä½¿ç”¨åœºæ™¯ k8s çš„å‚¨å­˜æ–¹å¼æ˜¯æ€æ ·çš„ï¼Ÿ Spring AOP åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆä½¿ç”¨ï¼Ÿä»€ä¹ˆæ˜¯åˆ‡ç‚¹ï¼Œä»€ä¹ˆæ˜¯åˆ‡é¢ï¼Ÿæœ€å¥½æ˜¯ä¸¾ä¸ªä¾‹å­ ç®—æ³•é¢˜ï¼šç»™ä¸€å †ç¡¬å¸çš„ arrayï¼Œè¿”å›æ‰€æœ‰çš„ç»„åˆ é˜¿é‡Œå·´å·´æ€»ç›‘é¢ ç®—æ³•ï¼šç»™ä¸€ä¸ª set æ‰“å°å‡ºæ‰€æœ‰å­é›†ï¼›å¤šçº¿ç¨‹ä»å¤šä¸ªæ–‡ä»¶ä¸­è¯»å…¥æ•°æ®ï¼Œå†™åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼› åˆ¤æ–­ ip æ˜¯å¦åœ¨ç»™å®šèŒƒå›´å†…ï¼›æ‰“ä¹±ä¸€å‰¯æ‰‘å…‹ç‰Œï¼Œä¸èƒ½ç”¨é¢å¤–ç©ºé—´ï¼Œè¯æ˜ä¸ºä»€ä¹ˆæ˜¯éšæœºçš„ã€‚ TCP å’Œ UDP åŒºåˆ« çº¿ç¨‹æ± çš„åŸç†ä»¥åŠå„ç§çº¿ç¨‹æ± çš„åº”ç”¨åœºæ™¯ çº¿ç¨‹æ± ä¸­ä½¿ç”¨æœ‰é™çš„é˜»å¡é˜Ÿåˆ—å’Œæ— é™çš„é˜»å¡é˜Ÿåˆ—çš„åŒºåˆ« å¦‚æœä½ å‘ç°ä½ çš„ SQL è¯­å¥å§‹ç»ˆèµ°å¦ä¸€ä¸ªç´¢å¼•ï¼Œä½†æ˜¯ä½ å¸Œæœ›å®ƒèµ°ä½ æƒ³è¦çš„ç´¢å¼•ï¼Œæ€ä¹ˆåŠï¼Ÿ MySQL æ‰§è¡Œè®¡åˆ’ æ•°æ®åº“ç´¢å¼•ä¸ºä»€ä¹ˆç”¨ B+ æ ‘ï¼Ÿ ä½ åœ¨åš SQL ä¼˜åŒ–ä¸»è¦ä»å“ªå‡ ä¸ªæ–¹é¢åšï¼Œç”¨åˆ°å“ªäº›æ–¹æ³•å·¥å…·ï¼Ÿ æœ‰æ²¡æœ‰æƒ³é—®çš„ï¼Ÿ é˜¿é‡Œå·´å·´ HR é¢ è‡ªæˆ‘ä»‹ç» å¹³æ—¶æ€ä¹ˆå­¦ä¹ çš„ï¼Ÿ æœ‰ä»€ä¹ˆå…´è¶£çˆ±å¥½å—ï¼Ÿ æ€ä¹ˆçœ‹å¾… 996ï¼Ÿ æ€ä¹ˆå¹³è¡¡å·¥ä½œå’Œå­¦ä¹ ï¼Ÿ â€¦â€¦ æœ‰æ²¡æœ‰ä»€ä¹ˆæƒ³é—®çš„","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://luxiaowan.github.io/tags/é¢è¯•/"},{"name":"é˜¿é‡Œ","slug":"é˜¿é‡Œ","permalink":"http://luxiaowan.github.io/tags/é˜¿é‡Œ/"}]},{"title":"Gitå¸¸ç”¨å‘½ä»¤","slug":"Gitå¸¸ç”¨å‘½ä»¤","date":"2019-12-02T09:23:00.000Z","updated":"2019-12-03T16:12:26.788Z","comments":true,"path":"2019/12/02/Gitå¸¸ç”¨å‘½ä»¤/","link":"","permalink":"http://luxiaowan.github.io/2019/12/02/Gitå¸¸ç”¨å‘½ä»¤/","excerpt":"","text":"","categories":[{"name":"Git","slug":"Git","permalink":"http://luxiaowan.github.io/categories/Git/"}],"tags":[]},{"title":"JVMä¹‹OOM","slug":"Javaä¹‹OOM","date":"2019-11-28T14:23:00.000Z","updated":"2019-12-03T16:04:43.133Z","comments":true,"path":"2019/11/28/Javaä¹‹OOM/","link":"","permalink":"http://luxiaowan.github.io/2019/11/28/Javaä¹‹OOM/","excerpt":"","text":"java.lang.StackOverflowError æ ˆæº¢å‡ºé”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯å¾ˆå®¹æ˜“æ¨¡æ‹Ÿï¼Œä¸”çœ‹ä¸‹é¢çš„ä»£ç ï¼š 1234567891011121314151617public static void main(String[] args) &#123; new StackOverflowTest().test();&#125;private static int high = 0;private void test() &#123; try &#123; ++high; test(); &#125; finally &#123; System.out.println(\"æ ˆçš„æ·±åº¦ä¸º: \" + high); &#125;&#125;---JVM ARGS: -server -Xmn2m -Xss1m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:-UseTLAB é‡Š æˆ‘ä»¬éƒ½çŸ¥é“æ–¹æ³•çš„è°ƒç”¨æ˜¯é€šè¿‡å…¥æ ˆå’Œè®¡ç®—å‡ºæ ˆæ¥å®ç°çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ–¹æ³•é€’å½’è°ƒç”¨ä¸€å®šæ¬¡æ•°æ—¶ï¼Œå¿…ç„¶ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Œæ ˆæº¢å‡ºåï¼Œç¨‹åºè‡ªåŠ¨åœæ­¢ï¼Œæ˜¯ä¸€ç±»ä¸å¯æ•è·å’Œæ¢å¤çš„Errorç±»å‹çš„é”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨é€’å½’ç®—æ³•æ—¶ï¼Œåº”å½“æ³¨æ„é€’å½’çš„æ·±åº¦ï¼Œé˜²æ­¢å‡ºç°æ ˆæº¢å‡ºé”™è¯¯å¯¼è‡´æœåŠ¡é”™è¯¯ java.lang.OutOfMemoryError:java heap space JVMå †ç©ºé—´ä¸è¶³å¼•èµ·çš„å†…å­˜æº¢å‡ºé”™è¯¯ï¼Œè¿™ç±»é”™è¯¯æ¯”è¾ƒå¸¸è§ï¼Œæ­¤å¤„å°±ä¸åšå¤ªå¤šçš„è§£é‡Šï¼Œå‡ºç°è¿™ç±»é”™è¯¯ï¼Œä½ å°±å»çœ‹GCæ—¥å¿—ï¼Œçœ‹çœ‹æ–°ç”Ÿä»£ã€è€å¹´ä»£ã€æ°¸ä¹…ä»£/Metaspaceçš„ä½¿ç”¨æƒ…å†µï¼Œå¦‚æœæ˜¯æƒ³æŸ¥çœ‹GCçš„æƒ…å†µï¼Œä½¿ç”¨å¦‚ä¸‹JVMæŒ‡ä»¤ï¼š -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:./gclog.logï¼Œgcçš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šè¾“å‡ºåˆ°gclog.logæ–‡ä»¶ä¸­ gclog.log 123456789101112131415161718192021222324252627*JVMä¿¡æ¯*Java HotSpot(TM) 64-Bit Server VM (25.161-b12) for bsd-amd64 JRE (1.8.0_161-b12), built on Dec 19 2017 16:22:20 by \"java_re\" with gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)Memory: 4k page, physical 16777216k(2991720k free)/proc/meminfo:*JVM ARGS*CommandLine flags: -XX:+DoEscapeAnalysis -XX:+EliminateAllocations -XX:InitialHeapSize=268435456 -XX:MaxHeapSize=4294967296 -XX:MaxNewSize=2097152 -XX:NewSize=2097152 -XX:+PrintGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:ThreadStackSize=1024 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC -XX:-UseTLAB *GCæ—¥å¿—ä¿¡æ¯*0.125: [GC (Allocation Failure) [PSYoungGen: 1023K-&gt;512K(1536K)] 1023K-&gt;536K(261632K), 0.0010704 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 0.157: [GC (Allocation Failure) [PSYoungGen: 1535K-&gt;493K(1536K)] 1559K-&gt;847K(261632K), 0.0010655 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] ...0.360: [GC (Allocation Failure) [PSYoungGen: 1247K-&gt;256K(1536K)] 2614K-&gt;1727K(261632K), 0.0008285 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] Heap *å¹´è½»ä»£* PSYoungGen total 1536K, used 396K [0x00000007bfe00000, 0x00000007c0000000, 0x00000007c0000000) eden space 1024K, 13% used [0x00000007bfe00000,0x00000007bfe23268,0x00000007bff00000) from space 512K, 50% used [0x00000007bff00000,0x00000007bff40000,0x00000007bff80000) to space 512K, 0% used [0x00000007bff80000,0x00000007bff80000,0x00000007c0000000) *è€å¹´ä»£* ParOldGen total 260096K, used 1471K [0x00000006c0000000, 0x00000006cfe00000, 0x00000007bfe00000) object space 260096K, 0% used [0x00000006c0000000,0x00000006c016fc00,0x00000006cfe00000) *Metaspaceç©ºé—´ï¼Œjdk8+* Metaspace used 3402K, capacity 4500K, committed 4864K, reserved 1056768K class space used 368K, capacity 388K, committed 512K, reserved 1048576K ä»£ç  12345678910111213public static void main(String[] args) &#123; new StackOverflowTest().heapSpace();&#125;private void heapSpace() &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); while (true) &#123; list.add(new String(\"abc\")); &#125;&#125;--- JVM ARGS: -server -Xmn2m -Xss1m -Xms1m -Xmx1m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:-DoEscapeAnalysis -XX:-EliminateAllocations -XX:-UseTLAB java.lang.OutOfMemoryError:GC overhead limit exceeded è¶…å‡ºäº†GCå¼€é”€é™åˆ¶å¼•èµ·çš„å†…å­˜æº¢å‡ºï¼Œè¿™ä¸ªé”™è¯¯ä¸æ˜¯ç‰¹åˆ«å¸¸è§ï¼ŒSun å®˜æ–¹å¯¹æ­¤çš„å®šä¹‰ï¼šè¶…è¿‡98%çš„æ—¶é—´ç”¨æ¥åšGCå¹¶ä¸”å›æ”¶äº†ä¸åˆ°2%çš„å †å†…å­˜æ—¶ä¼šæŠ›å‡ºæ­¤å¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨å‚æ•°-XX:-UseGCOverheadLimit ç¦ç”¨è¿™ä¸ªæ£€æŸ¥ï¼Œä½†æ˜¯è¿™ä¸ªå‚æ•°è§£å†³ä¸äº†å†…å­˜é—®é¢˜ï¼Œåªæ˜¯æŠŠé”™è¯¯çš„ä¿¡æ¯å»¶åï¼Œæ›¿æ¢æˆ java.lang.OutOfMemoryError: Java heap space java.lang.OutOfMemoryError:Metaspace Metaspaceå†…å­˜æº¢å‡ºï¼ŒMetaspaceæ˜¯jdk8+ç‰¹æœ‰çš„ä¸œè¥¿ï¼Œç”¨æ¥ä»£æ›¿ä¹‹å‰çš„PermGenï¼Œä¸»è¦å­˜å‚¨classåç§°ã€å­—æ®µã€æ–¹æ³•ã€å­—èŠ‚ç ã€å¸¸é‡æ± ã€JITä¼˜åŒ–ä»£ç ç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨-XX:MetaspaceSizeå’Œ-XX:MaxMetaspaceSizeæ¥æŒ‡å®šå…¶å¤§å°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹Metaspaceä¸ä¼šå‘ç”ŸOOMï¼ŒMetaspaceçš„ä½¿ç”¨é‡ä¸JVMåŠ è½½çš„classæ•°é‡æœ‰å¾ˆå¤§å…³ç³»ï¼š ä»£ç  12345678910111213141516static ClassPool cp = ClassPool.getDefault();public static void main(String[] args) throws CannotCompileException &#123; int i = 0; try &#123; for (;; i++) &#123; Class cz = cp.makeClass(\"com.example.demo.bean.DemoBean\" + i).toClass(); &#125; &#125; catch (Exception e) &#123; &#125; finally &#123; System.out.println(i); &#125;&#125;--- JVM ARGS: -XX:MetaspaceSize=10m -XX:MaxMetaspaceSize=10m -XX:+PrintGCDetails -XX:+PrintGCTimeStamps è¾“å‡º 1234567891011121314151617181920210.598: [GC (Metadata GC Threshold) [PSYoungGen: 39345K-&gt;10741K(76288K)] 39345K-&gt;15811K(251392K), 0.0111319 secs] [Times: user=0.05 sys=0.01, real=0.01 secs] 0.609: [Full GC (Metadata GC Threshold) [PSYoungGen: 10741K-&gt;0K(76288K)] [ParOldGen: 5069K-&gt;15550K(139776K)] 15811K-&gt;15550K(216064K), [Metaspace: 9735K-&gt;9735K(1056768K)], 0.0504762 secs] [Times: user=0.29 sys=0.01, real=0.05 secs] ...0.754: [GC (Last ditch collection) [PSYoungGen: 0K-&gt;0K(82944K)] 15477K-&gt;15477K(472064K), 0.0008113 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 0.755: [Full GC (Last ditch collection) [PSYoungGen: 0K-&gt;0K(82944K)] [ParOldGen: 15477K-&gt;15477K(607232K)] 15477K-&gt;15477K(690176K), [Metaspace: 9733K-&gt;9733K(1056768K)], 0.0204189 secs] [Times: user=0.08 sys=0.00, real=0.02 secs] 5341Exception in thread \"main\" java.lang.OutOfMemoryError: Metaspace at javassist.ClassPool.toClass(ClassPool.java:1170) at javassist.ClassPool.toClass(ClassPool.java:1113) at javassist.ClassPool.toClass(ClassPool.java:1071) at javassist.CtClass.toClass(CtClass.java:1275) at com.example.demo.jvm.MetaspceOOMTest.main(MetaspceOOMTest.java:13)Heap PSYoungGen total 82944K, used 2390K [0x000000076ab00000, 0x0000000772c00000, 0x00000007c0000000) eden space 82432K, 2% used [0x000000076ab00000,0x000000076ad55ab0,0x000000076fb80000) from space 512K, 0% used [0x0000000772b80000,0x0000000772b80000,0x0000000772c00000) to space 10752K, 0% used [0x0000000771700000,0x0000000771700000,0x0000000772180000) ParOldGen total 607232K, used 15477K [0x00000006c0000000, 0x00000006e5100000, 0x000000076ab00000) object space 607232K, 2% used [0x00000006c0000000,0x00000006c0f1d4c8,0x00000006e5100000) Metaspace used 9770K, capacity 10084K, committed 10240K, reserved 1056768K class space used 3165K, capacity 3214K, committed 3328K, reserved 1048576K æˆ‘ä»¬å°†Metaspaceçš„åˆå§‹å¤§å°å’Œæœ€å¤§å€¼éƒ½è®¾ç½®ä¸º10mï¼Œæœ€ç»ˆiçš„å€¼å¤§æ¦‚ä¼šåœ¨5340å·¦å³çš„æ—¶å€™æŠ¥OOMï¼Œä»FGCçš„æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼ŒMetaspaceåœ¨æ•´ä¸ªGCé˜¶æ®µéƒ½æœªè¿›è¡Œä»»åŠ¡çš„å†…å­˜å›æ”¶ï¼Œç›´è‡³è¢«å…¨éƒ¨ç”¨å®Œï¼Œå…·ä½“çš„å…³äºMetaspaceçš„ä»‹ç»å¯ä»¥çœ‹ä¸‹PerfMaç¤¾åŒºçš„è¿™ç¯‡æ–‡ç« ï¼šhttps://club.perfma.com/article/210111 java.lang.OutOfMemoryError:Direct buffer memory ByteBuffer. allocateDirect (int capability)æ˜¯åˆ†é…æ“ä½œç³»ç»Ÿçš„æœ¬åœ°å†…å­˜ï¼Œä¸åœ¨GCç®¡è¾–èŒƒå›´ä¹‹å†…ï¼Œç”±äºä¸éœ€è¦å†…å­˜æ‹·è´æ‰€ä»¥é€Ÿåº¦ç›¸å¯¹è¾ƒå¿«ï¼Œä½†å¦‚æœä¸æ–­åˆ†é…æœ¬åœ°å†…å­˜ï¼Œå †å†…å­˜å°±ä¼šå¾ˆå°‘ä½¿ç”¨ï¼Œé‚£ä¹ˆJVMå°±ä¸éœ€è¦è¿›è¡ŒGCï¼Œé‚£åˆ›å»ºçš„DirectByteBufferå¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ï¼Œå°±ä¼šå‡ºç°å †å†…å­˜å……è¶³ä½†æœ¬åœ°å†…å­˜ä¸è¶³çš„æƒ…å†µï¼Œç»§ç»­å°è¯•åˆ†é…æœ¬åœ°å†…å­˜å°±ä¼šå‡ºç°OOMã€‚ ä»£ç  1234567public static void main(String[] args) &#123; System.out.println(\"å½“å‰directå¤§å°: \" + (VM.maxDirectMemory() / 1024 / 1024) + \" MB\"); ByteBuffer bb = ByteBuffer.allocateDirect(Math.toIntExact(VM.maxDirectMemory() + 10));&#125;--- JVM ARGS: -XX:MaxDirectMemorySize=10m è¿™é‡Œæˆ‘ä»¬éœ€è¦é€šè¿‡JVMå‚æ•°-XX:MaxDirectMemorySize=10å°†JVMæœ¬åœ°æœ€å¤§ä½¿ç”¨å†…å­˜è®¾ç½®ä¸º10MBï¼Œä¸ç„¶å¦‚æœä½ æœ¬åœ°å‰©ä½™å†…å­˜å¾ˆå¤§ï¼Œé‚£ä¹ˆå°±å¾ˆéš¾æ¨¡æ‹Ÿå‡ºæ­¤é”™è¯¯ è¾“å‡º 123456å½“å‰directå¤§å°: 10 MBException in thread \"main\" java.lang.OutOfMemoryError: Direct buffer memory at java.nio.Bits.reserveMemory(Bits.java:694) at java.nio.DirectByteBuffer.&lt;init&gt;(DirectByteBuffer.java:123) at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311) at com.example.demo.jvm.DirectBufferOOMTest.main(DirectBufferOOMTest.java:11) java.lang.OutOfMemoryError:unable create new native thread çº¿ç¨‹åˆ›å»ºçš„å¤ªå¤šï¼Œå¯¼è‡´æ— æ³•ç»§ç»­åˆ›å»ºçº¿ç¨‹ï¼Œå‡ºç°è¿™ä¸ªé—®é¢˜å°±è¦å»ä½¿ç”¨jstackå¯¼å‡ºçº¿ç¨‹æ ˆæŸ¥çœ‹å…·ä½“æƒ…å†µ ä»£ç  12345678910111213public static void main(String[] args) &#123; while (true) &#123; new Thread(new Runnable() &#123; @Override public void run() &#123; try &#123; Thread.sleep(100000); &#125; catch (InterruptedException e) &#123; &#125; &#125; &#125;).start(); &#125;&#125; è¿™ä¸€æ®µä»£ç å¿…ç„¶ä¼šå‡ºç°è¯¥ERRORï¼Œä¸è®ºä½ çš„æœºå™¨æœ‰å¤šç‰›æ°ï¼Œä½ ä¼šå‘ç°å‡ºç°äº†OOMä¹‹åï¼Œè¿›ç¨‹å¹¶æœªç»ˆæ­¢ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ç”¨jpså‘½ä»¤æŸ¥çœ‹è¿›ç¨‹å·ï¼Œç„¶åä½¿ç”¨jstack pidæŸ¥çœ‹çº¿ç¨‹æ ˆï¼Œä¼šå‘ç°æœ‰éå¸¸å¤šçš„çº¿ç¨‹å¤„äºTIMED_WAITING (sleeping)çŠ¶æ€ï¼š 12345\"Thread-256\" #267 prio=5 os_prio=31 tid=0x00007fccdd8cc000 nid=0x27d03 waiting on condition [0x0000700019b85000] java.lang.Thread.State: TIMED_WAITING (sleeping) at java.lang.Thread.sleep(Native Method) at com.example.demo.jvm.NativeThreadOOMTest$1.run(NativeThreadOOMTest.java:11) at java.lang.Thread.run(Thread.java:748)","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"SpringBootå®˜æ–¹é…ç½®æ–‡æ¡£(è‹±æ–‡ç‰ˆ)","slug":"SpringBootå®˜æ–¹é…ç½®æ–‡æ¡£(è‹±æ–‡ç‰ˆ)","date":"2019-11-22T17:13:00.000Z","updated":"2019-11-25T17:18:31.849Z","comments":true,"path":"2019/11/23/SpringBootå®˜æ–¹é…ç½®æ–‡æ¡£(è‹±æ–‡ç‰ˆ)/","link":"","permalink":"http://luxiaowan.github.io/2019/11/23/SpringBootå®˜æ–¹é…ç½®æ–‡æ¡£(è‹±æ–‡ç‰ˆ)/","excerpt":"","text":"BANNER banner.charset=UTF-8 # Banner file encoding. banner.location=classpath:banner.txt # Banner file location. banner.image.location=classpath:banner.gif # Banner image file location (jpg/png can also be used). banner.image.width= # Width of the banner image in chars (default 76) banner.image.height= # Height of the banner image in chars (default based on image height) banner.image.margin= # Left hand image margin in chars (default 2) banner.image.invert= # If images should be inverted for dark terminal themes (default false) LOGGING logging.config= # Location of the logging configuration file. For instance classpath:logback.xml for Logback logging.exception-conversion-word=%wEx # Conversion word used when logging exceptions. logging.file= # Log file name. For instance myapp.log logging.level.*= # Log levels severity mapping. For instance logging.level.org.springframework=DEBUG logging.path= # Location of the log file. For instance /var/log logging.pattern.console= # Appender pattern for output to the console. Only supported with the default logback setup. logging.pattern.file= # Appender pattern for output to the file. Only supported with the default logback setup. logging.pattern.level= # Appender pattern for log level (default %5p). Only supported with the default logback setup. logging.register-shutdown-hook=false # Register a shutdown hook for the logging system when it is initialized. AOP spring.aop.auto=true # Add @EnableAspectJAutoProxy. spring.aop.proxy-target-class=true # Whether subclass-based (CGLIB) proxies are to be created (true) as opposed to standard Java interface-based proxies (false). IDENTITY (ContextIdApplicationContextInitializer) spring.application.index= # Application index. spring.application.name= # Application name. ADMIN (SpringApplicationAdminJmxAutoConfiguration) spring.application.admin.enabled=false # Enable admin features for the application. spring.application.admin.jmx-name=org.springframework.boot:type=Admin,name=SpringApplication # JMX name of the application admin MBean. AUTO-CONFIGURATION spring.autoconfigure.exclude= # Auto-configuration classes to exclude. SPRING CORE spring.beaninfo.ignore=true # Skip search of BeanInfo classes. SPRING CACHE (CacheProperties) spring.cache.cache-names= # Comma-separated list of cache names to create if supported by the underlying cache manager. spring.cache.caffeine.spec= # The spec to use to create caches. Check CaffeineSpec for more details on the spec format. spring.cache.couchbase.expiration=0 # Entry expiration in milliseconds. By default the entries never expire. spring.cache.ehcache.config= # The location of the configuration file to use to initialize EhCache. spring.cache.infinispan.config= # The location of the configuration file to use to initialize Infinispan. spring.cache.jcache.config= # The location of the configuration file to use to initialize the cache manager. spring.cache.jcache.provider= # Fully qualified name of the CachingProvider implementation to use to retrieve the JSR-107 compliant cache manager. Only needed if more than one JSR-107 implementation is available on the classpath. spring.cache.type= # Cache type, auto-detected according to the environment by default. SPRING CONFIG - using environment property only (ConfigFileApplicationListener) spring.config.location= # Config file locations. spring.config.name=application # Config file name. HAZELCAST (HazelcastProperties) spring.hazelcast.config= # The location of the configuration file to use to initialize Hazelcast. PROJECT INFORMATION (ProjectInfoProperties) spring.info.build.location=classpath:META-INF/build-info.properties # Location of the generated build-info.properties file. spring.info.git.location=classpath:git.properties # Location of the generated git.properties file. JMX spring.jmx.default-domain= # JMX domain name. spring.jmx.enabled=true # Expose management beans to the JMX domain. spring.jmx.server=mbeanServer # MBeanServer bean name. Email (MailProperties) spring.mail.default-encoding=UTF-8 # Default MimeMessage encoding. spring.mail.host= # SMTP server host. For instance smtp.example.com spring.mail.jndi-name= # Session JNDI name. When set, takes precedence to others mail settings. spring.mail.password= # Login password of the SMTP server. spring.mail.port= # SMTP server port. spring.mail.properties.*= # Additional JavaMail session properties. spring.mail.protocol=smtp # Protocol used by the SMTP server. spring.mail.test-connection=false # Test that the mail server is available on startup. spring.mail.username= # Login user of the SMTP server. APPLICATION SETTINGS (SpringApplication) spring.main.banner-mode=console # Mode used to display the banner when the application runs. spring.main.sources= # Sources (class name, package name or XML resource location) to include in the ApplicationContext. spring.main.web-application-type= # Flag to explicitly request a specific type of web application. Auto-detected based on the classpath if not set. FILE ENCODING (FileEncodingApplicationListener) spring.mandatory-file-encoding= # Expected character encoding the application must use. INTERNATIONALIZATION (MessageSourceAutoConfiguration) spring.messages.always-use-message-format=false # Set whether to always apply the MessageFormat rules, parsing even messages without arguments. spring.messages.basename=messages # Comma-separated list of basenames, each following the ResourceBundle convention. spring.messages.cache-seconds=-1 # Loaded resource bundle files cache expiration, in seconds. When set to -1, bundles are cached forever. spring.messages.encoding=UTF-8 # Message bundles encoding. spring.messages.fallback-to-system-locale=true # Set whether to fall back to the system Locale if no files for a specific Locale have been found. OUTPUT spring.output.ansi.enabled=detect # Configure the ANSI output. PID FILE (ApplicationPidFileWriter) spring.pid.fail-on-write-error= # Fail if ApplicationPidFileWriter is used but it cannot write the PID file. spring.pid.file= # Location of the PID file to write (if ApplicationPidFileWriter is used). PROFILES spring.profiles.active= # Comma-separated list (or list if using YAML) of active profiles. spring.profiles.include= # Unconditionally activate the specified comma separated profiles (or list of profiles if using YAML). Reactor spring.reactor.stacktrace-mode.enabled=false # Set whether Reactor should collect stacktrace information at runtime. SENDGRID (SendGridAutoConfiguration) spring.sendgrid.api-key= # SendGrid api key (alternative to username/password) spring.sendgrid.proxy.host= # SendGrid proxy host spring.sendgrid.proxy.port= # SendGrid proxy port EMBEDDED SERVER CONFIGURATION (ServerProperties) server.address= # Network address to which the server should bind to. server.compression.enabled=false # If response compression is enabled. server.compression.excluded-user-agents= # List of user-agents to exclude from compression. server.compression.mime-types= # Comma-separated list of MIME types that should be compressed. For instance text/html,text/css,application/json server.compression.min-response-size= # Minimum response size that is required for compression to be performed. For instance 2048 server.connection-timeout= # Time in milliseconds that connectors will wait for another HTTP request before closing the connection. When not set, the connectorâ€™s container-specific default will be used. Use a value of -1 to indicate no (i.e. infinite) timeout. server.display-name=application # Display name of the application. server.max-http-header-size=0 # Maximum size in bytes of the HTTP message header. server.error.include-exception=false # Include the â€œexceptionâ€ attribute. server.error.include-stacktrace=never # When to include a â€œstacktraceâ€ attribute. server.error.path=/error # Path of the error controller. server.error.whitelabel.enabled=true # Enable the default error page displayed in browsers in case of a server error. server.jetty.acceptors= # Number of acceptor threads to use. server.jetty.accesslog.append=false # Append to log. server.jetty.accesslog.date-format=dd/MMM/yyyy:HH:mm:ss Z # Timestamp format of the request log. server.jetty.accesslog.enabled=false # Enable access log. server.jetty.accesslog.extended-format=false # Enable extended NCSA format. server.jetty.accesslog.file-date-format= # Date format to place in log file name. server.jetty.accesslog.filename= # Log filename. If not specified, logs will be redirected to â€œSystem.errâ€. server.jetty.accesslog.locale= # Locale of the request log. server.jetty.accesslog.log-cookies=false # Enable logging of the request cookies. server.jetty.accesslog.log-latency=false # Enable logging of request processing time. server.jetty.accesslog.log-server=false # Enable logging of the request hostname. server.jetty.accesslog.retention-period=31 # Number of days before rotated log files are deleted. server.jetty.accesslog.time-zone=GMT # Timezone of the request log. server.jetty.max-http-post-size=0 # Maximum size in bytes of the HTTP post or put content. server.jetty.selectors= # Number of selector threads to use. server.port=8080 # Server HTTP port. server.server-header= # Value to use for the Server response header (no header is sent if empty) server.use-forward-headers= # If X-Forwarded-* headers should be applied to the HttpRequest. server.servlet.context-parameters.= # Servlet context init parameters server.servlet.context-path= # Context path of the application. server.servlet.jsp.class-name=org.apache.jasper.servlet.JspServlet # The class name of the JSP servlet. server.servlet.jsp.init-parameters.= # Init parameters used to configure the JSP servlet server.servlet.jsp.registered=true # Whether or not the JSP servlet is registered server.servlet.path=/ # Path of the main dispatcher servlet. server.session.cookie.comment= # Comment for the session cookie. server.session.cookie.domain= # Domain for the session cookie. server.session.cookie.http-only= # â€œHttpOnlyâ€ flag for the session cookie. server.session.cookie.max-age= # Maximum age of the session cookie in seconds. server.session.cookie.name= # Session cookie name. server.session.cookie.path= # Path of the session cookie. server.session.cookie.secure= # â€œSecureâ€ flag for the session cookie. server.session.persistent=false # Persist session data between restarts. server.session.store-dir= # Directory used to store session data. server.session.timeout= # Session timeout in seconds. server.session.tracking-modes= # Session tracking modes (one or more of the following: â€œcookieâ€, â€œurlâ€, â€œsslâ€). server.ssl.ciphers= # Supported SSL ciphers. server.ssl.client-auth= # Whether client authentication is wanted (â€œwantâ€) or needed (â€œneedâ€). Requires a trust store. server.ssl.enabled= # Enable SSL support. server.ssl.enabled-protocols= # Enabled SSL protocols. server.ssl.key-alias= # Alias that identifies the key in the key store. server.ssl.key-password= # Password used to access the key in the key store. server.ssl.key-store= # Path to the key store that holds the SSL certificate (typically a jks file). server.ssl.key-store-password= # Password used to access the key store. server.ssl.key-store-provider= # Provider for the key store. server.ssl.key-store-type= # Type of the key store. server.ssl.protocol=TLS # SSL protocol to use. server.ssl.trust-store= # Trust store that holds SSL certificates. server.ssl.trust-store-password= # Password used to access the trust store. server.ssl.trust-store-provider= # Provider for the trust store. server.ssl.trust-store-type= # Type of the trust store. server.tomcat.accept-count= # Maximum queue length for incoming connection requests when all possible request processing threads are in use. server.tomcat.accesslog.buffered=true # Buffer output such that it is only flushed periodically. server.tomcat.accesslog.directory=logs # Directory in which log files are created. Can be relative to the tomcat base dir or absolute. server.tomcat.accesslog.enabled=false # Enable access log. server.tomcat.accesslog.file-date-format=.yyyy-MM-dd # Date format to place in log file name. server.tomcat.accesslog.pattern=common # Format pattern for access logs. server.tomcat.accesslog.prefix=access_log # Log file name prefix. server.tomcat.accesslog.rename-on-rotate=false # Defer inclusion of the date stamp in the file name until rotate time. server.tomcat.accesslog.request-attributes-enabled=false # Set request attributes for IP address, Hostname, protocol and port used for the request. server.tomcat.accesslog.rotate=true # Enable access log rotation. server.tomcat.accesslog.suffix=.log # Log file name suffix. server.tomcat.additional-tld-skip-patterns= # Comma-separated list of additional patterns that match jars to ignore for TLD scanning. server.tomcat.background-processor-delay=30 # Delay in seconds between the invocation of backgroundProcess methods. server.tomcat.basedir= # Tomcat base directory. If not specified a temporary directory will be used. server.tomcat.internal-proxies=10\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\ 192\\.168\\.\\d{1,3}\\.\\d{1,3}|\\ 169\\.254\\.\\d{1,3}\\.\\d{1,3}|\\ 127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\ 172\\.1[6-9]{1}\\.\\d{1,3}\\.\\d{1,3}|\\ 172\\.2[0-9]{1}\\.\\d{1,3}\\.\\d{1,3}|\\ 172\\.3[0-1]{1}\\.\\d{1,3}\\.\\d{1,3} # regular expression matching trusted IP addresses. server.tomcat.max-connections= # Maximum number of connections that the server will accept and process at any given time. server.tomcat.max-http-header-size=0 # Maximum size in bytes of the HTTP message header. server.tomcat.max-http-post-size=0 # Maximum size in bytes of the HTTP post content. server.tomcat.max-threads=0 # Maximum amount of worker threads. server.tomcat.min-spare-threads=0 # Minimum amount of worker threads. server.tomcat.port-header=X-Forwarded-Port # Name of the HTTP header used to override the original port value. server.tomcat.protocol-header= # Header that holds the incoming protocol, usually named â€œX-Forwarded-Protoâ€. server.tomcat.protocol-header-https-value=https # Value of the protocol header that indicates that the incoming request uses SSL. server.tomcat.redirect-context-root= # Whether requests to the context root should be redirected by appending a / to the path. server.tomcat.remote-ip-header= # Name of the http header from which the remote ip is extracted. For instance X-FORWARDED-FOR server.tomcat.uri-encoding=UTF-8 # Character encoding to use to decode the URI. server.undertow.accesslog.dir= # Undertow access log directory. server.undertow.accesslog.enabled=false # Enable access log. server.undertow.accesslog.pattern=common # Format pattern for access logs. server.undertow.accesslog.prefix=access_log. # Log file name prefix. server.undertow.accesslog.rotate=true # Enable access log rotation. server.undertow.accesslog.suffix=log # Log file name suffix. server.undertow.buffer-size= # Size of each buffer in bytes. server.undertow.direct-buffers= # Allocate buffers outside the Java heap. server.undertow.io-threads= # Number of I/O threads to create for the worker. server.undertow.eager-filter-init=true # Whether servlet filters should be initialized on startup. server.undertow.max-http-post-size=0 # Maximum size in bytes of the HTTP post content. server.undertow.worker-threads= # Number of worker threads. FREEMARKER (FreeMarkerAutoConfiguration) spring.freemarker.allow-request-override=false # Set whether HttpServletRequest attributes are allowed to override (hide) controller generated model attributes of the same name. spring.freemarker.allow-session-override=false # Set whether HttpSession attributes are allowed to override (hide) controller generated model attributes of the same name. spring.freemarker.cache=false # Enable template caching. spring.freemarker.charset=UTF-8 # Template encoding. spring.freemarker.check-template-location=true # Check that the templates location exists. spring.freemarker.content-type=text/html # Content-Type value. spring.freemarker.enabled=true # Enable MVC view resolution for this technology. spring.freemarker.expose-request-attributes=false # Set whether all request attributes should be added to the model prior to merging with the template. spring.freemarker.expose-session-attributes=false # Set whether all HttpSession attributes should be added to the model prior to merging with the template. spring.freemarker.expose-spring-macro-helpers=true # Set whether to expose a RequestContext for use by Springâ€™s macro library, under the name â€œspringMacroRequestContextâ€. spring.freemarker.prefer-file-system-access=true # Prefer file system access for template loading. File system access enables hot detection of template changes. spring.freemarker.prefix= # Prefix that gets prepended to view names when building a URL. spring.freemarker.request-context-attribute= # Name of the RequestContext attribute for all views. spring.freemarker.settings.*= # Well-known FreeMarker keys which will be passed to FreeMarkerâ€™s Configuration. spring.freemarker.suffix= # Suffix that gets appended to view names when building a URL. spring.freemarker.template-loader-path=classpath:/templates/ # Comma-separated list of template paths. spring.freemarker.view-names= # White list of view names that can be resolved. GROOVY TEMPLATES (GroovyTemplateAutoConfiguration) spring.groovy.template.allow-request-override=false # Set whether HttpServletRequest attributes are allowed to override (hide) controller generated model attributes of the same name. spring.groovy.template.allow-session-override=false # Set whether HttpSession attributes are allowed to override (hide) controller generated model attributes of the same name. spring.groovy.template.cache= # Enable template caching. spring.groovy.template.charset=UTF-8 # Template encoding. spring.groovy.template.check-template-location=true # Check that the templates location exists. spring.groovy.template.configuration.*= # See GroovyMarkupConfigurer spring.groovy.template.content-type=test/html # Content-Type value. spring.groovy.template.enabled=true # Enable MVC view resolution for this technology. spring.groovy.template.expose-request-attributes=false # Set whether all request attributes should be added to the model prior to merging with the template. spring.groovy.template.expose-session-attributes=false # Set whether all HttpSession attributes should be added to the model prior to merging with the template. spring.groovy.template.expose-spring-macro-helpers=true # Set whether to expose a RequestContext for use by Springâ€™s macro library, under the name â€œspringMacroRequestContextâ€. spring.groovy.template.prefix= # Prefix that gets prepended to view names when building a URL. spring.groovy.template.request-context-attribute= # Name of the RequestContext attribute for all views. spring.groovy.template.resource-loader-path=classpath:/templates/ # Template path. spring.groovy.template.suffix=.tpl # Suffix that gets appended to view names when building a URL. spring.groovy.template.view-names= # White list of view names that can be resolved. SPRING HATEOAS (HateoasProperties) spring.hateoas.use-hal-as-default-json-media-type=true # Specify if application/hal+json responses should be sent to requests that accept application/json. HTTP message conversion spring.http.converters.preferred-json-mapper=jackson # Preferred JSON mapper to use for HTTP message conversion. Set to â€œgsonâ€ to force the use of Gson when both it and Jackson are on the classpath. HTTP encoding (HttpEncodingProperties) spring.http.encoding.charset=UTF-8 # Charset of HTTP requests and responses. Added to the â€œContent-Typeâ€ header if not set explicitly. spring.http.encoding.enabled=true # Enable http encoding support. spring.http.encoding.force= # Force the encoding to the configured charset on HTTP requests and responses. spring.http.encoding.force-request= # Force the encoding to the configured charset on HTTP requests. Defaults to true when â€œforceâ€ has not been specified. spring.http.encoding.force-response= # Force the encoding to the configured charset on HTTP responses. spring.http.encoding.mapping= # Locale to Encoding mapping. MULTIPART (MultipartProperties) spring.servlet.multipart.enabled=true # Enable support of multipart uploads. spring.servlet.multipart.file-size-threshold=0 # Threshold after which files will be written to disk. Values can use the suffixes â€œMBâ€ or â€œKBâ€ to indicate megabytes or kilobytes respectively. spring.servlet.multipart.location= # Intermediate location of uploaded files. spring.servlet.multipart.max-file-size=1MB # Max file size. Values can use the suffixes â€œMBâ€ or â€œKBâ€ to indicate megabytes or kilobytes respectively. spring.servlet.multipart.max-request-size=10MB # Max request size. Values can use the suffixes â€œMBâ€ or â€œKBâ€ to indicate megabytes or kilobytes respectively. spring.servlet.multipart.resolve-lazily=false # Whether to resolve the multipart request lazily at the time of file or parameter access. JACKSON (JacksonProperties) spring.jackson.date-format= # Date format string or a fully-qualified date format class name. For instance yyyy-MM-dd HH:mm:ss. spring.jackson.default-property-inclusion= # Controls the inclusion of properties during serialization. spring.jackson.deserialization.= # Jackson on/off features that affect the way Java objects are deserialized. spring.jackson.generator.= # Jackson on/off features for generators. spring.jackson.joda-date-time-format= # Joda date time format string. If not configured, â€œdate-formatâ€ will be used as a fallback if it is configured with a format string. spring.jackson.locale= # Locale used for formatting. spring.jackson.mapper.= # Jackson general purpose on/off features. spring.jackson.parser.= # Jackson on/off features for parsers. spring.jackson.property-naming-strategy= # One of the constants on Jacksonâ€™s PropertyNamingStrategy. Can also be a fully-qualified class name of a PropertyNamingStrategy subclass. spring.jackson.serialization.*= # Jackson on/off features that affect the way Java objects are serialized. spring.jackson.time-zone= # Time zone used when formatting dates. For instance America/Los_Angeles JERSEY (JerseyProperties) spring.jersey.application-path= # Path that serves as the base URI for the application. Overrides the value of â€œ@ApplicationPathâ€ if specified. spring.jersey.filter.order=0 # Jersey filter chain order. spring.jersey.init.*= # Init parameters to pass to Jersey via the servlet or filter. spring.jersey.servlet.load-on-startup=-1 # Load on startup priority of the Jersey servlet. spring.jersey.type=servlet # Jersey integration type. SPRING LDAP (LdapProperties) spring.ldap.urls= # LDAP URLs of the server. spring.ldap.base= # Base suffix from which all operations should originate. spring.ldap.username= # Login user of the server. spring.ldap.password= # Login password of the server. spring.ldap.base-environment.*= # LDAP specification settings. EMBEDDED LDAP (EmbeddedLdapProperties) spring.ldap.embedded.base-dn= # The base DN spring.ldap.embedded.credential.username= # Embedded LDAP username. spring.ldap.embedded.credential.password= # Embedded LDAP password. spring.ldap.embedded.ldif=classpath:schema.ldif # Schema (LDIF) script resource reference. spring.ldap.embedded.port= # Embedded LDAP port. spring.ldap.embedded.validation.enabled=true # Enable LDAP schema validation. spring.ldap.embedded.validation.schema= # Path to the custom schema. SPRING MOBILE DEVICE VIEWS (DeviceDelegatingViewResolverAutoConfiguration) spring.mobile.devicedelegatingviewresolver.enable-fallback=false # Enable support for fallback resolution. spring.mobile.devicedelegatingviewresolver.enabled=false # Enable device view resolver. spring.mobile.devicedelegatingviewresolver.mobile-prefix=mobile/ # Prefix that gets prepended to view names for mobile devices. spring.mobile.devicedelegatingviewresolver.mobile-suffix= # Suffix that gets appended to view names for mobile devices. spring.mobile.devicedelegatingviewresolver.normal-prefix= # Prefix that gets prepended to view names for normal devices. spring.mobile.devicedelegatingviewresolver.normal-suffix= # Suffix that gets appended to view names for normal devices. spring.mobile.devicedelegatingviewresolver.tablet-prefix=tablet/ # Prefix that gets prepended to view names for tablet devices. spring.mobile.devicedelegatingviewresolver.tablet-suffix= # Suffix that gets appended to view names for tablet devices. SPRING MOBILE SITE PREFERENCE (SitePreferenceAutoConfiguration) spring.mobile.sitepreference.enabled=true # Enable SitePreferenceHandler. MUSTACHE TEMPLATES (MustacheAutoConfiguration) spring.mustache.allow-request-override= # Set whether HttpServletRequest attributes are allowed to override (hide) controller generated model attributes of the same name. spring.mustache.allow-session-override= # Set whether HttpSession attributes are allowed to override (hide) controller generated model attributes of the same name. spring.mustache.cache= # Enable template caching. spring.mustache.charset= # Template encoding. spring.mustache.check-template-location= # Check that the templates location exists. spring.mustache.content-type= # Content-Type value. spring.mustache.enabled= # Enable MVC view resolution for this technology. spring.mustache.expose-request-attributes= # Set whether all request attributes should be added to the model prior to merging with the template. spring.mustache.expose-session-attributes= # Set whether all HttpSession attributes should be added to the model prior to merging with the template. spring.mustache.expose-spring-macro-helpers= # Set whether to expose a RequestContext for use by Springâ€™s macro library, under the name â€œspringMacroRequestContextâ€. spring.mustache.prefix=classpath:/templates/ # Prefix to apply to template names. spring.mustache.request-context-attribute= # Name of the RequestContext attribute for all views. spring.mustache.suffix=.mustache # Suffix to apply to template names. spring.mustache.view-names= # White list of view names that can be resolved. SPRING MVC (WebMvcProperties) spring.mvc.async.request-timeout= # Amount of time (in milliseconds) before asynchronous request handling times out. spring.mvc.date-format= # Date format to use. For instance dd/MM/yyyy. spring.mvc.dispatch-trace-request=false # Dispatch TRACE requests to the FrameworkServlet doService method. spring.mvc.dispatch-options-request=true # Dispatch OPTIONS requests to the FrameworkServlet doService method. spring.mvc.favicon.enabled=true # Enable resolution of favicon.ico. spring.mvc.formcontent.putfilter.enabled=true # Enable Springâ€™s HttpPutFormContentFilter. spring.mvc.ignore-default-model-on-redirect=true # If the content of the â€œdefaultâ€ model should be ignored during redirect scenarios. spring.mvc.locale= # Locale to use. By default, this locale is overridden by the â€œAccept-Languageâ€ header. spring.mvc.locale-resolver=accept-header # Define how the locale should be resolved. spring.mvc.log-resolved-exception=false # Enable warn logging of exceptions resolved by a â€œHandlerExceptionResolverâ€. spring.mvc.media-types.*= # Maps file extensions to media types for content negotiation. spring.mvc.message-codes-resolver-format= # Formatting strategy for message codes. For instance PREFIX_ERROR_CODE. spring.mvc.servlet.load-on-startup=-1 # Load on startup priority of the Spring Web Services servlet. spring.mvc.static-path-pattern=/** # Path pattern used for static resources. spring.mvc.throw-exception-if-no-handler-found=false # If a â€œNoHandlerFoundExceptionâ€ should be thrown if no Handler was found to process a request. spring.mvc.view.prefix= # Spring MVC view prefix. spring.mvc.view.suffix= # Spring MVC view suffix. SPRING RESOURCES HANDLING (ResourceProperties) spring.resources.add-mappings=true # Enable default resource handling. spring.resources.cache-period= # Cache period for the resources served by the resource handler, in seconds. spring.resources.chain.cache=true # Enable caching in the Resource chain. spring.resources.chain.enabled= # Enable the Spring Resource Handling chain. Disabled by default unless at least one strategy has been enabled. spring.resources.chain.gzipped=false # Enable resolution of already gzipped resources. spring.resources.chain.html-application-cache=false # Enable HTML5 application cache manifest rewriting. spring.resources.chain.strategy.content.enabled=false # Enable the content Version Strategy. spring.resources.chain.strategy.content.paths=/** # Comma-separated list of patterns to apply to the Version Strategy. spring.resources.chain.strategy.fixed.enabled=false # Enable the fixed Version Strategy. spring.resources.chain.strategy.fixed.paths=/** # Comma-separated list of patterns to apply to the Version Strategy. spring.resources.chain.strategy.fixed.version= # Version string to use for the Version Strategy. spring.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/ # Locations of static resources. SPRING SESSION (SessionProperties) spring.session.hazelcast.flush-mode=on-save # Sessions flush mode. spring.session.hazelcast.map-name=spring:session:sessions # Name of the map used to store sessions. spring.session.jdbc.initializer.enabled= # Create the required session tables on startup if necessary. Enabled automatically if the default table name is set or a custom schema is configured. spring.session.jdbc.schema=classpath:org/springframework/session/jdbc/schema-@@platform@@.sql # Path to the SQL file to use to initialize the database schema. spring.session.jdbc.table-name=SPRING_SESSION # Name of database table used to store sessions. spring.session.redis.flush-mode=on-save # Sessions flush mode. spring.session.redis.namespace= # Namespace for keys used to store sessions. spring.session.store-type= # Session store type. SPRING SOCIAL (SocialWebAutoConfiguration) spring.social.auto-connection-views=false # Enable the connection status view for supported providers. SPRING SOCIAL FACEBOOK (FacebookAutoConfiguration) spring.social.facebook.app-id= # your applicationâ€™s Facebook App ID spring.social.facebook.app-secret= # your applicationâ€™s Facebook App Secret SPRING SOCIAL LINKEDIN (LinkedInAutoConfiguration) spring.social.linkedin.app-id= # your applicationâ€™s LinkedIn App ID spring.social.linkedin.app-secret= # your applicationâ€™s LinkedIn App Secret SPRING SOCIAL TWITTER (TwitterAutoConfiguration) spring.social.twitter.app-id= # your applicationâ€™s Twitter App ID spring.social.twitter.app-secret= # your applicationâ€™s Twitter App Secret THYMELEAF (ThymeleafAutoConfiguration) spring.thymeleaf.cache=true # Enable template caching. spring.thymeleaf.check-template=true # Check that the template exists before rendering it. spring.thymeleaf.check-template-location=true # Check that the templates location exists. spring.thymeleaf.enabled=true # Enable Thymeleaf view resolution for Web frameworks. spring.thymeleaf.encoding=UTF-8 # Template files encoding. spring.thymeleaf.excluded-view-names= # Comma-separated list of view names that should be excluded from resolution. spring.thymeleaf.mode=HTML5 # Template mode to be applied to templates. See also StandardTemplateModeHandlers. spring.thymeleaf.prefix=classpath:/templates/ # Prefix that gets prepended to view names when building a URL. spring.thymeleaf.reactive.max-chunk-size= # Maximum size of data buffers used for writing to the response, in bytes. spring.thymeleaf.reactive.media-types= # Media types supported by the view technology. spring.thymeleaf.servlet.content-type=text/html # Content-Type value written to HTTP responses. spring.thymeleaf.suffix=.html # Suffix that gets appended to view names when building a URL. spring.thymeleaf.template-resolver-order= # Order of the template resolver in the chain. spring.thymeleaf.view-names= # Comma-separated list of view names that can be resolved. SPRING WEB FLUX (WebFluxProperties) spring.webflux.static-path-pattern=/** # Path pattern used for static resources. SPRING WEB SERVICES (WebServicesProperties) spring.webservices.path=/services # Path that serves as the base URI for the services. spring.webservices.servlet.init= # Servlet init parameters to pass to Spring Web Services. spring.webservices.servlet.load-on-startup=-1 # Load on startup priority of the Spring Web Services servlet. SECURITY (SecurityProperties) security.basic.authorize-mode=role # Security authorize mode to apply. security.basic.enabled=true # Enable basic authentication. security.basic.path=/** # Comma-separated list of paths to secure. security.basic.realm=Spring # HTTP basic realm name. security.enable-csrf=false # Enable Cross Site Request Forgery support. security.filter-order=0 # Security filter chain order. security.filter-dispatcher-types=ASYNC, FORWARD, INCLUDE, REQUEST # Security filter chain dispatcher types. security.headers.cache=true # Enable cache control HTTP headers. security.headers.content-security-policy= # Value for content security policy header. security.headers.content-security-policy-mode=default # Content security policy mode. security.headers.content-type=true # Enable â€œX-Content-Type-Optionsâ€ header. security.headers.frame=true # Enable â€œX-Frame-Optionsâ€ header. security.headers.hsts=all # HTTP Strict Transport Security (HSTS) mode (none, domain, all). security.headers.xss=true # Enable cross site scripting (XSS) protection. security.ignored= # Comma-separated list of paths to exclude from the default secured paths. security.require-ssl=false # Enable secure channel for all requests. security.sessions=stateless # Session creation policy (always, never, if_required, stateless). security.user.name=user # Default user name. security.user.password= # Password for the default user name. A random password is logged on startup by default. security.user.role=USER # Granted roles for the default user name. SECURITY OAUTH2 CLIENT (OAuth2ClientProperties) security.oauth2.client.client-id= # OAuth2 client id. security.oauth2.client.client-secret= # OAuth2 client secret. A random secret is generated by default SECURITY OAUTH2 RESOURCES (ResourceServerProperties) security.oauth2.resource.filter-order= # The order of the filter chain used to authenticate tokens. security.oauth2.resource.id= # Identifier of the resource. security.oauth2.resource.jwt.key-uri= # The URI of the JWT token. Can be set if the value is not available and the key is public. security.oauth2.resource.jwt.key-value= # The verification key of the JWT token. Can either be a symmetric secret or PEM-encoded RSA public key. security.oauth2.resource.prefer-token-info=true # Use the token info, can be set to false to use the user info. security.oauth2.resource.service-id=resource # security.oauth2.resource.token-info-uri= # URI of the token decoding endpoint. security.oauth2.resource.token-type= # The token type to send when using the userInfoUri. security.oauth2.resource.user-info-uri= # URI of the user endpoint. SECURITY OAUTH2 SSO (OAuth2SsoProperties) security.oauth2.sso.filter-order= # Filter order to apply if not providing an explicit WebSecurityConfigurerAdapter security.oauth2.sso.login-path=/login # Path to the login page, i.e. the one that triggers the redirect to the OAuth2 Authorization Server FLYWAY (FlywayProperties) flyway.allow-mixed-migrations= # flyway.baseline-description= # flyway.baseline-on-migrate= # flyway.baseline-version=1 # version to start migration flyway.check-location=false # Check that migration scripts location exists. flyway.clean-disabled= # flyway.clean-on-validation-error= # flyway.enabled=true # Enable flyway. flyway.encoding= # flyway.ignore-failed-future-migration= # flyway.ignore-future-migrations= # flyway.ignore-missing-migrations= # flyway.init-sqls= # SQL statements to execute to initialize a connection immediately after obtaining it. flyway.installed-by= # flyway.locations=classpath:db/migration # locations of migrations scripts flyway.out-of-order= # flyway.password= # JDBC password if you want Flyway to create its own DataSource flyway.placeholder-prefix= # flyway.placeholder-replacement= # flyway.placeholder-suffix= # flyway.placeholders.*= # flyway.repeatable-sql-migration-prefix= # flyway.schemas= # schemas to update flyway.skip-default-callbacks= # flyway.skip-default-resolvers= # flyway.sql-migration-prefix=V # flyway.sql-migration-separator= # flyway.sql-migration-suffix=.sql # flyway.table= # flyway.target= # flyway.url= # JDBC url of the database to migrate. If not set, the primary configured data source is used. flyway.user= # Login user of the database to migrate. flyway.validate-on-migrate= # LIQUIBASE (LiquibaseProperties) liquibase.change-log=classpath:/db/changelog/db.changelog-master.yaml # Change log configuration path. liquibase.check-change-log-location=true # Check the change log location exists. liquibase.contexts= # Comma-separated list of runtime contexts to use. liquibase.default-schema= # Default database schema. liquibase.drop-first=false # Drop the database schema first. liquibase.enabled=true # Enable liquibase support. liquibase.labels= # Comma-separated list of runtime labels to use. liquibase.parameters.*= # Change log parameters. liquibase.password= # Login password of the database to migrate. liquibase.rollback-file= # File to which rollback SQL will be written when an update is performed. liquibase.url= # JDBC url of the database to migrate. If not set, the primary configured data source is used. liquibase.user= # Login user of the database to migrate. COUCHBASE (CouchbaseProperties) spring.couchbase.bootstrap-hosts= # Couchbase nodes (host or IP address) to bootstrap from. spring.couchbase.bucket.name=default # Name of the bucket to connect to. spring.couchbase.bucket.password= # Password of the bucket. spring.couchbase.env.endpoints.key-value=1 # Number of sockets per node against the Key/value service. spring.couchbase.env.endpoints.query=1 # Number of sockets per node against the Query (N1QL) service. spring.couchbase.env.endpoints.view=1 # Number of sockets per node against the view service. spring.couchbase.env.ssl.enabled= # Enable SSL support. Enabled automatically if a â€œkeyStoreâ€ is provided unless specified otherwise. spring.couchbase.env.ssl.key-store= # Path to the JVM key store that holds the certificates. spring.couchbase.env.ssl.key-store-password= # Password used to access the key store. spring.couchbase.env.timeouts.connect=5000 # Bucket connections timeout in milliseconds. spring.couchbase.env.timeouts.key-value=2500 # Blocking operations performed on a specific key timeout in milliseconds. spring.couchbase.env.timeouts.query=7500 # N1QL query operations timeout in milliseconds. spring.couchbase.env.timeouts.socket-connect=1000 # Socket connect connections timeout in milliseconds. spring.couchbase.env.timeouts.view=7500 # Regular and geospatial view operations timeout in milliseconds. DAO (PersistenceExceptionTranslationAutoConfiguration) spring.dao.exceptiontranslation.enabled=true # Enable the PersistenceExceptionTranslationPostProcessor. CASSANDRA (CassandraProperties) spring.data.cassandra.cluster-name= # Name of the Cassandra cluster. spring.data.cassandra.compression=none # Compression supported by the Cassandra binary protocol. spring.data.cassandra.connect-timeout-millis= # Socket option: connection time out. spring.data.cassandra.consistency-level= # Queries consistency level. spring.data.cassandra.contact-points=localhost # Comma-separated list of cluster node addresses. spring.data.cassandra.fetch-size= # Queries default fetch size. spring.data.cassandra.keyspace-name= # Keyspace name to use. spring.data.cassandra.load-balancing-policy= # Class name of the load balancing policy. spring.data.cassandra.port= # Port of the Cassandra server. spring.data.cassandra.password= # Login password of the server. spring.data.cassandra.reactive-repositories.enabled=true # Enable Cassandra reactive repositories. spring.data.cassandra.read-timeout-millis= # Socket option: read time out. spring.data.cassandra.reconnection-policy= # Reconnection policy class. spring.data.cassandra.repositories.enabled= # Enable Cassandra repositories. spring.data.cassandra.retry-policy= # Class name of the retry policy. spring.data.cassandra.serial-consistency-level= # Queries serial consistency level. spring.data.cassandra.schema-action=none # Schema action to take at startup. spring.data.cassandra.ssl=false # Enable SSL support. spring.data.cassandra.username= # Login user of the server. DATA COUCHBASE (CouchbaseDataProperties) spring.data.couchbase.auto-index=false # Automatically create views and indexes. spring.data.couchbase.consistency=read-your-own-writes # Consistency to apply by default on generated queries. spring.data.couchbase.repositories.enabled=true # Enable Couchbase repositories. ELASTICSEARCH (ElasticsearchProperties) spring.data.elasticsearch.cluster-name=elasticsearch # Elasticsearch cluster name. spring.data.elasticsearch.cluster-nodes= # Comma-separated list of cluster node addresses. If not specified, starts a client node. spring.data.elasticsearch.properties.*= # Additional properties used to configure the client. spring.data.elasticsearch.repositories.enabled=true # Enable Elasticsearch repositories. DATA LDAP spring.data.ldap.repositories.enabled=true # Enable LDAP repositories. MONGODB (MongoProperties) spring.data.mongodb.authentication-database= # Authentication database name. spring.data.mongodb.database=test # Database name. spring.data.mongodb.field-naming-strategy= # Fully qualified name of the FieldNamingStrategy to use. spring.data.mongodb.grid-fs-database= # GridFS database name. spring.data.mongodb.host=localhost # Mongo server host. Cannot be set with uri. spring.data.mongodb.password= # Login password of the mongo server. Cannot be set with uri. spring.data.mongodb.port=27017 # Mongo server port. Cannot be set with uri. spring.data.mongodb.reactive-repositories.enabled=true # Enable Mongo reactive repositories. spring.data.mongodb.repositories.enabled=true # Enable Mongo repositories. spring.data.mongodb.uri=mongodb://localhost/test # Mongo database URI. Cannot be set with host, port and credentials. spring.data.mongodb.username= # Login user of the mongo server. Cannot be set with uri. DATA REDIS spring.data.redis.repositories.enabled=true # Enable Redis repositories. NEO4J (Neo4jProperties) spring.data.neo4j.auto-index=none # Auto index mode. spring.data.neo4j.embedded.enabled=true # Enable embedded mode if the embedded driver is available. spring.data.neo4j.open-in-view=false # Register OpenSessionInViewInterceptor. Binds a Neo4j Session to the thread for the entire processing of the request. spring.data.neo4j.password= # Login password of the server. spring.data.neo4j.repositories.enabled=true # Enable Neo4j repositories. spring.data.neo4j.uri= # URI used by the driver. Auto-detected by default. spring.data.neo4j.username= # Login user of the server. DATA REST (RepositoryRestProperties) spring.data.rest.base-path= # Base path to be used by Spring Data REST to expose repository resources. spring.data.rest.default-page-size= # Default size of pages. spring.data.rest.detection-strategy=default # Strategy to use to determine which repositories get exposed. spring.data.rest.enable-enum-translation= # Enable enum value translation via the Spring Data REST default resource bundle. spring.data.rest.limit-param-name= # Name of the URL query string parameter that indicates how many results to return at once. spring.data.rest.max-page-size= # Maximum size of pages. spring.data.rest.page-param-name= # Name of the URL query string parameter that indicates what page to return. spring.data.rest.return-body-on-create= # Return a response body after creating an entity. spring.data.rest.return-body-on-update= # Return a response body after updating an entity. spring.data.rest.sort-param-name= # Name of the URL query string parameter that indicates what direction to sort results. SOLR (SolrProperties) spring.data.solr.host=http://127.0.0.1:8983/solr # Solr host. Ignored if â€œzk-hostâ€ is set. spring.data.solr.repositories.enabled=true # Enable Solr repositories. spring.data.solr.zk-host= # ZooKeeper host address in the form HOST:PORT. DATASOURCE (DataSourceAutoConfiguration &amp; DataSourceProperties) spring.datasource.continue-on-error=false # Do not stop if an error occurs while initializing the database. spring.datasource.data= # Data (DML) script resource references. spring.datasource.data-username= # User of the database to execute DML scripts (if different). spring.datasource.data-password= # Password of the database to execute DML scripts (if different). spring.datasource.dbcp2.= # Commons DBCP2 specific settings spring.datasource.driver-class-name= # Fully qualified name of the JDBC driver. Auto-detected based on the URL by default. spring.datasource.generate-unique-name=false # Generate a random datasource name. spring.datasource.hikari.= # Hikari specific settings spring.datasource.initialize=true # Populate the database using â€˜data.sqlâ€™. spring.datasource.jmx-enabled=false # Enable JMX support (if provided by the underlying pool). spring.datasource.jndi-name= # JNDI location of the datasource. Class, url, username &amp; password are ignored when set. spring.datasource.name=testdb # Name of the datasource. spring.datasource.password= # Login password of the database. spring.datasource.platform=all # Platform to use in the schema resource (schema-${platform}.sql). spring.datasource.schema= # Schema (DDL) script resource references. spring.datasource.schema-username= # User of the database to execute DDL scripts (if different). spring.datasource.schema-password= # Password of the database to execute DDL scripts (if different). spring.datasource.separator=; # Statement separator in SQL initialization scripts. spring.datasource.sql-script-encoding= # SQL scripts encoding. spring.datasource.tomcat.*= # Tomcat datasource specific settings spring.datasource.type= # Fully qualified name of the connection pool implementation to use. By default, it is auto-detected from the classpath. spring.datasource.url= # JDBC url of the database. spring.datasource.username= # Login user of the database. spring.datasource.xa.data-source-class-name= # XA datasource fully qualified name. spring.datasource.xa.properties= # Properties to pass to the XA data source. JEST (Elasticsearch HTTP client) (JestProperties) spring.elasticsearch.jest.connection-timeout=3000 # Connection timeout in milliseconds. spring.elasticsearch.jest.multi-threaded=true # Enable connection requests from multiple execution threads. spring.elasticsearch.jest.password= # Login password. spring.elasticsearch.jest.proxy.host= # Proxy host the HTTP client should use. spring.elasticsearch.jest.proxy.port= # Proxy port the HTTP client should use. spring.elasticsearch.jest.read-timeout=3000 # Read timeout in milliseconds. spring.elasticsearch.jest.uris=http://localhost:9200 # Comma-separated list of the Elasticsearch instances to use. spring.elasticsearch.jest.username= # Login user. H2 Web Console (H2ConsoleProperties) spring.h2.console.enabled=false # Enable the console. spring.h2.console.path=/h2-console # Path at which the console will be available. spring.h2.console.settings.trace=false # Enable trace output. spring.h2.console.settings.web-allow-others=false # Enable remote access. JOOQ (JooqAutoConfiguration) spring.jooq.sql-dialect= # SQLDialect JOOQ used when communicating with the configured datasource. For instance POSTGRES JPA (JpaBaseConfiguration, HibernateJpaAutoConfiguration) spring.data.jpa.repositories.enabled=true # Enable JPA repositories. spring.jpa.database= # Target database to operate on, auto-detected by default. Can be alternatively set using the â€œdatabasePlatformâ€ property. spring.jpa.database-platform= # Name of the target database to operate on, auto-detected by default. Can be alternatively set using the â€œDatabaseâ€ enum. spring.jpa.generate-ddl=false # Initialize the schema on startup. spring.jpa.hibernate.ddl-auto= # DDL mode. This is actually a shortcut for the â€œhibernate.hbm2ddl.autoâ€ property. Default to â€œcreate-dropâ€ when using an embedded database, â€œnoneâ€ otherwise. spring.jpa.hibernate.naming.implicit-strategy= # Hibernate 5 implicit naming strategy fully qualified name. spring.jpa.hibernate.naming.physical-strategy= # Hibernate 5 physical naming strategy fully qualified name. spring.jpa.hibernate.use-new-id-generator-mappings= # Use Hibernateâ€™s newer IdentifierGenerator for AUTO, TABLE and SEQUENCE. spring.jpa.open-in-view=true # Register OpenEntityManagerInViewInterceptor. Binds a JPA EntityManager to the thread for the entire processing of the request. spring.jpa.properties.*= # Additional native properties to set on the JPA provider. spring.jpa.show-sql=false # Enable logging of SQL statements. JTA (JtaAutoConfiguration) spring.jta.enabled=true # Enable JTA support. spring.jta.log-dir= # Transaction logs directory. spring.jta.transaction-manager-id= # Transaction manager unique identifier. ATOMIKOS (AtomikosProperties) spring.jta.atomikos.connectionfactory.borrow-connection-timeout=30 # Timeout, in seconds, for borrowing connections from the pool. spring.jta.atomikos.connectionfactory.ignore-session-transacted-flag=true # Whether or not to ignore the transacted flag when creating session. spring.jta.atomikos.connectionfactory.local-transaction-mode=false # Whether or not local transactions are desired. spring.jta.atomikos.connectionfactory.maintenance-interval=60 # The time, in seconds, between runs of the poolâ€™s maintenance thread. spring.jta.atomikos.connectionfactory.max-idle-time=60 # The time, in seconds, after which connections are cleaned up from the pool. spring.jta.atomikos.connectionfactory.max-lifetime=0 # The time, in seconds, that a connection can be pooled for before being destroyed. 0 denotes no limit. spring.jta.atomikos.connectionfactory.max-pool-size=1 # The maximum size of the pool. spring.jta.atomikos.connectionfactory.min-pool-size=1 # The minimum size of the pool. spring.jta.atomikos.connectionfactory.reap-timeout=0 # The reap timeout, in seconds, for borrowed connections. 0 denotes no limit. spring.jta.atomikos.connectionfactory.unique-resource-name=jmsConnectionFactory # The unique name used to identify the resource during recovery. spring.jta.atomikos.datasource.borrow-connection-timeout=30 # Timeout, in seconds, for borrowing connections from the pool. spring.jta.atomikos.datasource.default-isolation-level= # Default isolation level of connections provided by the pool. spring.jta.atomikos.datasource.login-timeout= # Timeout, in seconds, for establishing a database connection. spring.jta.atomikos.datasource.maintenance-interval=60 # The time, in seconds, between runs of the poolâ€™s maintenance thread. spring.jta.atomikos.datasource.max-idle-time=60 # The time, in seconds, after which connections are cleaned up from the pool. spring.jta.atomikos.datasource.max-lifetime=0 # The time, in seconds, that a connection can be pooled for before being destroyed. 0 denotes no limit. spring.jta.atomikos.datasource.max-pool-size=1 # The maximum size of the pool. spring.jta.atomikos.datasource.min-pool-size=1 # The minimum size of the pool. spring.jta.atomikos.datasource.reap-timeout=0 # The reap timeout, in seconds, for borrowed connections. 0 denotes no limit. spring.jta.atomikos.datasource.test-query= # SQL query or statement used to validate a connection before returning it. spring.jta.atomikos.datasource.unique-resource-name=dataSource # The unique name used to identify the resource during recovery. spring.jta.atomikos.properties.checkpoint-interval=500 # Interval between checkpoints. spring.jta.atomikos.properties.console-file-count=1 # Number of debug logs files that can be created. spring.jta.atomikos.properties.console-file-limit=-1 # How many bytes can be stored at most in debug logs files. spring.jta.atomikos.properties.console-file-name=tm.out # Debug logs file name. spring.jta.atomikos.properties.console-log-level=warn # Console log level. spring.jta.atomikos.properties.default-jta-timeout=10000 # Default timeout for JTA transactions. spring.jta.atomikos.properties.enable-logging=true # Enable disk logging. spring.jta.atomikos.properties.force-shutdown-on-vm-exit=false # Specify if a VM shutdown should trigger forced shutdown of the transaction core. spring.jta.atomikos.properties.log-base-dir= # Directory in which the log files should be stored. spring.jta.atomikos.properties.log-base-name=tmlog # Transactions log file base name. spring.jta.atomikos.properties.max-actives=50 # Maximum number of active transactions. spring.jta.atomikos.properties.max-timeout=300000 # Maximum timeout (in milliseconds) that can be allowed for transactions. spring.jta.atomikos.properties.output-dir= # Directory in which to store the debug log files. spring.jta.atomikos.properties.serial-jta-transactions=true # Specify if sub-transactions should be joined when possible. spring.jta.atomikos.properties.service= # Transaction manager implementation that should be started. spring.jta.atomikos.properties.threaded-two-phase-commit=false # Use different (and concurrent) threads for two-phase commit on the participating resources. spring.jta.atomikos.properties.transaction-manager-unique-name= # Transaction managerâ€™s unique name. BITRONIX spring.jta.bitronix.connectionfactory.acquire-increment=1 # Number of connections to create when growing the pool. spring.jta.bitronix.connectionfactory.acquisition-interval=1 # Time, in seconds, to wait before trying to acquire a connection again after an invalid connection was acquired. spring.jta.bitronix.connectionfactory.acquisition-timeout=30 # Timeout, in seconds, for acquiring connections from the pool. spring.jta.bitronix.connectionfactory.allow-local-transactions=true # Whether or not the transaction manager should allow mixing XA and non-XA transactions. spring.jta.bitronix.connectionfactory.apply-transaction-timeout=false # Whether or not the transaction timeout should be set on the XAResource when it is enlisted. spring.jta.bitronix.connectionfactory.automatic-enlisting-enabled=true # Whether or not resources should be enlisted and delisted automatically. spring.jta.bitronix.connectionfactory.cache-producers-consumers=true # Whether or not produces and consumers should be cached. spring.jta.bitronix.connectionfactory.defer-connection-release=true # Whether or not the provider can run many transactions on the same connection and supports transaction interleaving. spring.jta.bitronix.connectionfactory.ignore-recovery-failures=false # Whether or not recovery failures should be ignored. spring.jta.bitronix.connectionfactory.max-idle-time=60 # The time, in seconds, after which connections are cleaned up from the pool. spring.jta.bitronix.connectionfactory.max-pool-size=10 # The maximum size of the pool. 0 denotes no limit. spring.jta.bitronix.connectionfactory.min-pool-size=0 # The minimum size of the pool. spring.jta.bitronix.connectionfactory.password= # The password to use to connect to the JMS provider. spring.jta.bitronix.connectionfactory.share-transaction-connections=false # Whether or not connections in the ACCESSIBLE state can be shared within the context of a transaction. spring.jta.bitronix.connectionfactory.test-connections=true # Whether or not connections should be tested when acquired from the pool. spring.jta.bitronix.connectionfactory.two-pc-ordering-position=1 # The position that this resource should take during two-phase commit (always first is Integer.MIN_VALUE, always last is Integer.MAX_VALUE). spring.jta.bitronix.connectionfactory.unique-name=jmsConnectionFactory # The unique name used to identify the resource during recovery. spring.jta.bitronix.connectionfactory.use-tm-join=true Whether or not TMJOIN should be used when starting XAResources. spring.jta.bitronix.connectionfactory.user= # The user to use to connect to the JMS provider. spring.jta.bitronix.datasource.acquire-increment=1 # Number of connections to create when growing the pool. spring.jta.bitronix.datasource.acquisition-interval=1 # Time, in seconds, to wait before trying to acquire a connection again after an invalid connection was acquired. spring.jta.bitronix.datasource.acquisition-timeout=30 # Timeout, in seconds, for acquiring connections from the pool. spring.jta.bitronix.datasource.allow-local-transactions=true # Whether or not the transaction manager should allow mixing XA and non-XA transactions. spring.jta.bitronix.datasource.apply-transaction-timeout=false # Whether or not the transaction timeout should be set on the XAResource when it is enlisted. spring.jta.bitronix.datasource.automatic-enlisting-enabled=true # Whether or not resources should be enlisted and delisted automatically. spring.jta.bitronix.datasource.cursor-holdability= # The default cursor holdability for connections. spring.jta.bitronix.datasource.defer-connection-release=true # Whether or not the database can run many transactions on the same connection and supports transaction interleaving. spring.jta.bitronix.datasource.enable-jdbc4-connection-test= # Whether or not Connection.isValid() is called when acquiring a connection from the pool. spring.jta.bitronix.datasource.ignore-recovery-failures=false # Whether or not recovery failures should be ignored. spring.jta.bitronix.datasource.isolation-level= # The default isolation level for connections. spring.jta.bitronix.datasource.local-auto-commit= # The default auto-commit mode for local transactions. spring.jta.bitronix.datasource.login-timeout= # Timeout, in seconds, for establishing a database connection. spring.jta.bitronix.datasource.max-idle-time=60 # The time, in seconds, after which connections are cleaned up from the pool. spring.jta.bitronix.datasource.max-pool-size=10 # The maximum size of the pool. 0 denotes no limit. spring.jta.bitronix.datasource.min-pool-size=0 # The minimum size of the pool. spring.jta.bitronix.datasource.prepared-statement-cache-size=0 # The target size of the prepared statement cache. 0 disables the cache. spring.jta.bitronix.datasource.share-transaction-connections=false # Whether or not connections in the ACCESSIBLE state can be shared within the context of a transaction. spring.jta.bitronix.datasource.test-query= # SQL query or statement used to validate a connection before returning it. spring.jta.bitronix.datasource.two-pc-ordering-position=1 # The position that this resource should take during two-phase commit (always first is Integer.MIN_VALUE, always last is Integer.MAX_VALUE). spring.jta.bitronix.datasource.unique-name=dataSource # The unique name used to identify the resource during recovery. spring.jta.bitronix.datasource.use-tm-join=true Whether or not TMJOIN should be used when starting XAResources. spring.jta.bitronix.properties.allow-multiple-lrc=false # Allow multiple LRC resources to be enlisted into the same transaction. spring.jta.bitronix.properties.asynchronous2-pc=false # Enable asynchronously execution of two phase commit. spring.jta.bitronix.properties.background-recovery-interval-seconds=60 # Interval in seconds at which to run the recovery process in the background. spring.jta.bitronix.properties.current-node-only-recovery=true # Recover only the current node. spring.jta.bitronix.properties.debug-zero-resource-transaction=false # Log the creation and commit call stacks of transactions executed without a single enlisted resource. spring.jta.bitronix.properties.default-transaction-timeout=60 # Default transaction timeout in seconds. spring.jta.bitronix.properties.disable-jmx=false # Enable JMX support. spring.jta.bitronix.properties.exception-analyzer= # Set the fully qualified name of the exception analyzer implementation to use. spring.jta.bitronix.properties.filter-log-status=false # Enable filtering of logs so that only mandatory logs are written. spring.jta.bitronix.properties.force-batching-enabled=true # Set if disk forces are batched. spring.jta.bitronix.properties.forced-write-enabled=true # Set if logs are forced to disk. spring.jta.bitronix.properties.graceful-shutdown-interval=60 # Maximum amount of seconds the TM will wait for transactions to get done before aborting them at shutdown time. spring.jta.bitronix.properties.jndi-transaction-synchronization-registry-name= # JNDI name of the TransactionSynchronizationRegistry. spring.jta.bitronix.properties.jndi-user-transaction-name= # JNDI name of the UserTransaction. spring.jta.bitronix.properties.journal=disk # Name of the journal. Can be â€˜diskâ€™, â€˜nullâ€™ or a class name. spring.jta.bitronix.properties.log-part1-filename=btm1.tlog # Name of the first fragment of the journal. spring.jta.bitronix.properties.log-part2-filename=btm2.tlog # Name of the second fragment of the journal. spring.jta.bitronix.properties.max-log-size-in-mb=2 # Maximum size in megabytes of the journal fragments. spring.jta.bitronix.properties.resource-configuration-filename= # ResourceLoader configuration file name. spring.jta.bitronix.properties.server-id= # ASCII ID that must uniquely identify this TM instance. Default to the machineâ€™s IP address. spring.jta.bitronix.properties.skip-corrupted-logs=false # Skip corrupted transactions log entries. spring.jta.bitronix.properties.warn-about-zero-resource-transaction=true # Log a warning for transactions executed without a single enlisted resource. NARAYANA (NarayanaProperties) spring.jta.narayana.default-timeout=60 # Transaction timeout in seconds. spring.jta.narayana.expiry-scanners=com.arjuna.ats.internal.arjuna.recovery.ExpiredTransactionStatusManagerScanner # Comma-separated list of expiry scanners. spring.jta.narayana.log-dir= # Transaction object store directory. spring.jta.narayana.one-phase-commit=true # Enable one phase commit optimisation. spring.jta.narayana.periodic-recovery-period=120 # Interval in which periodic recovery scans are performed in seconds. spring.jta.narayana.recovery-backoff-period=10 # Back off period between first and second phases of the recovery scan in seconds. spring.jta.narayana.recovery-db-pass= # Database password to be used by recovery manager. spring.jta.narayana.recovery-db-user= # Database username to be used by recovery manager. spring.jta.narayana.recovery-jms-pass= # JMS password to be used by recovery manager. spring.jta.narayana.recovery-jms-user= # JMS username to be used by recovery manager. spring.jta.narayana.recovery-modules= # Comma-separated list of recovery modules. spring.jta.narayana.transaction-manager-id=1 # Unique transaction manager id. spring.jta.narayana.xa-resource-orphan-filters= # Comma-separated list of orphan filters. EMBEDDED MONGODB (EmbeddedMongoProperties) spring.mongodb.embedded.features=SYNC_DELAY # Comma-separated list of features to enable. spring.mongodb.embedded.storage.database-dir= # Directory used for data storage. spring.mongodb.embedded.storage.oplog-size= # Maximum size of the oplog in megabytes. spring.mongodb.embedded.storage.repl-set-name= # Name of the replica set. spring.mongodb.embedded.version=2.6.10 # Version of Mongo to use. REDIS (RedisProperties) spring.redis.cluster.max-redirects= # Maximum number of redirects to follow when executing commands across the cluster. spring.redis.cluster.nodes= # Comma-separated list of â€œhost:portâ€ pairs to bootstrap from. spring.redis.database=0 # Database index used by the connection factory. spring.redis.url= # Connection URL, will override host, port and password (user will be ignored), e.g. redis://user:password@example.com:6379 spring.redis.host=localhost # Redis server host. spring.redis.jedis.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit. spring.redis.jedis.pool.max-idle=8 # Max number of â€œidleâ€ connections in the pool. Use a negative value to indicate an unlimited number of idle connections. spring.redis.jedis.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely. spring.redis.jedis.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive. spring.redis.lettuce.pool.max-active=8 # Max number of connections that can be allocated by the pool at a given time. Use a negative value for no limit. spring.redis.lettuce.pool.max-idle=8 # Max number of â€œidleâ€ connections in the pool. Use a negative value to indicate an unlimited number of idle connections. spring.redis.lettuce.pool.max-wait=-1 # Maximum amount of time (in milliseconds) a connection allocation should block before throwing an exception when the pool is exhausted. Use a negative value to block indefinitely. spring.redis.lettuce.pool.min-idle=0 # Target for the minimum number of idle connections to maintain in the pool. This setting only has an effect if it is positive. spring.redis.lettuce.shutdown-timeout=2000 # Shutdown timeout in milliseconds. spring.redis.password= # Login password of the redis server. spring.redis.port=6379 # Redis server port. spring.redis.sentinel.master= # Name of Redis server. spring.redis.sentinel.nodes= # Comma-separated list of host:port pairs. spring.redis.ssl=false # Enable SSL support. spring.redis.timeout=0 # Connection timeout in milliseconds. TRANSACTION (TransactionProperties) spring.transaction.default-timeout= # Default transaction timeout in seconds. spring.transaction.rollback-on-commit-failure= # Perform the rollback on commit failures. ACTIVEMQ (ActiveMQProperties) spring.activemq.broker-url= # URL of the ActiveMQ broker. Auto-generated by default. For instance tcp://localhost:61616 spring.activemq.in-memory=true # Specify if the default broker URL should be in memory. Ignored if an explicit broker has been specified. spring.activemq.password= # Login password of the broker. spring.activemq.user= # Login user of the broker. spring.activemq.packages.trust-all=false # Trust all packages. spring.activemq.packages.trusted= # Comma-separated list of specific packages to trust (when not trusting all packages). spring.activemq.pool.configuration.*= # See PooledConnectionFactory. spring.activemq.pool.enabled=false # Whether a PooledConnectionFactory should be created instead of a regular ConnectionFactory. spring.activemq.pool.expiry-timeout=0 # Connection expiration timeout in milliseconds. spring.activemq.pool.idle-timeout=30000 # Connection idle timeout in milliseconds. spring.activemq.pool.max-connections=1 # Maximum number of pooled connections. ARTEMIS (ArtemisProperties) spring.artemis.embedded.cluster-password= # Cluster password. Randomly generated on startup by default. spring.artemis.embedded.data-directory= # Journal file directory. Not necessary if persistence is turned off. spring.artemis.embedded.enabled=true # Enable embedded mode if the Artemis server APIs are available. spring.artemis.embedded.persistent=false # Enable persistent store. spring.artemis.embedded.queues= # Comma-separated list of queues to create on startup. spring.artemis.embedded.server-id= # Server id. By default, an auto-incremented counter is used. spring.artemis.embedded.topics= # Comma-separated list of topics to create on startup. spring.artemis.host=localhost # Artemis broker host. spring.artemis.mode= # Artemis deployment mode, auto-detected by default. spring.artemis.password= # Login password of the broker. spring.artemis.port=61616 # Artemis broker port. spring.artemis.user= # Login user of the broker. SPRING BATCH (BatchProperties) spring.batch.initializer.enabled= # Create the required batch tables on startup if necessary. Enabled automatically if no custom table prefix is set or if a custom schema is configured. spring.batch.job.enabled=true # Execute all Spring Batch jobs in the context on startup. spring.batch.job.names= # Comma-separated list of job names to execute on startup (For instance job1,job2). By default, all Jobs found in the context are executed. spring.batch.schema=classpath:org/springframework/batch/core/schema-@@platform@@.sql # Path to the SQL file to use to initialize the database schema. spring.batch.table-prefix= # Table prefix for all the batch meta-data tables. SPRING INTEGRATION (IntegrationProperties) spring.integration.jdbc.initializer.enabled=false # Create the required integration tables on startup. spring.integration.jdbc.schema=classpath:org/springframework/integration/jdbc/schema-@@platform@@.sql # Path to the SQL file to use to initialize the database schema. JMS (JmsProperties) spring.jms.jndi-name= # Connection factory JNDI name. When set, takes precedence to others connection factory auto-configurations. spring.jms.listener.acknowledge-mode= # Acknowledge mode of the container. By default, the listener is transacted with automatic acknowledgment. spring.jms.listener.auto-startup=true # Start the container automatically on startup. spring.jms.listener.concurrency= # Minimum number of concurrent consumers. spring.jms.listener.max-concurrency= # Maximum number of concurrent consumers. spring.jms.pub-sub-domain=false # Specify if the default destination type is topic. spring.jms.template.default-destination= # Default destination to use on send/receive operations that do not have a destination parameter. spring.jms.template.delivery-delay= # Delivery delay to use for send calls in milliseconds. spring.jms.template.delivery-mode= # Delivery mode. Enable QoS when set. spring.jms.template.priority= # Priority of a message when sending. Enable QoS when set. spring.jms.template.qos-enabled= # Enable explicit QoS when sending a message. spring.jms.template.receive-timeout= # Timeout to use for receive calls in milliseconds. spring.jms.template.time-to-live= # Time-to-live of a message when sending in milliseconds. Enable QoS when set. APACHE KAFKA (KafkaProperties) spring.kafka.bootstrap-servers= # Comma-delimited list of host:port pairs to use for establishing the initial connection to the Kafka cluster. spring.kafka.client-id= # Id to pass to the server when making requests; used for server-side logging. spring.kafka.consumer.auto-commit-interval= # Frequency in milliseconds that the consumer offsets are auto-committed to Kafka if â€˜enable.auto.commitâ€™ true. spring.kafka.consumer.auto-offset-reset= # What to do when there is no initial offset in Kafka or if the current offset does not exist any more on the server. spring.kafka.consumer.bootstrap-servers= # Comma-delimited list of host:port pairs to use for establishing the initial connection to the Kafka cluster. spring.kafka.consumer.client-id= # Id to pass to the server when making requests; used for server-side logging. spring.kafka.consumer.enable-auto-commit= # If true the consumerâ€™s offset will be periodically committed in the background. spring.kafka.consumer.fetch-max-wait= # Maximum amount of time in milliseconds the server will block before answering the fetch request if there isnâ€™t sufficient data to immediately satisfy the requirement given by â€œfetch.min.bytesâ€. spring.kafka.consumer.fetch-min-size= # Minimum amount of data the server should return for a fetch request in bytes. spring.kafka.consumer.group-id= # Unique string that identifies the consumer group this consumer belongs to. spring.kafka.consumer.heartbeat-interval= # Expected time in milliseconds between heartbeats to the consumer coordinator. spring.kafka.consumer.key-deserializer= # Deserializer class for keys. spring.kafka.consumer.max-poll-records= # Maximum number of records returned in a single call to poll(). spring.kafka.consumer.ssl.key-password= # Password of the private key in the key store file. spring.kafka.consumer.ssl.keystore-location= # Location of the key store file. spring.kafka.consumer.ssl.keystore-password= # Store password for the key store file. spring.kafka.consumer.ssl.truststore-location= # Location of the trust store file. spring.kafka.consumer.ssl.truststore-password= # Store password for the trust store file. spring.kafka.consumer.value-deserializer= # Deserializer class for values. spring.kafka.jaas.control-flag=required # Control flag for login configuration. spring.kafka.jaas.enabled= # Enable JAAS configuration. spring.kafka.jaas.login-module=com.sun.security.auth.module.Krb5LoginModule # Login module. spring.kafka.jaas.options= # Additional JAAS options. spring.kafka.listener.ack-count= # Number of records between offset commits when ackMode is â€œCOUNTâ€ or â€œCOUNT_TIMEâ€. spring.kafka.listener.ack-mode= # Listener AckMode; see the spring-kafka documentation. spring.kafka.listener.ack-time= # Time in milliseconds between offset commits when ackMode is â€œTIMEâ€ or â€œCOUNT_TIMEâ€. spring.kafka.listener.concurrency= # Number of threads to run in the listener containers. spring.kafka.listener.poll-timeout= # Timeout in milliseconds to use when polling the consumer. spring.kafka.producer.acks= # Number of acknowledgments the producer requires the leader to have received before considering a request complete. spring.kafka.producer.batch-size= # Number of records to batch before sending. spring.kafka.producer.bootstrap-servers= # Comma-delimited list of host:port pairs to use for establishing the initial connection to the Kafka cluster. spring.kafka.producer.buffer-memory= # Total bytes of memory the producer can use to buffer records waiting to be sent to the server. spring.kafka.producer.client-id= # Id to pass to the server when making requests; used for server-side logging. spring.kafka.producer.compression-type= # Compression type for all data generated by the producer. spring.kafka.producer.key-serializer= # Serializer class for keys. spring.kafka.producer.retries= # When greater than zero, enables retrying of failed sends. spring.kafka.producer.ssl.key-password= # Password of the private key in the key store file. spring.kafka.producer.ssl.keystore-location= # Location of the key store file. spring.kafka.producer.ssl.keystore-password= # Store password for the key store file. spring.kafka.producer.ssl.truststore-location= # Location of the trust store file. spring.kafka.producer.ssl.truststore-password= # Store password for the trust store file. spring.kafka.producer.value-serializer= # Serializer class for values. spring.kafka.properties.*= # Additional properties used to configure the client. spring.kafka.ssl.key-password= # Password of the private key in the key store file. spring.kafka.ssl.keystore-location= # Location of the key store file. spring.kafka.ssl.keystore-password= # Store password for the key store file. spring.kafka.ssl.truststore-location= # Location of the trust store file. spring.kafka.ssl.truststore-password= # Store password for the trust store file. spring.kafka.template.default-topic= # Default topic to which messages will be sent. RABBIT (RabbitProperties) spring.rabbitmq.addresses= # Comma-separated list of addresses to which the client should connect. spring.rabbitmq.cache.channel.checkout-timeout= # Number of milliseconds to wait to obtain a channel if the cache size has been reached. spring.rabbitmq.cache.channel.size= # Number of channels to retain in the cache. spring.rabbitmq.cache.connection.mode=channel # Connection factory cache mode. spring.rabbitmq.cache.connection.size= # Number of connections to cache. spring.rabbitmq.connection-timeout= # Connection timeout, in milliseconds; zero for infinite. spring.rabbitmq.dynamic=true # Create an AmqpAdmin bean. spring.rabbitmq.host=localhost # RabbitMQ host. spring.rabbitmq.listener.direct.acknowledge-mode= # Acknowledge mode of container. spring.rabbitmq.listener.direct.auto-startup=true # Start the container automatically on startup. spring.rabbitmq.listener.direct.consumers-per-queue= # Number of consumers per queue. spring.rabbitmq.listener.direct.default-requeue-rejected= # Whether rejected deliveries are requeued by default; default true. spring.rabbitmq.listener.direct.idle-event-interval= # How often idle container events should be published in milliseconds. spring.rabbitmq.listener.direct.prefetch= # Number of messages to be handled in a single request. It should be greater than or equal to the transaction size (if used). spring.rabbitmq.listener.simple.acknowledge-mode= # Acknowledge mode of container. spring.rabbitmq.listener.simple.auto-startup=true # Start the container automatically on startup. spring.rabbitmq.listener.simple.concurrency= # Minimum number of listener invoker threads. spring.rabbitmq.listener.simple.default-requeue-rejected= # Whether or not to requeue delivery failures. spring.rabbitmq.listener.simple.idle-event-interval= # How often idle container events should be published in milliseconds. spring.rabbitmq.listener.simple.max-concurrency= # Maximum number of listener invoker. spring.rabbitmq.listener.simple.prefetch= # Number of messages to be handled in a single request. It should be greater than or equal to the transaction size (if used). spring.rabbitmq.listener.simple.retry.enabled=false # Whether or not publishing retries are enabled. spring.rabbitmq.listener.simple.retry.initial-interval=1000 # Interval between the first and second attempt to deliver a message. spring.rabbitmq.listener.simple.retry.max-attempts=3 # Maximum number of attempts to deliver a message. spring.rabbitmq.listener.simple.retry.max-interval=10000 # Maximum interval between attempts. spring.rabbitmq.listener.simple.retry.multiplier=1.0 # A multiplier to apply to the previous delivery retry interval. spring.rabbitmq.listener.simple.retry.stateless=true # Whether or not retry is stateless or stateful. spring.rabbitmq.listener.simple.transaction-size= # Number of messages to be processed in a transaction; number of messages between acks. For best results it should be less than or equal to the prefetch count. spring.rabbitmq.listener.type=simple # Listener container type. spring.rabbitmq.password= # Login to authenticate against the broker. spring.rabbitmq.port=5672 # RabbitMQ port. spring.rabbitmq.publisher-confirms=false # Enable publisher confirms. spring.rabbitmq.publisher-returns=false # Enable publisher returns. spring.rabbitmq.requested-heartbeat= # Requested heartbeat timeout, in seconds; zero for none. spring.rabbitmq.ssl.enabled=false # Enable SSL support. spring.rabbitmq.ssl.key-store= # Path to the key store that holds the SSL certificate. spring.rabbitmq.ssl.key-store-password= # Password used to access the key store. spring.rabbitmq.ssl.trust-store= # Trust store that holds SSL certificates. spring.rabbitmq.ssl.trust-store-password= # Password used to access the trust store. spring.rabbitmq.ssl.algorithm= # SSL algorithm to use. By default configure by the rabbit client library. spring.rabbitmq.template.mandatory=false # Enable mandatory messages. spring.rabbitmq.template.receive-timeout=0 # Timeout for receive() methods. spring.rabbitmq.template.reply-timeout=5000 # Timeout for sendAndReceive() methods. spring.rabbitmq.template.retry.enabled=false # Set to true to enable retries in the RabbitTemplate. spring.rabbitmq.template.retry.initial-interval=1000 # Interval between the first and second attempt to publish a message. spring.rabbitmq.template.retry.max-attempts=3 # Maximum number of attempts to publish a message. spring.rabbitmq.template.retry.max-interval=10000 # Maximum number of attempts to publish a message. spring.rabbitmq.template.retry.multiplier=1.0 # A multiplier to apply to the previous publishing retry interval. spring.rabbitmq.username= # Login user to authenticate to the broker. spring.rabbitmq.virtual-host= # Virtual host to use when connecting to the broker. ENDPOINTS (AbstractEndpoint subclasses) endpoints.enabled=true # Enable endpoints. endpoints.sensitive= # Default endpoint sensitive setting. endpoints.actuator.enabled=true # Enable the endpoint. endpoints.actuator.path= # Endpoint URL path. endpoints.actuator.sensitive=false # Enable security on the endpoint. endpoints.auditevents.enabled= # Enable the endpoint. endpoints.auditevents.path= # Endpoint path. endpoints.auditevents.sensitive=false # Enable security on the endpoint. endpoints.autoconfig.enabled= # Enable the endpoint. endpoints.autoconfig.id= # Endpoint identifier. endpoints.autoconfig.path= # Endpoint path. endpoints.autoconfig.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.beans.enabled= # Enable the endpoint. endpoints.beans.id= # Endpoint identifier. endpoints.beans.path= # Endpoint path. endpoints.beans.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.configprops.enabled= # Enable the endpoint. endpoints.configprops.id= # Endpoint identifier. endpoints.configprops.keys-to-sanitize=password,secret,key,token,.credentials.,vcap_services # Keys that should be sanitized. Keys can be simple strings that the property ends with or regex expressions. endpoints.configprops.path= # Endpoint path. endpoints.configprops.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.docs.curies.enabled=false # Enable the curie generation. endpoints.docs.enabled=true # Enable actuator docs endpoint. endpoints.docs.path=/docs # endpoints.docs.sensitive=false # endpoints.dump.enabled= # Enable the endpoint. endpoints.dump.id= # Endpoint identifier. endpoints.dump.path= # Endpoint path. endpoints.dump.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.env.enabled= # Enable the endpoint. endpoints.env.id= # Endpoint identifier. endpoints.env.keys-to-sanitize=password,secret,key,token,.credentials.,vcap_services # Keys that should be sanitized. Keys can be simple strings that the property ends with or regex expressions. endpoints.env.path= # Endpoint path. endpoints.env.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.flyway.enabled= # Enable the endpoint. endpoints.flyway.id= # Endpoint identifier. endpoints.flyway.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.health.enabled= # Enable the endpoint. endpoints.health.id= # Endpoint identifier. endpoints.health.mapping.*= # Mapping of health statuses to HttpStatus codes. By default, registered health statuses map to sensible defaults (i.e. UP maps to 200). endpoints.health.path= # Endpoint path. endpoints.health.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.health.time-to-live=1000 # Time to live for cached result, in milliseconds. endpoints.heapdump.enabled= # Enable the endpoint. endpoints.heapdump.path= # Endpoint path. endpoints.heapdump.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.hypermedia.enabled=false # Enable hypermedia support for endpoints. endpoints.info.enabled= # Enable the endpoint. endpoints.info.id= # Endpoint identifier. endpoints.info.path= # Endpoint path. endpoints.info.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.jolokia.enabled=true # Enable Jolokia endpoint. endpoints.jolokia.path=/jolokia # Endpoint URL path. endpoints.jolokia.sensitive=true # Enable security on the endpoint. endpoints.liquibase.enabled= # Enable the endpoint. endpoints.liquibase.id= # Endpoint identifier. endpoints.liquibase.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.logfile.enabled=true # Enable the endpoint. endpoints.logfile.external-file= # External Logfile to be accessed. endpoints.logfile.path=/logfile # Endpoint URL path. endpoints.logfile.sensitive=true # Enable security on the endpoint. endpoints.loggers.enabled=true # Enable the endpoint. endpoints.loggers.id= # Endpoint identifier. endpoints.loggers.path=/logfile # Endpoint path. endpoints.loggers.sensitive=true # Mark if the endpoint exposes sensitive information. endpoints.mappings.enabled= # Enable the endpoint. endpoints.mappings.id= # Endpoint identifier. endpoints.mappings.path= # Endpoint path. endpoints.mappings.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.metrics.enabled= # Enable the endpoint. endpoints.metrics.filter.enabled=true # Enable the metrics servlet filter. endpoints.metrics.filter.gauge-submissions=merged # Http filter gauge submissions (merged, per-http-method) endpoints.metrics.filter.counter-submissions=merged # Http filter counter submissions (merged, per-http-method) endpoints.metrics.id= # Endpoint identifier. endpoints.metrics.path= # Endpoint path. endpoints.metrics.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.shutdown.enabled= # Enable the endpoint. endpoints.shutdown.id= # Endpoint identifier. endpoints.shutdown.path= # Endpoint path. endpoints.shutdown.sensitive= # Mark if the endpoint exposes sensitive information. endpoints.trace.enabled= # Enable the endpoint. endpoints.trace.filter.enabled=true # Enable the trace servlet filter. endpoints.trace.id= # Endpoint identifier. endpoints.trace.path= # Endpoint path. endpoints.trace.sensitive= # Mark if the endpoint exposes sensitive information. ENDPOINTS CORS CONFIGURATION (EndpointCorsProperties) endpoints.cors.allow-credentials= # Set whether credentials are supported. When not set, credentials are not supported. endpoints.cors.allowed-headers= # Comma-separated list of headers to allow in a request. â€˜â€™ allows all headers. endpoints.cors.allowed-methods=GET # Comma-separated list of methods to allow. 'â€™ allows all methods. endpoints.cors.allowed-origins= # Comma-separated list of origins to allow. â€˜*â€™ allows all origins. When not set, CORS support is disabled. endpoints.cors.exposed-headers= # Comma-separated list of headers to include in a response. endpoints.cors.max-age=1800 # How long, in seconds, the response from a pre-flight request can be cached by clients. JMX ENDPOINT (EndpointMBeanExportProperties) endpoints.jmx.domain= # JMX domain name. Initialized with the value of â€˜spring.jmx.default-domainâ€™ if set. endpoints.jmx.enabled=true # Enable JMX export of all endpoints. endpoints.jmx.static-names= # Additional static properties to append to all ObjectNames of MBeans representing Endpoints. endpoints.jmx.unique-names=false # Ensure that ObjectNames are modified in case of conflict. JOLOKIA (JolokiaProperties) jolokia.config.*= # See Jolokia manual MANAGEMENT HTTP SERVER (ManagementServerProperties) management.add-application-context-header=false # Add the â€œX-Application-Contextâ€ HTTP header in each response. management.address= # Network address that the management endpoints should bind to. management.context-path= # Management endpoint context-path. For instance /actuator management.cloudfoundry.enabled= # Enable extended Cloud Foundry actuator endpoints management.cloudfoundry.skip-ssl-validation= # Skip SSL verification for Cloud Foundry actuator endpoint security calls management.port= # Management endpoint HTTP port. Uses the same port as the application by default. Configure a different port to use management-specific SSL. management.security.enabled=true # Enable security. management.security.roles=ACTUATOR # Comma-separated list of roles that can access the management endpoint. management.security.sessions=stateless # Session creating policy to use (always, never, if_required, stateless). management.ssl.ciphers= # Supported SSL ciphers. Requires a custom management.port. management.ssl.client-auth= # Whether client authentication is wanted (â€œwantâ€) or needed (â€œneedâ€). Requires a trust store. Requires a custom management.port. management.ssl.enabled= # Enable SSL support. Requires a custom management.port. management.ssl.enabled-protocols= # Enabled SSL protocols. Requires a custom management.port. management.ssl.key-alias= # Alias that identifies the key in the key store. Requires a custom management.port. management.ssl.key-password= # Password used to access the key in the key store. Requires a custom management.port. management.ssl.key-store= # Path to the key store that holds the SSL certificate (typically a jks file). Requires a custom management.port. management.ssl.key-store-password= # Password used to access the key store. Requires a custom management.port. management.ssl.key-store-provider= # Provider for the key store. Requires a custom management.port. management.ssl.key-store-type= # Type of the key store. Requires a custom management.port. management.ssl.protocol=TLS # SSL protocol to use. Requires a custom management.port. management.ssl.trust-store= # Trust store that holds SSL certificates. Requires a custom management.port. management.ssl.trust-store-password= # Password used to access the trust store. Requires a custom management.port. management.ssl.trust-store-provider= # Provider for the trust store. Requires a custom management.port. management.ssl.trust-store-type= # Type of the trust store. Requires a custom management.port. HEALTH INDICATORS management.health.db.enabled=true # Enable database health check. management.health.cassandra.enabled=true # Enable cassandra health check. management.health.couchbase.enabled=true # Enable couchbase health check. management.health.defaults.enabled=true # Enable default health indicators. management.health.diskspace.enabled=true # Enable disk space health check. management.health.diskspace.path= # Path used to compute the available disk space. management.health.diskspace.threshold=0 # Minimum disk space that should be available, in bytes. management.health.elasticsearch.enabled=true # Enable elasticsearch health check. management.health.elasticsearch.indices= # Comma-separated index names. management.health.elasticsearch.response-timeout=100 # The time, in milliseconds, to wait for a response from the cluster. management.health.jms.enabled=true # Enable JMS health check. management.health.ldap.enabled=true # Enable LDAP health check. management.health.mail.enabled=true # Enable Mail health check. management.health.mongo.enabled=true # Enable MongoDB health check. management.health.rabbit.enabled=true # Enable RabbitMQ health check. management.health.redis.enabled=true # Enable Redis health check. management.health.solr.enabled=true # Enable Solr health check. management.health.status.order=DOWN, OUT_OF_SERVICE, UP, UNKNOWN # Comma-separated list of health statuses in order of severity. INFO CONTRIBUTORS (InfoContributorProperties) management.info.build.enabled=true # Enable build info. management.info.defaults.enabled=true # Enable default info contributors. management.info.env.enabled=true # Enable environment info. management.info.git.enabled=true # Enable git info. management.info.git.mode=simple # Mode to use to expose git information. TRACING (TraceProperties) management.trace.include=request-headers,response-headers,cookies,errors # Items to be included in the trace. METRICS EXPORT (MetricExportProperties) spring.metrics.export.aggregate.key-pattern= # Pattern that tells the aggregator what to do with the keys from the source repository. spring.metrics.export.aggregate.prefix= # Prefix for global repository if active. spring.metrics.export.delay-millis=5000 # Delay in milliseconds between export ticks. Metrics are exported to external sources on a schedule with this delay. spring.metrics.export.enabled=true # Flag to enable metric export (assuming a MetricWriter is available). spring.metrics.export.excludes= # List of patterns for metric names to exclude. Applied after the includes. spring.metrics.export.includes= # List of patterns for metric names to include. spring.metrics.export.redis.key=keys.spring.metrics # Key for redis repository export (if active). spring.metrics.export.redis.prefix=spring.metrics # Prefix for redis repository if active. spring.metrics.export.send-latest= # Flag to switch off any available optimizations based on not exporting unchanged metric values. spring.metrics.export.statsd.host= # Host of a statsd server to receive exported metrics. spring.metrics.export.statsd.port=8125 # Port of a statsd server to receive exported metrics. spring.metrics.export.statsd.prefix= # Prefix for statsd exported metrics. spring.metrics.export.triggers.*= # Specific trigger properties per MetricWriter bean name. DEVTOOLS (DevToolsProperties) spring.devtools.livereload.enabled=true # Enable a livereload.com compatible server. spring.devtools.livereload.port=35729 # Server port. spring.devtools.restart.additional-exclude= # Additional patterns that should be excluded from triggering a full restart. spring.devtools.restart.additional-paths= # Additional paths to watch for changes. spring.devtools.restart.enabled=true # Enable automatic restart. spring.devtools.restart.exclude=META-INF/maven/,META-INF/resources/,resources/,static/,public/,templates/,/*Test.class,/*Tests.class,git.properties # Patterns that should be excluded from triggering a full restart. spring.devtools.restart.poll-interval=1000 # Amount of time (in milliseconds) to wait between polling for classpath changes. spring.devtools.restart.quiet-period=400 # Amount of quiet time (in milliseconds) required without any classpath changes before a restart is triggered. spring.devtools.restart.trigger-file= # Name of a specific file that when changed will trigger the restart check. If not specified any classpath file change will trigger the restart. REMOTE DEVTOOLS (RemoteDevToolsProperties) spring.devtools.remote.context-path=/.~~spring-boot!~ # Context path used to handle the remote connection. spring.devtools.remote.debug.enabled=true # Enable remote debug support. spring.devtools.remote.debug.local-port=8000 # Local remote debug server port. spring.devtools.remote.proxy.host= # The host of the proxy to use to connect to the remote application. spring.devtools.remote.proxy.port= # The port of the proxy to use to connect to the remote application. spring.devtools.remote.restart.enabled=true # Enable remote restart. spring.devtools.remote.secret= # A shared secret required to establish a connection (required to enable remote support). spring.devtools.remote.secret-header-name=X-AUTH-TOKEN # HTTP header used to transfer the shared secret. TEST spring.test.database.replace=any # Type of existing DataSource to replace. spring.test.mockmvc.print=default # MVC Print option.","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://luxiaowan.github.io/categories/SpringBoot/"}],"tags":[]},{"title":"ThreadLocalæ˜¯æ€ä¹ˆå®ç°çº¿ç¨‹éš”ç¦»çš„","slug":"ThreadLocalæ˜¯æ€ä¹ˆå®ç°çº¿ç¨‹éš”ç¦»çš„","date":"2019-11-20T15:21:56.000Z","updated":"2019-11-25T17:08:11.991Z","comments":true,"path":"2019/11/20/ThreadLocalæ˜¯æ€ä¹ˆå®ç°çº¿ç¨‹éš”ç¦»çš„/","link":"","permalink":"http://luxiaowan.github.io/2019/11/20/ThreadLocalæ˜¯æ€ä¹ˆå®ç°çº¿ç¨‹éš”ç¦»çš„/","excerpt":"","text":"ThreadLocalå¤§å®¶åº”è¯¥éƒ½ä¸é™Œç”Ÿï¼Œè§è¿‡æœ€å¤šçš„ä½¿ç”¨åœºæ™¯åº”è¯¥æ˜¯å’ŒSimpleDateFormatä¸€èµ·ä½¿ç”¨å§ï¼Œå› ä¸ºè¿™ä¸ªSDFéçº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ThreadLocalå°†å®ƒåœ¨çº¿ç¨‹ä¹‹é—´éš”ç¦»å¼€ï¼Œé¿å…é€ æˆè„æ•°æ®çš„ğŸã€‚é‚£ä¹ˆThreadLocalæ˜¯æ€ä¹ˆä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåˆæ˜¯å¦‚ä½•æ“ä½œçš„å‘¢ï¼Ÿ æ¡ˆä¾‹ 123456789101112131415161718192021public static void main(String[] args) &#123; ThreadLocal&lt;Integer&gt; threadLocal = new ThreadLocal&lt;&gt;(); new Thread(new Runnable() &#123; @Override public void run() &#123; threadLocal.set(1); threadLocal.set(2); System.out.println(\"cc1: \" + threadLocal.get()); &#125; &#125;, \"cc1\").start(); new Thread(new Runnable() &#123; @Override public void run() &#123; System.out.println(\"cc2: \" + threadLocal.get()); &#125; &#125;, \"cc2\").start();&#125; è¾“å‡º: 12cc1: 2cc2: null å“¦å“Ÿ~cc2æ‰“å°å‡ºæ¥nullï¼Œä¹Ÿå°±æ˜¯åœ¨cc1çº¿ç¨‹ä¸­è®¾ç½®çš„å€¼åœ¨çº¿ç¨‹cc2ä¸­è·å–ä¸åˆ°ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„çº¿ç¨‹éš”ç¦»ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ThreadLocalå…·ä½“çš„ä»£ç å®ç°å§ï¼š ThreadLocalçš„set(T t)æ–¹æ³•æºç  123456789101112public void set(T value) &#123; // è·å–å½“å‰çº¿ç¨‹ Thread t = Thread.currentThread(); // è·å–å½“å‰çº¿ç¨‹çš„threadLocalså±æ€§ï¼Œè¿™ä¸ªå±æ€§åœ¨Threadç±»ä¸­å®šä¹‰çš„ï¼Œä¸ºThreadçš„å®ä¾‹å˜é‡ ThreadLocalMap map = getMap(t); // è‹¥çº¿ç¨‹çš„ThreadLocalMapå·²ç»å­˜åœ¨ï¼Œåˆ™è°ƒç”¨ThreadLocalMapçš„set(ThreadLocal&lt;T&gt; key, Object value)æ–¹æ³• // å¦åˆ™åˆ›å»ºæ–°çš„ThreadLocalMapå®ä¾‹ï¼Œå¹¶setå¯¹åº”çš„value if (map != null) map.set(this, value); else createMap(t, value);&#125; ThreadLocalMapçš„set(ThreadLocal key, Object value)æ–¹æ³•æºç  12345678910111213141516171819202122232425262728private void set(ThreadLocal&lt;?&gt; key, Object value) &#123; Entry[] tab = table; int len = tab.length; // ç®€å•è®¡ç®—keyæ‰€åœ¨çš„ä½ç½® int i = key.threadLocalHashCode &amp; (len-1); // ä»keyæ‰€åœ¨ä½ç½®å¼€å§‹éå†tableæ•°ç»„ï¼Œæ‰¾åˆ°å…·ä½“keyæ‰€åœ¨çš„ä½ç½® for (Entry e = tab[i]; e != null; e = tab[i = nextIndex(i, len)]) &#123; // è·å–Entryå®ä¾‹çš„keyå€¼ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯è¶…ç±»java.lang.ref.Referenceä¸­çš„get(T t)æ–¹æ³• ThreadLocal&lt;?&gt; k = e.get(); // è‹¥kä¸ä¼ å…¥çš„å‚æ•°keyæ˜¯åŒä¸€ä¸ªï¼Œåˆ™ç”¨å‚æ•°valueæ›¿æ¢Entryå®ä¾‹çš„valueï¼Œç„¶åç»“æŸæ–¹æ³• if (k == key) &#123; e.value = value; return; &#125; // è‹¥è·å–çš„kä¸ºnullï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªå˜é‡å·²ç»è¢«åˆ é™¤äº†ï¼Œåˆ™å»æ¸…ç†ä¸€ä¸‹tableæ•°ç»„ï¼Œå¹¶å¯¹æ•°ç»„ä¸­å…ƒç´ è¿›è¡Œæ¸…ç†å¹¶è®¾ç½®æ–°çš„Entryå®ä¾‹ if (k == null) &#123; replaceStaleEntry(key, value, i); return; &#125; &#125; // ä»£ç èµ°åˆ°è¿™ä¸€æ­¥ï¼Œè¯´æ˜è¯¥çº¿ç¨‹ç¬¬ä¸€æ¬¡è®¾ç½®æ•°æ®ï¼Œåˆ›å»ºæ–°çš„Entryå®ä¾‹æ”¾åœ¨tableçš„ç¬¬iä¸ªä½ç½®ä¸Š tab[i] = new Entry(key, value); int sz = ++size; // æ¸…ç†tableä¸­çš„å…ƒç´ ï¼Œè‹¥é•¿åº¦è¾¾åˆ°äº†æ‰©å®¹é˜ˆå€¼ï¼Œåˆ™å¯¹tableè¿›è¡Œæ‰©å®¹ï¼Œæ‰©å®¹ä¸ºåŸæ•°ç»„é•¿åº¦çš„2å€ if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold) rehash();&#125; ThreadLocalçš„createMap(Thread t, T firstValue)æ–¹æ³•æºç  12345void createMap(Thread t, T firstValue) &#123; // åˆ›å»ºä¸€ä¸ªThreadLocalMapå®ä¾‹ï¼Œå¹¶èµ‹å€¼ç»™å½“å‰çº¿ç¨‹çš„å®ä¾‹å˜é‡threadLocals // è¿™é‡Œå°±æ˜¯çº¿ç¨‹éš”ç¦»çš„å…³é”®æ‰€åœ¨ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ•°æ®éƒ½æ˜¯ç”±çº¿ç¨‹ç‹¬æœ‰çš„threadLocalså˜é‡å­˜å‚¨çš„ t.threadLocals = new ThreadLocalMap(this, firstValue);&#125; ThreadLocalMapçš„æ„é€ å™¨æºç  123456789101112ThreadLocalMap(ThreadLocal&lt;?&gt; firstKey, Object firstValue) &#123; // å®ä¾‹åŒ–Entryæ•°ç»„ï¼Œé•¿åº¦ä¸ºåˆå§‹é•¿åº¦16 table = new Entry[INITIAL_CAPACITY]; // è®¡ç®—keyåœ¨æ•°ç»„ä¸­çš„ä½ç½® int i = firstKey.threadLocalHashCode &amp; (INITIAL_CAPACITY - 1); // åˆ›å»ºEntryå®ä¾‹ï¼Œå¹¶æ”¾åœ¨tableçš„iä¸‹æ ‡ä½ç½® table[i] = new Entry(firstKey, firstValue); // å®é™…é•¿åº¦è®¾ç½®ä¸º1 size = 1; // è®¾ç½®æ•°ç»„æ‰©å®¹é˜ˆå€¼ï¼ˆlen * 2 / 3ï¼‰ setThreshold(INITIAL_CAPACITY);&#125; ä»¥ä¸Šä¾¿æ˜¯ThreadLocalè¾¾åˆ°çº¿ç¨‹éš”ç¦»çš„åŸºæœ¬è§£æï¼Œè®²è§£çš„æ¯”è¾ƒåŸºç¡€ï¼Œå…¶å®å°±æ˜¯JDKæºç é‰´èµï¼Œè¿˜æœ‰ä»€ä¹ˆä¸æ‡‚çš„åœ°æ–¹å°±è‡ªå·±å»çœ‹æºç å§ã€‚ å»¶ä¼¸ä¸‹ ThreadLocalçš„get()æ–¹æ³•æºç  12345678910111213public T get() &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings(\"unchecked\") T result = (T)e.value; return result; &#125; &#125; return setInitialValue();&#125; è¿™æ®µä»£ç æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œå°±ä¸åœ¨è¿›è¡Œè§£é‡Šäº†ï¼Œæˆ‘ä»¬ç€é‡çœ‹ä¸€ä¸‹æœ€åä¸€å¥setInitialValue()è¿™ä¸ªæ–¹æ³• 1234567891011121314private T setInitialValue() &#123; T value = initialValue(); Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value); return value;&#125;protected T initialValue() &#123; return null;&#125; ä¼šå‘ç°å’Œsetæ–¹æ³•ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯å°†ä¸€ä¸ªnullå½“åšvalueè€Œå·²ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ²¡ç»™ThreadLocalè®¾ç½®å€¼çš„æƒ…å†µä¸‹è°ƒç”¨getæ–¹æ³•ï¼Œåˆ™ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„nullå€¼å¹¶è¿”å›nullã€‚ ç•™ä¸€ä¸ªæ€è€ƒé¢˜ å› ä¸ºæˆ‘ä»¬æ¯ä¸ªçº¿ç¨‹çš„ThreadLocalçš„keyçš„hashå€¼éƒ½æ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆThreadçš„threadLocalså˜é‡çš„tableä¸­ä¼šæœ‰å¤šå°‘ä¸ªénullå…ƒç´ å‘¢ï¼Ÿ","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"æ…ç”¨ArrayListä¸­çš„SubList","slug":"æ…ç”¨ArrayListä¸­çš„SubList","date":"2019-11-10T17:11:00.000Z","updated":"2019-12-19T16:51:55.997Z","comments":true,"path":"2019/11/11/æ…ç”¨ArrayListä¸­çš„SubList/","link":"","permalink":"http://luxiaowan.github.io/2019/11/11/æ…ç”¨ArrayListä¸­çš„SubList/","excerpt":"","text":"åŒåä¸€äº†ï¼Œå¤§å®¶éƒ½çœäº†å¤šå°‘é’±å•Šï¼Ÿ é¢˜å¤–è¯ï¼šæ­¤å¤„äº¤ç»™å¤§å®¶ä¸€ä¸ªæŸ¥çœ‹å•†å“å†å²ä»·æ ¼çš„å°æ–¹æ³•ï¼š åœ¨å•†å“é“¾æ¥çš„åŸŸåååŠ ä¸Šä¸‰ä¸ªvå°±èƒ½æŸ¥çœ‹åˆ°è¯¥å•†å“çš„å†å²ä»·æ ¼å•¦ ğŸŒ° http://shop.taobao.com/xxxx â†“ http://shop.taobaovvv.com/xxx æ­¥å…¥æ­£é¢˜ï¼Œä¸ºä»€ä¹ˆè¯´æˆ‘ä»¬åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­è¦æ…ç”¨ArrayListçš„subListå‘¢ï¼Ÿå…¶å®è¿™ä¹Ÿæ˜¯é˜¿é‡Œå†›è§„ä¸­çš„ä¸€æ¡ï¼ŒåŸå› å…¶å®å¾ˆç®€å•ï¼šä¸ç¨³å®šï¼ä¹Ÿè®¸çœ‹åˆ°è¿™é‡Œä¼šè§‰å¾—&quot;å°±æ˜¯åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„æ–°çš„SubListçš„å®ä¾‹ï¼Œæ€ä¹ˆä¼šä¸ç¨³å®šï¼&quot;ï¼Œå¦‚æœä½ æ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œè¿™ç¯‡æ–‡ç« çœŸçš„èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ï¼Œä¸”å¾€ä¸‹çœ‹ï¼š 1. çœ‹çœ‹SubListçš„setæ–¹æ³•ï¼š 1234567891011121314151617public static void main(String[] args) &#123; List&lt;String&gt; sourceList = new ArrayList&lt;String&gt;() &#123; &#123; add(\"H\"); add(\"E\"); add(\"L\"); add(\"L\"); add(\"O\"); add(\"W\"); add(\"O\"); add(\"R\"); add(\"L\"); add(\"D\"); &#125; &#125;; List&lt;String&gt; subList = sourceList.subList(2, 5); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"sourceList.subList(2, 5)å¾—åˆ°: \" + subList); subList.set(1, \"cc\"); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"subList: \" + subList); &#125;&#125; ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿå…ˆä¸è¦çœ‹ä¸‹é¢çš„ç­”æ¡ˆï¼Œè‡ªå·±æƒ³ä¸€æƒ³ã€‚ ç­”æ¡ˆ 1234sourceList: [H, E, L, L, O, W, O, R, L, D]subList: [L, L, O]sourceList: [H, E, L, cc, O, W, O, R, L, D]subList: [L, cc, O] å“¦å¼~ï¼ç­”æ¡ˆå’Œä½ è‡ªå·±æƒ³çš„æœ‰æ²¡æœ‰å‡ºå…¥ï¼Ÿå¥‡å¦™å§ï¼Œä¸ºä»€ä¹ˆä¿®æ”¹äº†subListä¸­çš„å…ƒç´ ï¼Œä¼šå½±å“åˆ°sourceListï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸‹ArrayListçš„subListæ–¹æ³•éƒ½åšäº†äº›ä»€ä¹ˆï¼š JDKæºç  12345678/** * Returns a view of the portion of this list between the specified * &#123;@code fromIndex&#125;, inclusive, and &#123;@code toIndex&#125;, exclusive. */public List&lt;E&gt; subList(int fromIndex, int toIndex) &#123; subListRangeCheck(fromIndex, toIndex, size); return new SubList(this, 0, fromIndex, toIndex);&#125; é¦–å…ˆæ˜¯æ£€æŸ¥æˆ‘ä»¬çš„fromIndexå’ŒtoIndexæ˜¯å¦åˆæ³•ï¼Œç„¶åè°ƒç”¨ArrayListçš„å†…éƒ¨ç±»SubListåˆ›å»ºä¸€ä¸ªSubListçš„å®ä¾‹ã€‚å¥½åƒè¿˜çœŸå¦‚æˆ‘ä»¬ä¹‹å‰æƒ³çš„ä¸€æ ·ï¼Œåˆ›å»ºäº†ä¸€ä¸ªç‹¬ç«‹çš„SubListçš„å¯¹è±¡ï¼Œæ²¡ä»€ä¹ˆä¸å¯¹çš„ï¼Œé‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹SubListçš„æ„é€ å™¨ä¸­éƒ½åšäº†äº›ä»€ä¹ˆå§ã€‚ 1234567SubList(AbstractList&lt;E&gt; parent, int offset, int fromIndex, int toIndex) &#123; this.parent = parent; this.parentOffset = fromIndex; this.offset = offset + fromIndex; this.size = toIndex - fromIndex; this.modCount = ArrayList.this.modCount;&#125; è¿™æ˜¯ä¸ªä»€ä¹ˆé¬¼ï¼ŸArrayListçš„å®ä¾‹å¯¹è±¡(ä¹Ÿå°±æ˜¯parent)ç«Ÿç„¶ä½œä¸ºå‚æ•°ä¼ åˆ°äº†SubListä¸­ï¼ŒSubListçš„åç§»é‡ä¸º0+fromIndexï¼Œå¤§å°sizeä¸ºtoIndex - fromIndexï¼ˆä¹Ÿå°±æ˜¯å’ŒStringçš„substringæ–¹æ³•ä¸€æ ·ï¼ŒfromIndexåˆ°(toIndex -1)çš„æ•°æ®é›†ï¼‰ï¼Œä¿®æ”¹æ¬¡æ•°modCountå’ŒArrayListçš„modCountç›¸ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŒœæµ‹ä¸€ä¸‹ï¼šSubListå®ä¾‹çš„å˜åŠ¨ï¼Œæ˜¯å¦å’ŒArrayListæœ‰å…³å‘¢ï¼Ÿ æˆ‘ä»¬çœ‹åˆ°subListæ–¹æ³•çš„æ³¨é‡Šä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼šReturns a view of the portion of this listã€‚éš¾é“SubListä»…ä»…æ˜¯ArrayListçš„ä¸€ä¸ªè¢«fromIndexå’ŒtoIndexçš„åŒºé—´è§†å›¾ï¼Ÿ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒsubListè°ƒç”¨äº†å®ƒçš„setæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªsetæ–¹æ³•å†…éƒ¨é€»è¾‘æ˜¯ä»€ä¹ˆï¼š 12345678910public E set(int index, E e) &#123; rangeCheck(index);// ä¸‹æ ‡æ ¡éªŒ checkForComodification();// æ ¡éªŒåˆæ³•æ€§ // ***é‡ç‚¹ // æ ¹æ®åç§»é‡å’Œä¸‹æ ‡ï¼Œè·å–ArrayListå¯¹è±¡çš„elementDataæ•°ç»„ä¸­ä¸‹æ ‡ä¸º(offset + index)çš„å…ƒç´  // offsetæ˜¯ä»€ä¹ˆï¼Ÿä»æ„é€ å™¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°offsetå°±æ˜¯0 + fromIndexï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æˆªå–çš„èµ·å§‹ä¸‹æ ‡ï¼Œä¹Ÿå°±æ˜¯SubListçš„setæ–¹æ³•æ˜¯ç›´æ¥åœ¨åŸArrayListå®ä¾‹çš„å†…éƒ¨æ•°ç»„ä¸Šè¿›è¡Œçš„æ“ä½œ E oldValue = ArrayList.this.elementData(offset + index); ArrayList.this.elementData[offset + index] = e; return oldValue;&#125; çœ‹åˆ°è¿™é‡Œå°±ä¸€ç›®äº†ç„¶äº†ï¼Œæ€ªä¸å¾—æˆ‘ä»¬ä¿®æ”¹äº†SubListçš„å…ƒç´ ä¼šå½±å“åˆ°åˆ›å»ºå®ƒçš„å¯¹è±¡çš„å€¼ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨SubListçš„æ—¶å€™ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹SubListé‡Œé¢çš„å€¼ï¼Œä¸€å®šè¦æ³¨æ„ä¸€ä¸‹æ˜¯å¦ä¼šå½±å“åˆ°åŸListä¸­çš„æ•°æ®æ‰€æ¶‰åŠçš„ä¸šåŠ¡ï¼Œå¦åˆ™è¿™ä¸ªå‘ä¸€æ—¦è¸©ä¸Šäº†ï¼Œä¸å¤ªå®¹æ˜“æ’æŸ¥å•Šã€‚ 2. å†çœ‹çœ‹SubListçš„addæ–¹æ³• 1234567891011121314151617public static void main(String[] args) &#123; List&lt;String&gt; sourceList = new ArrayList&lt;String&gt;() &#123; &#123; add(\"H\"); add(\"E\"); add(\"L\"); add(\"L\"); add(\"O\"); add(\"W\"); add(\"O\"); add(\"R\"); add(\"L\"); add(\"D\"); &#125; &#125;; List&lt;String&gt; subList = sourceList.subList(2, 5); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"sourceList.subList(2, 5)å¾—åˆ°: \" + subList); subList.add(\"cc\"); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"subList: \" + subList); &#125;&#125; ä¸Šé¢ä»£ç çš„æ‰§è¡Œç»“æœåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¦‚æœæˆ‘ä»¬ç¨å¾®æ€è€ƒä¸€ä¸‹ï¼Œå¤§è‡´èƒ½æ­£ç¡®çš„åˆ†æå‡ºç»“æœï¼š ç­”æ¡ˆ 1234sourceList: [H, E, L, L, O, W, O, R, L, D]subList: [L, L, O]sourceList: [H, E, L, L, O, cc, W, O, R, L, D]subList: [L, L, O, cc] æˆ‘ä»¬å‘subListä¸­æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼ŒåŸåˆ—è¡¨sourceListåœ¨toIndexçš„ä½ç½®æ’å…¥äº†subListä¸­addçš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨SubListä¸­æ–°å¢ä¸€ä¸ªå…ƒç´ ï¼ŒåŒæ—¶ä¼šå°†è¿™ä¸ªå…ƒç´ æ·»åŠ åˆ°åŸListä¸­ã€‚ JDKæºç  æˆ‘ä»¬æŸ¥çœ‹SubListçš„æºç ï¼Œå‘ç°å¹¶æ²¡æœ‰add(E e)æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬è°ƒç”¨çš„add(â€œccâ€)æ˜¯è°ƒç”¨åˆ°å“ªé‡Œå»äº†å‘¢ï¼Ÿæˆ‘ä»¬æŸ¥çœ‹SubListç±»çš„å£°æ˜ï¼Œå¯ä»¥çœ‹åˆ°å®ƒæ˜¯ç»§æ‰¿äº†AbstractListæŠ½è±¡ç±»ï¼Œæ‰€ä»¥è¿™é‡Œåº”è¯¥æ˜¯è°ƒç”¨äº†è¶…ç±»é‡Œçš„add(E e)æ–¹æ³•ï¼Œ 12345/** AbstractList.java */public boolean add(E e) &#123; add(size(), e); return true;&#125; è¿™é‡Œå¯ä»¥çœ‹åˆ°æ˜¯è°ƒç”¨äº†add(int index, E element)æ–¹æ³•è¿›è¡Œæ•°æ®æ–°å¢çš„ï¼Œç„¶è€ŒSubListé‡Œé¢å®ç°äº†è¿™ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸‹SubListä¸­çš„è¿™ä¸ªæ–¹æ³•å®ç°ï¼š 123456789101112public void add(int index, E e) &#123; // æ ¡éªŒä¸‹æ ‡æ˜¯å¦è¶Šç•Œ rangeCheckForAdd(index); // æ ¡éªŒåŸListæ˜¯å¦æœ‰è¿‡ä¿®æ”¹ checkForComodification(); // parentå³æ˜¯åœ¨æ„é€ å™¨ä¸­æ³¨å…¥çš„åŸList parent.add(parentOffset + index, e); // åŒæ­¥åˆ—è¡¨ä¿®æ”¹æ¬¡æ•° this.modCount = parent.modCount; // æœ¬åˆ—è¡¨çš„é•¿åº¦+1 this.size++;&#125; ç”±SubListçš„æºç å¯ä»¥çœ‹å‡ºï¼ŒSubListå®ä¾‹çš„addæ–¹æ³•å®é™…ä¸Šå°±æ˜¯åœ¨ä¿®æ”¹åŸListï¼ŒåŒ…æ‹¬SubListä¸­æ‰€æœ‰çš„æ–¹æ³•å‡æ˜¯åœ¨parentåˆ—è¡¨ä¸Šè¿›è¡Œæ“ä½œã€‚ 3. å¥‡è‘©æ“ä½œï¼Œæœ€å‘çš„å‘ ä»”ç»†åˆ†æå¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516public static void main(String[] args) &#123; List&lt;String&gt; sourceList = new ArrayList&lt;String&gt;() &#123; &#123; add(\"H\"); add(\"E\"); add(\"L\"); add(\"L\"); add(\"O\"); add(\"W\"); add(\"O\"); add(\"R\"); add(\"L\"); add(\"D\"); &#125; &#125;; List&lt;String&gt; subList = sourceList.subList(2, 5); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"subList: \" + subList); sourceList.add(\"cc\"); System.out.println(\"sourceList: \" + sourceList); System.out.println(\"subList: \" + subList);&#125; è¿™æ®µä»£ç çš„æ‰§è¡Œç»“æœæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ä¸æ‰§è¡Œè¿™æ®µä»£ç çš„æƒ…å†µä¸‹ï¼Œæ˜¯ä¸æ˜¯ä»¥ä¸ºæ˜¯ä¸‹é¢çš„ç»“æœï¼Ÿ 1234sourceList: [H, E, L, L, O, W, O, R, L, D]subList: [L, L, O]sourceList: [H, E, L, L, O, W, O, R, L, D, cc]subList: [L, L, O] å¦‚æœä½ è¯´å¯¹ï¼Œå°±æ˜¯è¿™ä¸ªï¼Œé‚£ä½ å¯å°±è¯´é”™å’¯ï¼Œå®é™…ä¸Šåœ¨æ‰§è¡Œåˆ°System.out.println(&quot;sourceList: &quot; + sourceList);è¿™ä¸€å¥ä»£ç çš„æ—¶å€™æ•´ä¸ªç¨‹åºçš„è¾“å‡ºéƒ½æ˜¯æ­£å¸¸çš„ï¼Œä½†åœ¨æ‰§è¡Œæœ€åä¸€å¥ä»£ç çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥é”™äº†ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ï¼š 123456789Exception in thread \"main\" java.util.ConcurrentModificationException at java.util.ArrayList$SubList.checkForComodification(ArrayList.java:1239) at java.util.ArrayList$SubList.listIterator(ArrayList.java:1099) at java.util.AbstractList.listIterator(AbstractList.java:299) at java.util.ArrayList$SubList.iterator(ArrayList.java:1095) at java.util.AbstractCollection.toString(AbstractCollection.java:454) at java.lang.String.valueOf(String.java:2994) at java.lang.StringBuilder.append(StringBuilder.java:131) at cc.kevinlu.sublist.SubListTest.main(SubListTest.java:31) å“¦å¼~ï¼ç«Ÿç„¶æŠ¥é”™äº†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯åœ¨ArrayList$SubList.checkForComodificatioæ–¹æ³•ä¸­æŠ¥çš„é”™ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š 12345private void checkForComodification() &#123; // æ¯”è¾ƒåŸåˆ—è¡¨ä¿®æ”¹æ¬¡æ•°å’ŒSubListçš„ä¿®æ”¹æ¬¡æ•°æ˜¯å¦ç›¸ç­‰ if (ArrayList.this.modCount != this.modCount) throw new ConcurrentModificationException();&#125; è¿™é‡ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè¯´æ˜è¿™ä¸¤ä¸ªæ•°æ˜¯ä¸ç›¸ç­‰çš„ï¼Œé‚£ä¸ºä»€ä¹ˆä¼šä¸ç›¸ç­‰å‘¢ï¼Ÿæˆ‘ä»¬çœ‹SubListçš„addæ–¹æ³•ä¸­æœ‰åŒæ­¥ä¸»ã€'å­â€™åˆ—è¡¨çš„è¯­å¥this.modCount = parent.modCount;ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ä¿®æ”¹subListçš„æ—¶å€™ï¼Œä¼šåŒæ­¥æ›´æ–°ä¸»åˆ—è¡¨çš„modCountï¼Œä»¥ä¿è¯ä¸»ã€'å­â€™åˆ—è¡¨å§‹ç»ˆæ˜¯ä¸€è‡´çš„ã€‚ ä½†æ˜¯æˆ‘ä»¬åœ¨ä¿®æ”¹ä¸»Listçš„æ—¶å€™æ˜¯ä¸ä¼šå»åŒæ­¥SubListçš„modCountçš„ï¼Œæˆ‘ä»¬è¾“å‡ºSubListçš„å®ä¾‹å®é™…ä¸Šå°±æ˜¯è°ƒç”¨iteratoræ–¹æ³•ï¼Œæœ€ç»ˆæ˜¯è°ƒç”¨äº†SubListçš„public ListIterator&lt;E&gt; listIterator(final int index)æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç¬¬ä¸€å¥å°±æ˜¯è°ƒç”¨checkForComodificationæ–¹æ³•æ£€æŸ¥modCountï¼Œè¿™é‡Œè‡ªç„¶å°±ä¼šæŠ¥é”™å’¯ï¼ 4. å¡«å‘ æ—¢ç„¶æœ‰å‘ï¼Œå°±æœ‰å¡«å‘çš„åŠæ³•ï¼Œä¸å¯èƒ½ä¸€ç›´æŠŠå‘æ”¾åœ¨é‚£ï¼Œæ˜¯å§ã€‚ å¦‚æœæ—¢æƒ³ä¿®æ”¹subListï¼Œåˆä¸æƒ³å½±å“åˆ°åŸlistã€‚é‚£ä¹ˆå¯ä»¥åˆ›å»ºä¸€ä¸ªæœºé‡subListçš„æ‹·è´: 123451.åˆ›å»ºæ–°çš„Listï¼š subList = Lists.newArrayList(subList);2.lambdaè¡¨è¾¾å¼ï¼š sourceList.stream().skip(fromIndex).limit(size).collect(Collectors.toList()); 5. æ€»ç»“ å¹¶ä¸æ˜¯è¯´ä½¿ç”¨SubListä¸€å®šä¸å¦¥ï¼Œæ–‡ç« å¼€å¤´æˆ‘ä»¬ä¹Ÿè¯´çš„æ˜¯æ…ç”¨ï¼Œæ‰€ä»¥ï¼Œæ ¹æ®å…·ä½“ä¸šåŠ¡è¿›è¡Œé€‰æ‹©å§ã€‚","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨::zsetç¯‡","slug":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”zsetç¯‡","date":"2019-11-08T04:55:00.000Z","updated":"2019-11-21T16:05:02.245Z","comments":true,"path":"2019/11/08/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”zsetç¯‡/","link":"","permalink":"http://luxiaowan.github.io/2019/11/08/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”zsetç¯‡/","excerpt":"","text":"Redisæœ‰6å¤§åŸºæœ¬ç±»å‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²(String)ã€åˆ—è¡¨(List)ã€é›†åˆ(set)ã€å“ˆå¸Œç»“æ„(hash)ã€æœ‰åºé›†åˆ(zset)å’ŒåŸºæ•°(HyperLogLog) redisåœ¨çº¿ä½“éªŒåœ°å€ï¼šhttp://try.redis.io/ æœ‰åºé›†åˆ(ZSet) ä»‹ç»: Redisçš„æœ‰åºé›†åˆå’Œé›†åˆä¸€æ ·æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²é›†åˆï¼Œä½†è¯¥é›†åˆæ˜¯æœ‰åºçš„ï¼Œä¸”é›†åˆå†…çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯é›†åˆå†…ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ ï¼Œä¸é›†åˆå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œæœ‰åºé›†åˆä¸­æ¯ä¸€ä¸ªå…ƒç´ éƒ½æœ‰ä¸€ä¸ªdoubleç±»å‹çš„scoreå±æ€§ï¼ŒRedisé€šè¿‡scoreçš„å¤§å°å¯¹å…ƒç´ è¿›è¡Œæ’åºçš„ã€‚æœ‰åºé›†åˆä¸­å…ƒç´ ä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å…ƒç´ çš„scoreå€¼å¯ä»¥é‡å¤ã€‚ å¸¸ç”¨äºåšæ’è¡Œæ¦œåŠŸèƒ½ã€‚ Redisä¸­çš„é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨æ¥å®ç°çš„ï¼Œæ‰€ä»¥è·å–é›†åˆä¸­å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚ åˆ›å»ºç¼“å­˜ åˆ›å»ºä¸€ä¸ªé›†åˆç¼“å­˜ï¼Œä¸ºé›†åˆæ–°å¢å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šzadd key score member [score member ...] ğŸŒ° 12345678zadd zk1 1 c 1 cc 1 ccc 2 cccc---åˆ›å»ºæœ‰åºé›†åˆzk1ï¼Œå…ƒç´ ä¸ºï¼škey: c, score: 1key: cc, score: 1key: ccc, score: 1key: cccc, score: 2 åˆ›å»ºä¸€ä¸ªå…ƒç´ æˆ–ä¿®æ”¹å…ƒç´ çš„scoreå€¼ï¼ˆä¸€æ¬¡åªèƒ½ä¿®æ”¹ä¸€ä¸ªå…ƒç´ ï¼‰ å‘½ä»¤æ ¼å¼ï¼šzincrby key increment member ğŸŒ° 123456zincrby zk1 1 cc---1. ä¸ºé›†åˆzk1çš„å…ƒç´ ccçš„scoreè¿›è¡Œ+1æ“ä½œ2. è‹¥é›†åˆzk1ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º3. è‹¥å…ƒç´ ccä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºï¼Œä¸”ccçš„scoreä¸º1 æŸ¥è¯¢ç¼“å­˜ æŸ¥è¯¢ç¼“å­˜ä¸­å…ƒç´ ä¸ªæ•° å‘½ä»¤æ ¼å¼ï¼šzcard key ğŸŒ° 1234zcard zk1---æŸ¥è¯¢é›†åˆzk1å†…çš„å…ƒç´ æ€»ä¸ªæ•° æŸ¥è¯¢é›†åˆæŒ‡å®šèŒƒå›´çš„å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šzrange key start stop [withscores] ğŸŒ° 12345678910111213141. è¿”å›å…ƒç´ åç§°zrange zk1 0 1---è¿”å›é›†åˆzk1ä¸­ä»ä¸‹æ ‡0åˆ°ä¸‹æ ‡1çš„å…ƒç´ åç§°ï¼Œstartå’Œstopéƒ½æ˜¯ä»0å¼€å§‹2. è¿”å›å…ƒç´ å’Œå…ƒç´ scorezrange zk1 0 -1 withscores---è¿”å›é›†åˆzk1ä¸­å…¨éƒ¨å…ƒç´ çš„åç§°å’Œåˆ†æ•°member1score1member2score2â˜…å¸¸ç”¨äºæŸ¥è¯¢æ’è¡Œæ¦œåŠåˆ†æ•° æŸ¥è¯¢é›†åˆä¸­æŸå…ƒç´ çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä»0å¼€å§‹ï¼‰ å‘½ä»¤æ ¼å¼ï¼šzrank key member ğŸŒ° 1234zrank zk1 c---è¿”å›å…ƒç´ cåœ¨é›†åˆzk1ä¸­çš„ä¸‹æ ‡ æŸ¥è¯¢é›†åˆä¸­æŸå…ƒç´ çš„åˆ†æ•° å‘½ä»¤æ ¼å¼ï¼šzscore key member ğŸŒ° 12345zscore zk1 c---æŸ¥è¯¢é›†åˆzk1ä¸­å…ƒç´ cçš„åˆ†æ•°â˜…å¸¸ç”¨äºç‚¹èµæ•°ç±»åˆ«æŸ¥è¯¢ç­‰ æŸ¥è¯¢é›†åˆä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´ ï¼ŒæŒ‰ç…§scoreä»å¤§åˆ°å°æ’åº å‘½ä»¤æ ¼å¼ï¼šzrevrange key start stop [withscores] ğŸŒ° 1234zrevrange zk1 0 3 withscore---è¿”å›é›†åˆzk1ä¸­ä»1~4ä½å…ƒç´ ï¼ŒæŒ‰ç…§scoreä»å¤§åˆ°å° æŸ¥è¯¢é›†åˆä¸­æŸå…ƒç´ çš„æ’å å‘½ä»¤æ ¼å¼ï¼šzrevrank key member ğŸŒ° 12345zrevrank zk1 c---è¿”å›å…ƒç´ cåœ¨é›†åˆzk1ä¸­çš„æ’åâ˜…å¸¸ç”¨äºåæ¬¡æŸ¥è¯¢ æŸ¥è¯¢æŒ‡å®šåˆ†æ•°èŒƒå›´å†…çš„å…ƒç´ ï¼Œå¯åˆ†é¡µ å‘½ä»¤æ ¼å¼ï¼šzrevrangebyscore key maxScore minScore [withscores] [limit offset count] ğŸŒ° 1234zrevrangebyscore zk1 3 2 withscores limit 0 1---åˆ†é¡µè¿”å›é›†åˆzk1ä¸­åˆ†æ•°ä»2~3çš„å…ƒç´  æŸ¥è¯¢æŒ‡å®šæˆå‘˜åŒºé—´å†…çš„æˆå‘˜ å‘½ä»¤æ ¼å¼ï¼šzrangebylex key minChar maxChar [limit offset count] ğŸŒ° 1234zrangebylex zk1 - (c1 limit 0 12---è¿”å›ä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°å…ƒç´ c1ä¹‹é—´çš„ä½ç½® æŒ‡ä»¤ æ˜¯å¦å¿…é¡» è¯´æ˜ ZRANGEBYLEX æ˜¯ æŒ‡ä»¤ key æ˜¯ æœ‰åºé›†åˆé”®åç§° minChar æ˜¯ å­—å…¸ä¸­æ’åºä½ç½®è¾ƒå°çš„æˆå‘˜,å¿…é¡»ä»¥â€[â€œ(åŒ…å«)å¼€å¤´,æˆ–è€…ä»¥â€(â€œ(ä¸åŒ…å«)å¼€å¤´,å¯ä½¿ç”¨â€-â€œä»£æ›¿ï¼Œ&quot;-&quot;è¡¨ç¤ºå–æœ€å°å€¼ maxChar æ˜¯ å­—å…¸ä¸­æ’åºä½ç½®è¾ƒå¤§çš„æˆå‘˜,å¿…é¡»ä»¥â€[â€œ(åŒ…å«)å¼€å¤´,æˆ–è€…ä»¥â€(â€œ(ä¸åŒ…å«)å¼€å¤´,å¯ä½¿ç”¨â€+â€ä»£æ›¿ï¼Œ&quot;+&quot;è¡¨ç¤ºå–æœ€å¤§å€¼ limit å¦ è¿”å›ç»“æœæ˜¯å¦åˆ†é¡µ,æŒ‡ä»¤ä¸­åŒ…å«LIMITåoffsetã€countå¿…é¡»è¾“å…¥ offset å¦ è¿”å›ç»“æœèµ·å§‹ä½ç½® count å¦ è¿”å›ç»“æœæ•°é‡ æŸ¥è¯¢æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„å…ƒç´ æ•° å‘½ä»¤æ ¼å¼ï¼šzcount key min max ğŸŒ° 12345zcount zk1 1 2---è¿”å›scoreå€¼ä¸º1~2çš„æ‰€æœ‰å…ƒç´ æ€»æ•°â˜…è®¡ç®—æ’è¡Œæ¦œä¸­æŸä¸€åˆ†æ•°åŒºé—´çš„æ•°é‡ æŸ¥è¯¢æŒ‡å®šå…ƒç´ åŒºé—´å†…çš„å…ƒç´ æ€»æ•° å‘½ä»¤æ ¼å¼ï¼šzlexcount key min max ğŸŒ° 1234zlexcount zk1 (c [cccc---æŸ¥è¯¢c~ccccä¹‹é—´çš„å…ƒç´ æ€»æ•°ï¼Œä¸åŒ…æ‹¬cï¼Œä½†åŒ…æ‹¬cccc ç§»é™¤ç¼“å­˜å…ƒç´  ç§»é™¤é›†åˆä¸­æŒ‡å®šçš„å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šzrem key member [member ...] ğŸŒ° 1234zrem zk1 cc c1---ç§»é™¤é›†åˆzk1ä¸­çš„å…ƒç´ ccã€c1 ç§»é™¤æŒ‡å®šå…ƒç´ åŒºé—´çš„æ‰€æœ‰æˆå‘˜ å‘½ä»¤æ ¼å¼ï¼šzremrangebylex key min max ğŸŒ° 1234zremrangebylex zk1 [c (ccc---ç§»é™¤é›†åˆzk1ä¸­å…ƒç´ cåˆ°å…ƒç´ cccä¹‹é—´çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬cï¼Œä½†ä¸åŒ…æ‹¬ccc ç§»é™¤æŒ‡å®šæ’ååŒºé—´æ‰€æœ‰æˆå‘˜ å‘½ä»¤æ ¼å¼ï¼šzremrangebyrank key start stop ğŸŒ° 1234zremrangebyrank zk1 0 1---ç§»é™¤é›†åˆzk1ä¸­0~1ä¸‹æ ‡çš„æ‰€æœ‰å…ƒç´  ç§»é™¤æŒ‡å®šåˆ†æ•°åŒºé—´æ‰€æœ‰æˆå‘˜ å‘½ä»¤æ ¼å¼ï¼šzremrangebyscore key min max ğŸŒ° 1234zremrangebyscore zk1 0 1---ç§»é™¤é›†åˆzk1ä¸­scoreå€¼ä¸º0~1çš„æ‰€æœ‰å…ƒç´  ç‰¹æ®Šæ“ä½œ è®¡ç®—å¤šä¸ªé›†åˆçš„å¹¶é›†ï¼Œå¹¶å­˜å…¥æ–°çš„é›†åˆ å‘½ä»¤æ ¼å¼ï¼šzunionstore destinationKey numkeys key[key ...] ğŸŒ° 1234zunionstore zku 2 zk1 zk2---åˆå¹¶é›†åˆzk1å’Œzk2ï¼Œå°†å¹¶é›†å­˜å…¥zkuï¼Œé›†åˆzkuä¸­å…ƒç´ çš„scoreä¸ºæ‰€æœ‰å‚ä¸è®¡ç®—çš„é›†åˆä¸­ç›¸åŒçš„å…ƒç´ çš„scoreä¹‹å’Œ","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"Javaå‘½ä»¤::jstat","slug":"Javaå‘½ä»¤â€”jstat","date":"2019-11-08T04:00:00.000Z","updated":"2019-11-10T15:57:22.417Z","comments":true,"path":"2019/11/08/Javaå‘½ä»¤â€”jstat/","link":"","permalink":"http://luxiaowan.github.io/2019/11/08/Javaå‘½ä»¤â€”jstat/","excerpt":"","text":"jstatæ˜¯ç”¨äºç›‘æ§è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¾ç¤ºè™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»è£…è½½ã€å†…å­˜ä½¿ç”¨ã€GCæƒ…å†µã€JITç¼–è¯‘ç­‰è¿è¡ŒçŠ¶æ€æ•°æ®ï¼Œèƒ½å¤Ÿåœ¨Linuxä¸Šå¿«é€Ÿå®šä½è™šæ‹Ÿæœºæ€§èƒ½é—®é¢˜ã€‚ jstatå‘½ä»¤åœ¨jdkçš„binç›®å½•ä¸‹ï¼Œç›®å½•ä¸­è¿˜æœ‰å¾ˆå¤šå®ç”¨çš„å‘½ä»¤ *ä»¥ä¸‹åˆ†ææ˜¯åŸºäºjdk1.8+ jstatå‘½ä»¤æ ¼å¼ï¼š 123456789jstat -&lt;option&gt; &lt;pid&gt; [&lt;interval&gt; [&lt;count&gt;]]--- option: éœ€è¦æŸ¥çœ‹çš„è™šæ‹Ÿæœºä¿¡æ¯ pid: Javaç¨‹åºè¿›ç¨‹å· æœ¬åœ°è™šæ‹Ÿæœº: pid è¿œç¨‹è™šæ‹Ÿæœº: [protocol:][//] lvmid [@hostname[:port]/servername] interval: ç›‘æ§é—´éš”æ—¶é—´ï¼Œå¯é€‰ï¼Œé»˜è®¤ç«‹åˆ»æ‰§è¡Œä¸€æ¬¡ count: ç›‘æ§æ¬¡æ•°ï¼Œå¯é€‰ï¼Œé»˜è®¤æ— é™æ¬¡ option è¯´æ˜ class æŸ¥çœ‹ç±»è£…è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´åŠç±»è£…è½½æ‰€è€—æ—¶é—´ gc æŸ¥çœ‹Javaå †çŠ¶å†µï¼ŒåŒ…æ‹¬Edenã€survivorã€è€å¹´ä»£ã€æ°¸ä¹…ä»£çš„å®¹é‡ gcutil ç±»ä¼¼äºgcï¼Œä¸»è¦è¾“å‡ºå„åŒºåŸŸç©ºé—´ä½¿ç”¨å æ¯” gccause åŒgcï¼Œä¼šå¤šè¾“å‡ºæ¯æ¬¡gcçš„åŸå›  gccapacity åŒgcï¼Œä½†è¾“å‡ºçš„ä¸»è¦æ˜¯Javaå †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ gcnew æŸ¥çœ‹æ–°ç”Ÿä»£çš„ä½¿ç”¨æƒ…å†µ gcnewcapacity åŒgcnewï¼Œè¾“å‡ºå†…å®¹ä¸»è¦å…³æ³¨æ–°ç”Ÿä»£çš„æœ€å¤§ã€æœ€å°ç©ºé—´ gcold æŸ¥çœ‹è€å¹´ä»£çš„ä½¿ç”¨æƒ…å†µ gcoldcapacity åŒgcoldï¼Œè¾“å‡ºå†…å®¹ä¸»è¦å…³æ³¨è€å¹´ä»£çš„æœ€å¤§ã€æœ€å°ç©ºé—´ gcpermcapacity è¾“å‡ºæ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ compiler è¾“å‡ºJITç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ã€è€—æ—¶ç­‰ä¿¡æ¯ printcompilation è¾“å‡ºå·²ç»è¢«JITç¼–è¯‘çš„æ–¹æ³• ğŸŒ° jstat -class : æ˜¾ç¤ºåŠ è½½classçš„æ•°é‡åŠæ‰€å ç©ºé—´ç­‰ä¿¡æ¯ 12345678910[root@master0 ~]# jstat -class 19080Loaded Bytes Unloaded Bytes Time 11512 22276.9 268 421.6 18.41 ---Loaded: è£…è½½ç±»çš„æ•°é‡Bytes: è£…è½½ç±»æ‰€å ç”¨çš„å­—èŠ‚æ•°Unloaded: å¸è½½ç±»çš„æ•°é‡Bytes: å¸è½½ç±»æ‰€å ç”¨çš„å­—èŠ‚æ•°Time: è£…è½½å’Œå¸è½½ç±»æ‰€èŠ±è´¹çš„æ—¶é—´ jstat -gc : æ˜¾ç¤ºgcçš„ä¿¡æ¯ï¼ŒæŸ¥çœ‹gcçš„æ¬¡æ•°å’Œæ—¶é—´ 1234567891011121314151617181920212223ï¼Œç­‰äºYGCT + FGCT[root@master0 ~]# jstat -gc 19080 1000 1 S0C S1C S0U S1U EC EU OC OU MC MU CCSC CCSU YGC YGCT FGC FGCT GCT 6656.0 6656.0 0.0 3761.4 94208.0 51469.2 73728.0 50832.0 - - - - 20207 92.896 37 7.833 100.729---[å®¹é‡ä¸ºå­—èŠ‚]S0C: å¹´è½»ä»£ç¬¬ä¸€ä¸ªsurvivoråŒºçš„æ€»å®¹é‡ï¼ˆsurvivor 0 capacityï¼‰S1C: å¹´è½»ä»£ç¬¬äºŒä¸ªsurvivoråŒºçš„æ€»å®¹é‡ï¼ˆsurvivor 1 capacityï¼‰S0U: å¹´è½»ä»£ç¬¬ä¸€ä¸ªsurvivoråŒºçš„å·²ä½¿ç”¨å®¹é‡ï¼ˆsurvivor 0 usingï¼‰S1U: å¹´è½»ä»£ç¬¬äºŒä¸ªsurvivoråŒºçš„å·²ä½¿ç”¨å®¹é‡ï¼ˆsurvivor 1 usingï¼‰EC: å¹´è½»ä»£EdenåŒºçš„æ€»å®¹é‡ï¼ˆEden capacityï¼‰EU: å¹´è½»ä»£EdenåŒºçš„å·²ä½¿ç”¨å®¹é‡ï¼ˆEden usingï¼‰OC: è€å¹´ä»£çš„æ€»å®¹é‡ï¼ˆOld capacityï¼‰OU: è€å¹´ä»£å·²ä½¿ç”¨çš„å®¹é‡ï¼ˆOld usingï¼‰MC: Metaspaceçš„æ€»å®¹é‡, jdk1.8+MU: Metaspaceå·²ä½¿ç”¨çš„å®¹é‡, jdk1.8+CCSC:å‹ç¼©ç±»ç©ºé—´å®¹é‡, jdk1.8+CCSU:å‹ç¼©ç±»ç©ºé—´å·²ä½¿ç”¨çš„å®¹é‡, jdk1.8+YGC: æœåŠ¡å¯åŠ¨è‡³ä»Šå¹´è½»ä»£gcçš„æ¬¡æ•°ï¼ˆyoung gcï¼‰YGCT: æœåŠ¡å¯åŠ¨è‡³ä»Šå¹´è½»ä»£gcä½¿ç”¨çš„æ—¶é—´ï¼Œç§’ï¼ˆyoung gc timeï¼‰FGC: æœåŠ¡å¯åŠ¨è‡³ä»Šfullgcçš„æ¬¡æ•°FGCT: æœåŠ¡å¯åŠ¨è‡³ä»Šfullgcä½¿ç”¨çš„æ—¶é—´ï¼Œç§’GCT: æœåŠ¡å¯åŠ¨è‡³ä»Šgcç”¨çš„æ€»æ—¶é—´ï¼Œç§’ï¼Œç­‰äºYGCT + FGCT jstat -gcutil : ç»Ÿè®¡gcä¿¡æ¯ 123456789101112131415161718[root@master0 ~]# jstat -gcutil 19080 1000 3 S0 S1 E O M CCS YGC YGCT FGC FGCT GCT 0.00 48.90 20.83 69.35 - - 20221 93.006 37 7.833 100.838 0.00 48.90 20.83 69.35 - - 20221 93.006 37 7.833 100.838 0.00 48.90 20.83 69.35 - - 20221 93.006 37 7.833 100.838---S0: å¹´è½»ä»£ç¬¬ä¸€ä¸ªsurvivorå·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹S1: å¹´è½»ä»£ç¬¬äºŒä¸ªsurvivorå·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹E: å¹´è½»ä»£EdenåŒºå·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹O: è€å¹´ä»£å·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹M: å…ƒç©ºé—´å·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹CCS: å‹ç¼©ç±»ç©ºé—´å·²ä½¿ç”¨å®¹é‡æ¯”ä¾‹YGC: æœåŠ¡å¯åŠ¨è‡³ä»Šå¹´è½»ä»£gcæ¬¡æ•°YGCT: æœåŠ¡å¯åŠ¨è‡³ä»Šå¹´è½»ä»£gcæ‰€å ç”¨æ—¶é—´ï¼Œç§’FGC: æœåŠ¡å¯åŠ¨è‡³ä»Šfullgcæ¬¡æ•°FGCT: æœåŠ¡å¯åŠ¨è‡³ä»Šfullgcæ‰€å ç”¨æ—¶é—´ï¼Œç§’GCT: æœåŠ¡å¯åŠ¨è‡³ä»Šgcæ€»å ç”¨æ—¶é—´ï¼Œç§’ï¼Œç­‰äºYGCT + FGCT jstat -gccause : æŸ¥çœ‹gcåŸå›  12345678[root@master0 ~]# jstat -gccause 19080 S0 S1 E O M CCS YGC YGCT FGC FGCT GCT LGCC GCC 57.32 0.00 13.35 69.36 - - 20222 93.015 37 7.833 100.848 Allocation Failure No GC ---ä¸Šè¿°å¯ä»¥çœ‹åˆ°æ¯”-gcutilå¤šå¤„äº†ä¸€ä¸ªLGCCå’ŒGCCLGCC: æœ€è¿‘ä¸€æ¬¡gcå‘ç”Ÿçš„åŸå› ï¼ˆlast gc causeï¼‰GCC: å½“å‰gcå‘ç”Ÿçš„åŸå›  jstat -gccapacity : æŸ¥çœ‹è™šæ‹Ÿæœºä¸­å¯¹è±¡çš„ä½¿ç”¨å’Œå®¹é‡å¤§å° 12345678910[root@master0 ~]# jstat -gccapacity 19080 NGCMN NGCMX NGC S0C S1C EC OGCMN OGCMX OGC OC MCMN MCMX MC CCSMN CCSMX CCSC YGC FGC 20480.0 323584.0 112640.0 7680.0 6656.0 96768.0 40448.0 647168.0 73728.0 73728.0 - - - - - - 20223 37---[å®¹é‡å•ä½ä¸ºå­—èŠ‚]NGCå¼€å¤´çš„è¡¨ç¤ºï¼šæ–°ç”Ÿä»£ç©ºé—´å®¹é‡OGCå¼€å¤´çš„è¡¨ç¤ºï¼šè€å¹´ä»£ç©ºé—´å®¹é‡MCå¼€å¤´çš„è¡¨ç¤ºï¼šå…ƒç©ºé—´å®¹é‡ï¼ˆMetaspace capacityï¼‰CCSå¼€å¤´çš„è¡¨ç¤ºï¼šç±»å‹ç¼©ç©ºé—´ jstat -gcnew : æŸ¥çœ‹æ–°ç”Ÿä»£gcæƒ…å†µ 123456789[root@master0 ~]# jstat -gcnew 19080 S0C S1C S0U S1U TT MTT DSS EC EU YGC YGCT 7680.0 6656.0 0.0 6354.4 15 15 7680.0 96768.0 95634.9 20223 93.023---[å®¹é‡å•ä½ä¸ºå­—èŠ‚]TT: è€å¹´åŒ–é˜ˆå€¼ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå¯¹è±¡æŒæœ‰æ¬¡æ•°ï¼Œå°±æ˜¯åœ¨è¢«ç§»åŠ¨åˆ°è€å¹´ä»£ä¹‹å‰ï¼Œåœ¨æ–°ç”Ÿä»£ä¸­å­˜æ´»çš„æ¬¡æ•°MTT: æœ€å¤§è€å¹´åŒ–é˜ˆå€¼DSS: SurvivoråŒºæ‰€éœ€ç©ºé—´å¤§å° jstat -gcnewcapacity : æŸ¥çœ‹æ–°ç”Ÿä»£ç©ºé—´å®¹é‡ 123456789101112[root@master0 ~]# jstat -gcnewcapacity 19080 NGCMN NGCMX NGC S0CMX S0C S1CMX S1C ECMX EC YGC FGC 20480.0 323584.0 112128.0 107520.0 7168.0 107520.0 7168.0 322560.0 97280.0 20225 37---[å®¹é‡å•ä½ä¸ºå­—èŠ‚]MNè¡¨ç¤ºï¼šæœ€å°MXè¡¨ç¤ºï¼šæœ€å¤§NGCå¼€å¤´è¡¨ç¤ºï¼šæ–°ç”Ÿä»£ç©ºé—´æ€»å®¹é‡S0Cå¼€å¤´ï¼šæ–°ç”Ÿä»£ç¬¬ä¸€ä¸ªsurvivoråŒºå®¹é‡S1Cå¼€å¤´ï¼šæ–°ç”Ÿä»£ç¬¬äºŒä¸ªsurvivoråŒºå®¹é‡ECå¼€å¤´ï¼šæ–°ç”Ÿä»£EdenåŒºå®¹é‡ jstat -gcold : æŸ¥çœ‹è€å¹´ä»£gcæƒ…å†µ 1234567[root@master0 ~]# jstat -gcold 19080 1000 MC MU CCSC CCSU OC OU YGC FGC FGCT GCT - - - - 73728.0 51144.0 20234 37 7.833 100.943 - - - - 73728.0 51144.0 20234 37 7.833 100.943---[å®¹é‡å•ä½ä¸ºå­—èŠ‚] jstat -gcoldcapacity : æŸ¥çœ‹è€å¹´ä»£å®¹é‡ 1234[root@master0 ~]# jstat -gcoldcapacity 19080 100 2 OGCMN OGCMX OGC OC YGC FGC FGCT GCT 40448.0 647168.0 73728.0 73728.0 20235 37 7.833 100.949 40448.0 647168.0 73728.0 73728.0 20235 37 7.833 100.949 jstat -gcpermcapacity : æŸ¥çœ‹permä¸­å¯¹è±¡çš„ä¿¡æ¯å’Œå®¹é‡ 1jdk1.8+ä»¥ä¸Šå»é™¤äº†è¯¥å‘½ä»¤ï¼Œå¦‚æœä½ å½“å‰ä½¿ç”¨çš„æ˜¯jdk1.7-ï¼Œé‚£ä¹ˆè‡ªè¡Œè°·æ­Œå§ jstat -compiler : æŸ¥çœ‹è™šæ‹Ÿæœºå®æ—¶ç¼–è¯‘çš„ä¿¡æ¯ 1234567891011[root@master0 ~]# jstat -compiler 19080Compiled Failed Invalid Time FailedType FailedMethod 2737 0 0 41.90 0 ---Compiled: ç¼–è¯‘ä»»åŠ¡æ‰§è¡Œæ•°é‡Failed: ç¼–è¯‘ä»»åŠ¡æ‰§è¡Œå¤±è´¥æ•°é‡Invalid: ç¼–è¯‘ä»»åŠ¡æ‰§è¡Œå¤±æ•ˆæ•°é‡Time: ç¼–è¯‘ä»»åŠ¡æ¶ˆè€—çš„æ—¶é—´FailedType: æœ€åä¸€ä¸ªç¼–è¯‘å¤±è´¥ä»»åŠ¡çš„ç±»å‹FailedMethod: æœ€åä¸€ä¸ªç¼–è¯‘å¤±è´¥çš„ä»»åŠ¡æ‰€åœ¨ç±»åŠæ–¹æ³• jstat -printcompilation : æŸ¥çœ‹è™šæ‹Ÿæœºå·²ç»ç¼–è¯‘è¿‡çš„æ–¹æ³• 123456789[root@master0 ~]# jstat -printcompilation 19080Compiled Size Type Method 2737 1562 1 sun/misc/FloatingDecimal dtoa---Compiled: ç¼–è¯‘ä»»åŠ¡çš„æ•°é‡Size: æ–¹æ³•ç”Ÿæˆå­—èŠ‚ç çš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰Type: ç¼–è¯‘ç±»å‹Method: ç±»åå’Œæ–¹æ³•åç”¨æ¥æ ‡è¯†ç¼–è¯‘çš„æ–¹æ³•","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[]},{"title":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨::listç¯‡","slug":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”listç¯‡","date":"2019-10-31T04:55:00.000Z","updated":"2019-10-31T17:23:56.890Z","comments":true,"path":"2019/10/31/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”listç¯‡/","link":"","permalink":"http://luxiaowan.github.io/2019/10/31/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”listç¯‡/","excerpt":"","text":"Redisæœ‰6å¤§åŸºæœ¬ç±»å‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²(String)ã€åˆ—è¡¨(List)ã€é›†åˆ(set)ã€å“ˆå¸Œç»“æ„(hash)ã€æœ‰åºé›†åˆ(zset)å’ŒåŸºæ•°(HyperLogLog) redisåœ¨çº¿ä½“éªŒåœ°å€ï¼šhttp://try.redis.io/ åˆ—è¡¨(List) ä»‹ç»: Redisçš„åˆ—è¡¨å°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾€åˆ—è¡¨çš„å¤´éƒ¨å’Œå°¾éƒ¨æ·»åŠ æ–°æ•°æ®ï¼Œè¦å¯ä»¥æ ¹æ®ä¸‹æ ‡ä¿®æ”¹ä¸‹æ ‡å¯¹åº”çš„å€¼ï¼Œåˆ—è¡¨æ˜¯æŒ‰ç…§æ’å…¥é¡ºåºæœ‰åºçš„ï¼ˆæŒ‰æ’å…¥é¡ºåºå€’åºï¼Œç±»ä¼¼äºæ ˆï¼‰ï¼Œå¹¶ä¸”åˆ—è¡¨å¯ä»¥å‡ºç°é‡å¤æ•°æ®ã€‚å¯ä»¥åšæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯å¯èƒ½éœ€è¦æ¶ˆæ¯å»é‡(åé¢æœ‰æ›´ç‰›çš„)ã€‚ åˆ›å»ºç¼“å­˜ åˆ›å»ºä¸€ä¸ªåˆ—è¡¨ç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šlpush key value [value ...] ğŸŒ° 1234lpush c1 1 2 3 4 5 6 7 8 9---å°†1~9æ”¾å…¥c1åˆ—è¡¨ä¸­ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º9 8 7 6 5 4 3 2 1 å‘åˆ—è¡¨å·¦ä¾§æ–°å¢å€¼ å‘½ä»¤æ ¼å¼ï¼šlpush key value [value ...] ğŸŒ° 1234lpush c1 10---å°†10æ”¾å…¥åˆ°c1åˆ—è¡¨å¤´éƒ¨ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 1 å‘åˆ—è¡¨å³ä¾§æ–°å¢å€¼ å‘½ä»¤æ ¼å¼ï¼šrpush key value [value ...] ğŸŒ° 1234rpush c1 0---å°†0æ”¾å…¥åˆ°c1åˆ—è¡¨å°¾éƒ¨ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 1 0 ä»¥ä¸Šä¸¤ä¸ªå‘½ä»¤å¾ˆå®¹æ˜“ç†è§£ï¼Œlpushâ€”&gt;left push, rpushâ€”&gt;right push åœ¨åˆ—è¡¨æŒ‡å®šå…ƒç´ å‰/åæ’å…¥æ•°æ® å‘½ä»¤æ ¼å¼ï¼šlinsert key BEFORE|AFTER pivot value ğŸŒ° 123456789101112131415161718192021221) linsert c1 after 0 -1---å°†-1æ’å…¥åˆ°å…ƒç´ å€¼0ä¹‹å‰ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 1 0 -12)linsert c1 before 0 1---å°†1æ’å…¥åˆ°å…ƒç´ å€¼0ä¹‹å‰ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 1 1 0 -13)linsert c1 before 1 3---å°†3æ’å…¥åˆ°å…ƒç´ å€¼1ä¹‹å‰ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 3 1 1 0 -14)linsert c1 after 1 4---å°†4æ’å…¥åˆ°å…ƒç´ å€¼1ä¹‹åï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º10 9 8 7 6 5 4 3 2 3 1 4 1 0 -15)linsert c1 after 99 100---å¤±è´¥** ç”±3ã€4æ“ä½œå¯ä»¥å¾—å‡ºç»“è®ºï¼Œå½“æ‰§è¡ŒlinsertæŒ‡ä»¤æ—¶ï¼Œåˆ—è¡¨æ˜¯ä»å¤´éƒ¨å¼€å§‹è¿›è¡Œéå†ï¼Œç›´åˆ°æŸ¥è¯¢åˆ°ä¸pivotå…ƒç´ ç›¸åŒçš„å€¼æ—¶åœæ­¢ï¼Œæ ¹æ®AFTERã€BEFOREé€‰æ‹©æ˜¯æ’å…¥åˆ°å…ƒç´ åè¿˜æ˜¯å…ƒç´ å‰ï¼Œæ‰€ä»¥åˆ’é‡ç‚¹ï¼šè‹¥åˆ—è¡¨ä¸­å­˜åœ¨pivotçš„é‡å¤å…ƒç´ ï¼Œlinsertåªä¼šä»¥ç¬¬ä¸€ä¸ªéå†åˆ°çš„å…ƒç´ ä¸ºå‡†** ç”±5å¯ä»¥å¾—å‡ºç»“è®ºï¼Œè‹¥æŒ‡å®šçš„pivotå…ƒç´ ä¸å­˜åœ¨äºåˆ—è¡¨ä¸­ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•è®¾ç½® é€šè¿‡ç´¢å¼•ä¸‹æ ‡è®¾ç½®å€¼ å‘½ä»¤æ ¼å¼ï¼šlset key index value ğŸŒ° 12345671)lset c1 0 21---å°†ä¸‹æ ‡ä¸º0çš„å…ƒç´ ä¿®æ”¹ä¸º21ï¼Œæ­¤æ—¶åˆ—è¡¨ä¸­å­˜å‚¨é¡ºåºä¸º21 9 8 7 6 5 4 3 2 3 1 4 1 0 -12)lset c1 99 99---ERR index out of range,è¯´æ˜é€šè¿‡lsetå‘½ä»¤ï¼Œä¸èƒ½è¶Šç•Œä¿®æ”¹å…ƒç´  å‘å·²å­˜åœ¨çš„åˆ—è¡¨å¤´éƒ¨æ·»åŠ å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlpushx key value [value ...] ğŸŒ° 12345671)lpushx c1 22 23 24---å°†22ã€23ã€24æ·»åŠ åˆ°åˆ—è¡¨c1å¤´éƒ¨ï¼Œåˆ—è¡¨å˜ä¸ºï¼š24 23 22 21 9 8 7 6 5 4 3 2 3 1 4 1 0 -12)lpushx c2 1 2 3---å› ä¸ºåˆ—è¡¨c2ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è®¾ç½®å¤±è´¥ï¼Œæ­¤æ—¶ä½¿ç”¨lrangeæŸ¥çœ‹c2ä¼šè¿”å›ç©º å‘å·²å­˜åœ¨çš„åˆ—è¡¨å°¾éƒ¨æ·»åŠ å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šrpushx key value [value ...] ğŸŒ° 12345671)rpushx c1 -2 -3---å°†-2ã€-3æ·»åŠ åˆ°åˆ—è¡¨c1å°¾éƒ¨ï¼Œåˆ—è¡¨å˜ä¸ºï¼š24 23 22 21 9 8 7 6 5 4 3 2 3 1 4 1 0 -1 -2 -32)rpushx c2 1 2 3---å› ä¸ºåˆ—è¡¨c2ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è®¾ç½®å¤±è´¥ï¼Œæ­¤æ—¶ä½¿ç”¨lrangeæŸ¥çœ‹c2ä¼šè¿”å›ç©º æˆªå–åˆ—è¡¨ å‘½ä»¤æ ¼å¼ï¼šltrim key start end ğŸŒ° 123ltrim c1 4 16---åˆ—è¡¨ä¸‹æ ‡ä»0å¼€å§‹ï¼Œæˆªå–5~17ä½çš„å…ƒç´ ï¼Œåˆ—è¡¨c1å˜ä¸ºï¼š9 8 7 6 5 4 3 2 3 1 4 1 0 æŸ¥çœ‹ç¼“å­˜ æŸ¥çœ‹åˆ—è¡¨å†…æ‰€æœ‰å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlrange key 0 -1 ğŸŒ° 1234lrange c1 0 -1---è·å–åˆ—è¡¨c1çš„æ‰€æœ‰å…ƒç´  æŸ¥çœ‹åˆ—è¡¨æŸä¸€èŒƒå›´å†…çš„å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlrange key start end ğŸŒ° 1234lrange c1 1 3---æŸ¥çœ‹åˆ—è¡¨c1ä¸­å¼Ÿ2~4ä½ä¸Šçš„å…ƒç´  å¼¹å‡ºåˆ—è¡¨å¤´éƒ¨å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlpop key ğŸŒ° 1234lpop c1---å¼¹å‡ºåˆ—è¡¨c1çš„å¤´éƒ¨å…ƒç´ 9ï¼Œæ­¤æ—¶åˆ—è¡¨c1å˜ä¸ºï¼š8 7 6 5 4 3 2 3 1 4 1 0ï¼Œå¤´éƒ¨çš„9å·²ç»æ²¡æœ‰äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆé€‚åˆåšæ¶ˆæ¯é˜Ÿåˆ— å¼¹å‡ºåˆ—è¡¨å°¾éƒ¨å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šrpop key ğŸŒ° 1234rpop c1---å¼¹å‡ºc1çš„å°¾éƒ¨å…ƒç´ 0ï¼Œæ­¤æ—¶åˆ—è¡¨c1å˜ä¸ºï¼š8 7 6 5 4 3 2 3 1 4 1ï¼Œå°¾éƒ¨çš„0å·²ç»æ²¡æœ‰äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆé€‚åˆåšæ¶ˆæ¯é˜Ÿåˆ—ğŸ‘€ å¼¹å‡ºåˆ—è¡¨å¤´éƒ¨å…ƒç´ ï¼Œè‹¥å½“å‰åˆ—è¡¨å†…æ— å…ƒç´ ï¼Œåˆ™é˜»å¡ï¼Œç›´åˆ°è·å–åˆ°æˆ–è¾¾åˆ°è¶…æ—¶æ—¶é—´ å‘½ä»¤æ ¼å¼ï¼šblpop key [key ...] timeout timeoutå•ä½ä¸º***ç§’*** ğŸŒ° 12345blpop c1 c2 c3 10---å¼¹å‡ºåˆ—è¡¨c1æˆ–åˆ—è¡¨c2/c3çš„å¤´éƒ¨å…ƒç´ ï¼Œåªè¦c1ã€c2ã€c3æœ‰ä¸€ä¸ªåˆ—è¡¨ä¸­æœ‰å…ƒç´ è¢«å¼¹å‡ºï¼Œåˆ™ç»“æŸé˜»å¡è‹¥c1ã€c2ã€c3å‡æœ‰å…ƒç´ ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³å¼¹å‡ºæ¡ä»¶çš„åˆ—è¡¨ï¼Œç„¶åç»“æŸé˜»å¡ å¼¹å‡ºåˆ—è¡¨å°¾éƒ¨å…ƒç´ ï¼Œè‹¥å½“å‰åˆ—è¡¨å†…æ— å…ƒç´ ï¼Œåˆ™é˜»å¡ï¼Œç›´åˆ°è·å–åˆ°æˆ–è¾¾åˆ°è¶…æ—¶æ—¶é—´ å‘½ä»¤æ ¼å¼ï¼šbrpop key [key ...] timeout timeoutå•ä½ä¸º***ç§’*** ğŸŒ° 12345blpop c1 c2 c3 10---å¼¹å‡ºåˆ—è¡¨c1æˆ–åˆ—è¡¨c2/c3çš„å°¾éƒ¨å…ƒç´ ï¼Œåªè¦c1ã€c2ã€c3æœ‰ä¸€ä¸ªåˆ—è¡¨ä¸­æœ‰å…ƒç´ è¢«å¼¹å‡ºï¼Œåˆ™ç»“æŸé˜»å¡è‹¥c1ã€c2ã€c3å‡æœ‰å…ƒç´ ï¼Œåˆ™è¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³å¼¹å‡ºæ¡ä»¶çš„åˆ—è¡¨ï¼Œç„¶åç»“æŸé˜»å¡ è·å–åˆ—è¡¨æŒ‡å®šä½ç½®çš„å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlindex key index ğŸŒ° 12345671)lindex c1 2---è¿”å›åˆ—è¡¨c1ä¸­ä¸‹æ ‡ä¸º2çš„å…ƒç´ ï¼Œä»…ä»…è¿”å›æ•°æ®ï¼Œä¸å¼¹å‡ºï¼Œæ—¶é—´å¤æ‚åº¦O(1)2)lindex c1 -1---è¿”å›åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ ã€‚åˆ—è¡¨å…ƒç´ ä¸‹æ ‡-1ä»£è¡¨åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥åˆ—è¡¨æ˜¯å¯ä»¥é€šè¿‡è´Ÿæ•°ä¸‹æ ‡ä»åå¾€å‰éå† å¼¹å‡ºä¸€ä¸ªåˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨å¤´éƒ¨ï¼Œå¹¶è¿”å›è¿™ä¸ªå…ƒç´ â€”â€”æ— é˜»å¡ å‘½ä»¤æ ¼å¼ï¼šrpoplpush source_key destination_key ğŸŒ° 1234rpoplpush c1 c2---å¼¹å‡ºåˆ—è¡¨c1çš„å°¾éƒ¨å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨c2çš„å¤´éƒ¨ï¼Œè‹¥c1ä¸ºç©ºï¼Œåˆ™è¿”å›nilï¼Œä½†ä¸æ’å…¥åˆ°c2ä¸­ï¼Œæ˜¯ä¸æ˜¯æ›´é€‚åˆåšé˜Ÿåˆ— å¼¹å‡ºä¸€ä¸ªåˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨å¤´éƒ¨ï¼Œå¹¶è¿”å›è¿™ä¸ªå…ƒç´ â€”â€”é˜»å¡ å‘½ä»¤æ ¼å¼ï¼šbrpoplpush source_key destination_key timeout timeoutå•ä½ä¸º***ç§’*** ğŸŒ° 1234brpoplpush c3 c2 10---å¼¹å‡ºåˆ—è¡¨c3çš„å°¾éƒ¨å…ƒç´ æ’å…¥åˆ°åˆ—è¡¨c2çš„å¤´éƒ¨ï¼Œè‹¥c3ä¸ºç©ºï¼Œåˆ™é˜»å¡ç­‰åˆ°åˆ—è¡¨c3ä¸­æœ‰å€¼ï¼Œå¦åˆ™ç­‰åˆ°äº†10ç§’åç»“æŸé˜»å¡è¿”å›nilï¼Œæ˜¯ä¸æ˜¯æ›´é€‚åˆåšé˜»å¡é˜Ÿåˆ— å…¶ä»–å‘½ä»¤ åˆ é™¤æŒ‡å®šèŒƒå›´å†…ç­‰äºæŸä¸ªå€¼çš„æ‰€æœ‰å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šlrem key index element ğŸŒ° 1234567891011121314151)lrem c1 -2 3---ç§»é™¤åˆ—è¡¨c1ä¸­ï¼Œä»å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ°åˆ—è¡¨å¤´éƒ¨èŒƒå›´å†…æ‰€æœ‰çš„32)lrem c1 3 2---ç§»é™¤åˆ—è¡¨c1ä¸­ï¼Œä»ç¬¬å››ä½å…ƒç´ åˆ°å°¾éƒ¨èŒƒå›´å†…æ‰€æœ‰çš„23)lrem c1 0 1---ç§»é™¤åˆ—è¡¨c1ä¸­æ‰€æœ‰çš„14)lrem c1 -1 4---ç§»é™¤åˆ—è¡¨c1ä¸­æ‰€æœ‰çš„4 æŸ¥çœ‹åˆ—è¡¨é•¿åº¦ å‘½ä»¤æ ¼å¼ï¼šllen key ğŸŒ° 1234llen c1---æŸ¥çœ‹åˆ—è¡¨c1çš„æ€»é•¿åº¦ï¼Œè‹¥c1ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›0ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè®°ä½ï¼Œè‹¥åˆ—è¡¨ä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨::setç¯‡","slug":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”setç¯‡","date":"2019-10-31T04:55:00.000Z","updated":"2019-11-10T15:57:22.418Z","comments":true,"path":"2019/10/31/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”setç¯‡/","link":"","permalink":"http://luxiaowan.github.io/2019/10/31/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”setç¯‡/","excerpt":"","text":"Redisæœ‰6å¤§åŸºæœ¬ç±»å‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²(String)ã€åˆ—è¡¨(List)ã€é›†åˆ(set)ã€å“ˆå¸Œç»“æ„(hash)ã€æœ‰åºé›†åˆ(zset)å’ŒåŸºæ•°(HyperLogLog) redisåœ¨çº¿ä½“éªŒåœ°å€ï¼šhttp://try.redis.io/ é›†åˆ(Set) ä»‹ç»: Redisçš„é›†åˆå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²é›†åˆï¼Œè¯¥é›†åˆæ˜¯æ— åºçš„ï¼Œä¸”é›†åˆå†…çš„å…ƒç´ éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå°±æ˜¯é›†åˆå†…ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ ã€‚Redisä¸­çš„é›†åˆæ˜¯é€šè¿‡å“ˆå¸Œè¡¨æ¥å®ç°çš„ï¼Œæ‰€ä»¥è·å–é›†åˆä¸­å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚ åˆ›å»ºç¼“å­˜ åˆ›å»ºä¸€ä¸ªé›†åˆç¼“å­˜ï¼Œä¸ºé›†åˆæ–°å¢å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šsadd key member [member ...] ğŸŒ° 1234sadd s1 1 2 3 0 -1 redis mongodb zookeeper---åˆ›å»ºé›†åˆs1,å…ƒç´ ä¸ºï¼š1 2 3 0 -1 redis mongodb zookeeper ç§»é™¤å…ƒç´  éšæœºç§»é™¤é›†åˆä¸­çš„ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›è¿™ä¸ªå…ƒç´  å‘½ä»¤æ ¼å¼ï¼šspop key ğŸŒ° 1234spop s1---ç§»é™¤ä¹‹åï¼Œé›†åˆs1ä¸­å°±æ²¡æœ‰è¿™ä¸ªå…ƒç´ äº† æŒ‡å®šç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  å‘½ä»¤æ ¼å¼ï¼šsrem key member [member ...] ğŸŒ° 1234srem s1 -1 0 99---å°†å…ƒç´ -1ã€0ã€99ä»é›†åˆs1ä¸­ç§»é™¤ï¼Œä»…ç§»é™¤é›†åˆä¸­å­˜åœ¨çš„å…ƒç´  æŸ¥è¯¢é›†åˆ æŸ¥è¯¢é›†åˆä¸­å…ƒç´ ä¸ªæ•° å‘½ä»¤æ ¼å¼ï¼šscard key ğŸŒ° 1234scard s1---è¿”å›é›†åˆs1ä¸­å…ƒç´ æ€»ä¸ªæ•° è¿”å›é›†åˆä¸­æ‰€æœ‰å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šsmembers key ğŸŒ° 1234smembers s1---è¿”å›é›†åˆs1ä¸­æ‰€æœ‰çš„å…ƒç´  éšæœºè¿”å›é›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  å‘½ä»¤æ ¼å¼ï¼šsrandmember key [count] ğŸŒ° 1234srandmember s1 10---éšæœºè¿”å›é›†åˆs1ä¸­çš„10ä¸ªå…ƒç´ ï¼Œè‹¥ä¸æŒ‡å®šæ•°é‡ï¼Œåˆ™é»˜è®¤è¿”å›ä¸€ä¸ªå…ƒç´  è¿­ä»£é›†åˆä¸­çš„å…ƒç´  å‘½ä»¤æ ¼å¼ï¼šsscan key cursor [MATCH pattern] [COUNT count] ğŸŒ° 1234sscan s1 0 match re* count 1---è¿­ä»£é›†åˆä¸­reå¼€å¤´çš„æ‰€æœ‰å…ƒç´ ï¼Œæ¯æ¬¡è¿”å›1ä¸ª åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ å‘½ä»¤æ ¼å¼ï¼šsismember key member ğŸŒ° 1234sismember s1 99---è‹¥99å­˜åœ¨äºs1ä¸­ï¼Œåˆ™è¿”å›1ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0 å¤šé›†åˆä¹‹é—´æ“ä½œ æŸ¥çœ‹å¤šä¸ªé›†åˆçš„å·®é›† å‘½ä»¤æ ¼å¼ï¼šsdiff key [key ...] ğŸŒ° 1234sdiff s1 s2 s3---è¿”å›é›†åˆs1ç›¸å¯¹äºs2ã€s3çš„å·®é›†ï¼Œä¹Ÿå°±æ˜¯åªè¿”å›s1ä¸­æ‰€æœ‰ä¸å­˜åœ¨äºs2ã€s3ä¸­çš„æ‰€æœ‰å…ƒç´  å¤šä¸ªé›†åˆçš„å·®é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­ å‘½ä»¤æ ¼å¼ï¼šsdiffstore destination key [key ...] ğŸŒ° 1234sdiffstore ds1 s1 s2 s3---å°†s1ä¸­ä¸å­˜åœ¨äºs2ã€s3ä¸­çš„å…ƒç´ å­˜å‚¨åˆ°é›†åˆds1ä¸­ æŸ¥çœ‹å¤šä¸ªé›†åˆçš„å¹¶é›†ï¼Œå»é‡ å‘½ä»¤æ ¼å¼ï¼šsunion key [key ...] ğŸŒ° 1234sunion s1 s2 s3---å°†é›†åˆs1ã€s2ã€s3çš„å…ƒç´ åˆå¹¶å»é‡åè¿”å›ï¼Œæ‰€æœ‰å…ƒç´ å‡å”¯ä¸€ å¤šä¸ªé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­ å‘½ä»¤æ ¼å¼ï¼šsunionstore destination key [key ...] ğŸŒ° 1234sunionstore us1 s1 s2 s3---é›†åˆs1ã€s2ã€s3çš„å¹¶é›†å­˜å‚¨åˆ°é›†åˆus1ä¸­ï¼Œå¹¶è¿”å›é›†åˆus1ä¸­çš„å…ƒç´ ä¸ªæ•° å°†ä¸€ä¸ªé›†åˆä¸­çš„æŸå…ƒç´ ç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆä¸­ å‘½ä»¤æ ¼å¼ï¼šsmove source destination member ğŸŒ° 1234smove s1 s2 -2---å°†s1ä¸­çš„å…ƒç´ -2ç§»åŠ¨åˆ°é›†åˆs2ä¸­ï¼Œè‹¥s2ä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨åˆ›å»º æŸ¥çœ‹å¤šä¸ªé›†åˆçš„äº¤é›† å‘½ä»¤æ ¼å¼ï¼šsinter key [key ...]ï¼ˆintersectionï¼‰ ğŸŒ° 123456sinter s1 s3---è¿”å›é›†åˆs1å’Œé›†åˆs3çš„äº¤é›†ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªé›†åˆä¸­éƒ½å­˜åœ¨çš„æ•°æ®å®é™…åº”ç”¨ï¼šæŸ¥çœ‹ä¸¤ä¸ªäººçš„å…±åŒå¥½å‹ï¼›å¾®ä¿¡é‡ŒæŸ¥çœ‹å’Œå¥½å‹çš„å…±åŒç¾¤ å¤šä¸ªé›†åˆçš„äº¤é›†å­˜å‚¨åˆ°æŒ‡å®šé›†åˆä¸­ å‘½ä»¤æ ¼å¼ï¼šsinterstore destination key [key ...] ğŸŒ° 1234sinterstore is1 s1 s3---å°†s1å’Œs3çš„äº¤é›†å…ƒç´ å­˜å‚¨åˆ°é›†åˆis1ä¸­","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨::hashç¯‡","slug":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”hashç¯‡","date":"2019-10-30T15:55:00.000Z","updated":"2019-10-31T16:05:56.510Z","comments":true,"path":"2019/10/30/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”hashç¯‡/","link":"","permalink":"http://luxiaowan.github.io/2019/10/30/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”hashç¯‡/","excerpt":"","text":"Redisæœ‰6å¤§åŸºæœ¬ç±»å‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²(String)ã€åˆ—è¡¨(List)ã€é›†åˆ(set)ã€å“ˆå¸Œç»“æ„(hash)ã€æœ‰åºé›†åˆ(zset)å’ŒåŸºæ•°(HyperLogLog) redisåœ¨çº¿ä½“éªŒåœ°å€ï¼šhttp://try.redis.io/ å“ˆå¸Œ(Hash) ä»‹ç»: Redis hash æ˜¯ä¸€ä¸ªå­˜å‚¨å¤šä¸ªé”®å€¼å¯¹çš„æ˜ å°„è¡¨ï¼Œé€‚ç”¨äºå­˜å‚¨å¯¹è±¡çš„å±æ€§ï¼Œæ¯”å¦‚å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€ç”¨æˆ·Sessionä¿¡æ¯ç­‰ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨çš„é¢‘ç‡æ¯”è¾ƒå¤šï¼Œä¹‹å‰ä¸»è¦ç”¨äºå­˜å‚¨ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€ç”¨æˆ·ä¸´æ—¶è®¢å•ä¿¡æ¯ã€äº§å“ä¿¡æ¯ç­‰ã€‚ åˆ›å»ºç¼“å­˜ åˆ›å»ºä¸€ä¸ªç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šhset key field value ğŸŒ° 1234hset cc name 'cc'---å°†ccçš„nameå±æ€§çš„å€¼è®¾ç½®ä¸ºcc æ‰¹é‡åˆ›å»ºç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šhmset key filed value [field value ...] ğŸŒ° 1234hmset cc name 'cc' age 19 avatar 'a.png' status 1---è®¾ç½®ccå¯¹è±¡çš„nameã€ageã€avatarã€statuså±æ€§çš„å€¼ è®¾ç½®ä¸€ä¸ªkeyä¸å­˜åœ¨fieldçš„valueï¼Œè‹¥fieldå·²å­˜åœ¨åˆ™ä¸è®¾ç½® å‘½ä»¤æ ¼å¼ï¼šhsetnx key field value ğŸŒ° 1234hsetnx cc name 'yy'---è‹¥å¯¹è±¡ccçš„nameå±æ€§ä¸å­˜åœ¨ï¼Œåˆ™è®¾ç½®ccçš„nameå±æ€§å€¼ä¸ºyy æŸ¥çœ‹ç¼“å­˜ æŸ¥çœ‹keyä¸‹æ‰€æœ‰å±æ€§+å€¼ å‘½ä»¤æ ¼å¼ï¼šhgetall key ğŸŒ° 12345678hgetall cc---è·å–å¯¹è±¡ccçš„æ‰€æœ‰å±æ€§ï¼Œè¿”å›æ•°æ®æ ¼å¼ï¼š field1 value1 field2 value2 æŸ¥çœ‹keyä¸‹æ‰€æœ‰çš„å€¼ å‘½ä»¤æ ¼å¼ï¼šhvals key ğŸŒ° 12345hvals cc---è¿”å›ccå¯¹è±¡çš„æ‰€æœ‰å±æ€§çš„å€¼ï¼Œä»…è¿”å›å€¼ï¼Œä¸è¿”å›å±æ€§åç§°ç­‰åŒäº â€hmget key æ‰€æœ‰fieldâ€œ å‘½ä»¤ æŸ¥çœ‹keyä¸‹æ‰€æœ‰çš„fieldåç§° å‘½ä»¤æ ¼å¼ï¼šhkeys key ğŸŒ° 1234hkeys cc---è¿”å›å¯¹è±¡ccçš„æ‰€æœ‰å±æ€§å æŸ¥çœ‹keyçš„æŸä¸€fieldçš„å€¼ å‘½ä»¤æ ¼å¼ï¼šhget key field ğŸŒ° 1234hget cc name---è¿”å›å¯¹è±¡ccçš„nameå±æ€§çš„å€¼ï¼Œè‹¥å¯¹è±¡æ— æ­¤å±æ€§ï¼Œåˆ™è¿”å›nil æŸ¥çœ‹keyçš„å¤šä¸ªfieldçš„å€¼ å‘½ä»¤æ ¼å¼ï¼šhmget key field [field ...] ğŸŒ° 1234hmget cc name age status---è¿”å›å¯¹è±¡ccçš„nameã€ageã€statuså±æ€§ è¿­ä»£å¯¹è±¡çš„æ‰€æœ‰å±æ€§(é€‚ç”¨äºå¤§å¯¹è±¡) å‘½ä»¤æ ¼å¼ï¼šhscan key course [MATCH pattern] [COUNT num] ğŸŒ° 1hscan cc 0 MATCH *e COUNT 1 æŸ¥çœ‹å¯¹è±¡çš„å±æ€§æ•° å‘½ä»¤æ ¼å¼ï¼šhlen key ğŸŒ° 1234hlen cc---è¿”å›å¯¹è±¡ccçš„å±æ€§æ•°é‡ å…¶ä»–å‘½ä»¤ åˆ é™¤ä¸€ä¸ª/å¤šä¸ªå±æ€§ å‘½ä»¤æ ¼å¼ï¼šhdel key field [field ...] ğŸŒ° 1234hdel cc name age---åˆ é™¤å¯¹è±¡ccçš„nameã€ageå±æ€§ æŸ¥çœ‹å¯¹è±¡å±æ€§æ˜¯å¦å­˜åœ¨ å‘½ä»¤æ ¼å¼ï¼šhexists key field ğŸŒ° 1234hexists cc name---å¯¹è±¡ccè‹¥å­˜åœ¨å±æ€§nameï¼Œåˆ™è¿”å›1ï¼Œä¸å­˜åœ¨åˆ™è¿”å›0","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨::stringç¯‡","slug":"RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”stringç¯‡","date":"2019-10-29T15:55:00.000Z","updated":"2019-10-30T16:43:50.550Z","comments":true,"path":"2019/10/29/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”stringç¯‡/","link":"","permalink":"http://luxiaowan.github.io/2019/10/29/RedisåŸºæœ¬å‘½ä»¤ä½¿ç”¨â€”stringç¯‡/","excerpt":"","text":"Redisæœ‰6å¤§åŸºæœ¬ç±»å‹ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²(String)ã€åˆ—è¡¨(List)ã€é›†åˆ(set)ã€å“ˆå¸Œç»“æ„(hash)ã€æœ‰åºé›†åˆ(zset)å’ŒåŸºæ•°(HyperLogLog) redisåœ¨çº¿ä½“éªŒåœ°å€ï¼šhttp://try.redis.io/ å­—ç¬¦ä¸²(String) ä»‹ç»: å­—ç¬¦ä¸²æ˜¯Redisä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œæ•°æ®ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨äºå†…å­˜ä¸­ï¼Œæ‰€ä»¥Redisçš„å­—ç¬¦ä¸²å¯ä»¥æ˜¯ä»»ä½•å½¢å¼çš„æ•°æ®ï¼Œæ¯”å¦‚JPEGå›¾åƒã€åºåˆ—åŒ–çš„Rubyå¯¹è±¡ç­‰ã€‚ å­—ç¬¦ä¸²æœ€å¤§å¯å­˜å‚¨512MBçš„æ•°æ®ï¼Œä½†ä¸€èˆ¬ä¸€ä¸ªå­—ç¬¦ä¸²å®¹é‡è¿‡å¤§ï¼Œä¼šç›´æ¥å½±å“å­˜å‚¨å’ŒæŸ¥è¯¢çš„æ•ˆç‡ã€‚å­—ç¬¦ä¸²æœ‰ä¸¤ç§ç¼–ç æ–¹å¼ï¼šrawå’Œembstrï¼Œæ ¹æ®å­—ç¬¦ä¸²é•¿åº¦è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨å“ªä¸€ç§ç¼–ç ï¼Œç›®å‰æœ€æ–°ç‰ˆçš„é•¿åº¦æ˜¯44ä¸ªå­—èŠ‚ï¼Œå­—ç¬¦ä¸²é•¿åº¦å°äºç­‰äº44ä¸ªå­—èŠ‚ï¼Œåˆ™ä½¿ç”¨embstrç¼–ç ï¼Œå¤§äº44ä¸ªå­—èŠ‚åˆ™ä½¿ç”¨rawç¼–ç ï¼Œä¸¤ç§ç¼–ç æ–¹å¼è¿™é‡Œå°±ä¸ä½œè¯¦è§£ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è°·æ­Œä¸€ä¸‹ã€‚ åˆ›å»ºç¼“å­˜ åˆ›å»ºä¸€ä¸ªç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šset key value ğŸŒ° 1234set cc 'niubility'---åˆ›å»ºä¸€ä¸ªkeyä¸ºccï¼Œå€¼ä¸ºniubilityçš„ç¼“å­˜ æ‰¹é‡åˆ›å»ºç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šmset key value [key value ...] ğŸŒ° 1234mset cc1 1 cc2 2 cc3 3---åˆ›å»ºä¸‰ä¸ªç¼“å­˜ï¼Œkey:valueåˆ†åˆ«ä¸ºcc1:1, cc2:2, cc3:3 å‘½ä»¤æ ¼å¼ï¼šmsetnx key value [key value ...] ğŸŒ° 12345msetnx cc1 11 cc2 22 cc5 5 cc6 6---æ­¤å‘½ä»¤åªä¼šå°†å°šä¸å­˜åœ¨çš„keyå€¼åˆ›å»ºåˆ°ç¼“å­˜ä¸­ï¼Œå·²ç»å­˜åœ¨çš„keyåˆ™å¿½ç•¥* cc1ã€cc2å·²å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œæ‰€ä»¥ä¸ä¼šåˆ›å»º/æ›´æ–°æˆåŠŸï¼Œcc5ã€cc6ä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œä¼šåˆ›å»º åˆ›å»ºä¸€ä¸ªå¸¦è¿‡æœŸæ—¶é—´çš„ç¼“å­˜ å‘½ä»¤æ ¼å¼ï¼šsetex key time value ğŸŒ° 1234setex cc1 10 234---è®¾ç½®key:valueä¸ºcc1:234ä¸”è¿‡æœŸæ—¶é—´ä¸º10ç§’çš„ç¼“å­˜ è®¾ç½®ä¸€ä¸ªä¸å­˜åœ¨keyçš„valueï¼Œè‹¥keyå·²å­˜åœ¨åˆ™ä¸è®¾ç½® å‘½ä»¤æ ¼å¼ï¼šsetnx key value ğŸŒ° 1234setnx cc5 12---è‹¥cc5çš„keyä¸å­˜åœ¨äºç¼“å­˜ä¸­ï¼Œåˆ™åˆ›å»ºkey:valueä¸ºcc5:12çš„ç¼“å­˜ï¼Œå¦åˆ™ä¸æ‰§è¡Œåˆ›å»º ç»„åˆåˆ›å»ºä¸€ä¸ªç¼“å­˜(ç¼“å­˜è¿‡æœŸæ—¶é—´ã€æ˜¯å¦è¦†ç›–) å‘½ä»¤æ ¼å¼ï¼šset key value [EX|PX time] [NX|XX] è§£æï¼š 1234567 EXï¼šè¡¨æ˜è¿‡æœŸæ—¶é—´ä¸ºç§’ PXï¼šè¡¨æ˜è¿‡æœŸæ—¶é—´ä¸ºæ¯«ç§’ NXï¼šè‹¥keyä¸å­˜åœ¨åˆ™æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œï¼Œä¸XXç›¸å XXï¼šè‹¥keyå­˜åœ¨åˆ™æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œï¼Œä¸NXç›¸å ğŸŒ° 1234 set cc1 123 EX 20 XX --- è‹¥cc1å·²å­˜åœ¨åˆ™åˆ›å»ºè¿‡æœŸæ—¶é—´ä¸º20ç§’çš„key:value = cc1:123 å°†keyè®¾ç½®ä¸ºæ–°å€¼çš„åŒæ—¶è¿”å›åŸå€¼ å‘½ä»¤æ ¼å¼ï¼šgetset key value ğŸŒ° 1234getset cc1 1---è‹¥keyä¸å­˜åœ¨ï¼Œåˆ™è¿”å›nil è¯»å–ç¼“å­˜ è¯»å–ä¸€ä¸ªkeyçš„ç¼“å­˜å€¼ å‘½ä»¤æ ¼å¼ï¼šget key ğŸŒ° 1234get cc1---è¯»å–key=cc1çš„å€¼ æ‰¹é‡è¯»å–ä¸€æ‰¹æ•°æ® å‘½ä»¤æ ¼å¼ï¼šmget key [key ...] ğŸŒ° 1mget cc1 cc2 cc3 æˆªå–å­—ç¬¦ä¸²å¹¶è¿”å› å‘½ä»¤æ ¼å¼ï¼šgetrange key start end ğŸŒ° 1234getrange cc1 1 12---å­—ç¬¦ä¸²ä¸‹æ ‡ä»¥0å¼€å§‹ï¼Œè‹¥startè¶…å‡ºå­—ç¬¦ä¸²é•¿åº¦æˆ–keyä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸² å…¶ä»–æ“ä½œ å°†valueåŠ 1( valueå¿…é¡»ä¸ºæ•´æ•° )[ å¯ç”¨äºé˜…è¯»é‡ã€ç‚¹èµæ•°ç­‰ç®€å•ç»Ÿè®¡ç±»çš„åŠŸèƒ½åº”ç”¨ ] å‘½ä»¤æ ¼å¼ï¼šincr key ğŸŒ° 1234incr cc1---æ¯æ¬¡è°ƒç”¨å‡å¯¹valueè¿›è¡Œ+1æ“ä½œ ç»™valueåŠ ä¸ŠæŸä¸ªæ•°( numå¿…é¡»ä¸ºæ•´æ•° ) å‘½ä»¤æ ¼å¼ï¼šincrby key num ğŸŒ° 1234incrby cc1 100---ç»™cc1çš„å€¼åŠ ä¸Š100 ç»™valueåŠ ä¸ŠæŸä¸ªæµ®ç‚¹æ•° å‘½ä»¤æ ¼å¼ï¼šincrbyfloat key num ğŸŒ° 1incrbyfloat cc1 0.2 ç»™valueå‡1 å‘½ä»¤æ ¼å¼ï¼šdecr key ğŸŒ° 1234decr cc1---æ¯æ¬¡è°ƒç”¨å‡å¯¹valueè¿›è¡Œ-1æ“ä½œ ç»™valueå‡å»æŸä¸ªæ•°( numå¿…é¡»ä¸ºæ•´æ•° ) å‘½ä»¤æ ¼å¼ï¼šdescby key num ğŸŒ° 1234decrby cc1 100---ç»™cc1çš„å€¼å‡å»100 æŸ¥çœ‹valueçš„é•¿åº¦ å‘½ä»¤æ ¼å¼ï¼šstrlen key ğŸŒ° 1strlen cc1 ç›®å‰å…ˆæ•´ç†è¿™äº›ï¼Œéƒ½æ˜¯ä¸€äº›åŸºç¡€çš„å‘½ä»¤ï¼Œéšåå†å†™ä¸€ç¯‡Javaä¸­ä½¿ç”¨Jedisæ“ä½œå­—ç¬¦ä¸²çš„éšç¬”ã€‚","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"Redisæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„","slug":"Redisæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„","date":"2019-10-29T08:50:00.000Z","updated":"2019-10-29T15:02:17.269Z","comments":true,"path":"2019/10/29/Redisæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„/","link":"","permalink":"http://luxiaowan.github.io/2019/10/29/Redisæ•°æ®åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜å‚¨çš„/","excerpt":"","text":"","categories":[{"name":"Redis","slug":"Redis","permalink":"http://luxiaowan.github.io/categories/Redis/"}],"tags":[]},{"title":"MySQLç´¢å¼•ä»€ä¹ˆæ—¶å€™ç”¨hash","slug":"MySQLç´¢å¼•ä»€ä¹ˆæ—¶å€™ç”¨hash","date":"2019-10-28T11:06:00.000Z","updated":"2019-10-29T14:10:04.447Z","comments":true,"path":"2019/10/28/MySQLç´¢å¼•ä»€ä¹ˆæ—¶å€™ç”¨hash/","link":"","permalink":"http://luxiaowan.github.io/2019/10/28/MySQLç´¢å¼•ä»€ä¹ˆæ—¶å€™ç”¨hash/","excerpt":"","text":"MySQLç´¢å¼•æ˜¯åœ¨é¢è¯•ä¸­å¸¸è¢«é—®åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå¸¸ç”¨çš„ä¸¤ç§ç´¢å¼•æ–¹æ³•æœ‰Hashå’ŒB+Treeï¼Œæ ‘çš„ç»“æ„æˆ‘ä»¬æ”¹å¤©å†æ‰¯ï¼Œä»Šå¤©è¯´æ”¶Hashã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨hash Hashç´¢å¼•å¯ä»¥æ ¹æ®æ•°æ®çš„hashå€¼ç›´æ¥å®šä½åˆ°ç´¢å¼•æ•°æ®çš„å­˜å‚¨ä½ç½®ï¼Œå°±ç›¸å½“äºæˆ‘çŸ¥é“äº†æ•°ç»„çš„ä¸‹æ ‡ï¼Œç„¶åæ ¹æ®ä¸‹æ ‡å»å–æ•°æ®ï¼Œè¿™ä¸ªæ•ˆç‡å¯ä»¥è¯´æ˜¯æœ€é«˜çš„äº†ï¼Œä½¿ç”¨hashå°±æ˜¯ä¸ºäº†å¦‚æ­¤ã€‚ æ”¯æŒhashçš„å­˜å‚¨å¼•æ“ ç›®å‰æ”¯æŒhashçš„å¼•æ“æœ‰MEMORY(è¿™é‡Œéœ€è¦è°·æ­Œ)ï¼Œå…¶ä»–çš„å¼•æ“éƒ½é€šè¿‡å„è‡ªçš„æ–¹å¼å»æ”¯æŒhashæ–¹æ³•ã€‚å¦‚InnoDBæœ‰ä¸€å¥—è‡ªé€‚åº”hashç®—æ³•ï¼Œå†…éƒ¨å®ç°è¿˜æ˜¯é‡‡ç”¨äº†BTçš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£ä¸ºBTç´¢å¼•çš„ç´¢å¼• InnoDBä¸­hashç´¢å¼•æ”¯æŒçš„å¼€å¯/å…³é—­ hashç´¢å¼•è™½ç„¶éå¸¸å¿«é€Ÿï¼Œä½†æ˜¯åœ¨InnoDBä¸­ç¡®å®æ”¯æŒçš„ä¸æ˜¯å¾ˆå¥½ï¼Œå¹¶ä¸”ç´¢å¼•çš„å…·ä½“åˆ›å»ºæ˜¯ç”±å¼•æ“å†³å®šçš„(åˆ›å»ºåå­˜åœ¨äºå†…å­˜ä¸­)ï¼ŒéDBAå¯æ§ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹å»ºè®®å…³é—­hashæ”¯æŒï¼Œä½¿ç”¨BTä¹Ÿèƒ½å¤Ÿæ»¡è¶³æ€§èƒ½è¦æ±‚ã€‚ â€‹ set global innodb_adaptive_hash_index=off/on hashçš„ä½¿ç”¨åœºæ™¯ hashä½¿ç”¨åœºæ™¯æ¯”è¾ƒå±€é™ hashç´¢å¼•ä»…é€‚ç”¨äºâ€˜=â€™ã€â€˜&lt;=&gt;â€™å’Œâ€˜inâ€™æ“ä½œï¼Œæ‰€ä»¥hashä»…ä»…é€‚ç”¨äºç²¾ç¡®æŸ¥æ‰¾ã€‚ ä¸é€‚ç”¨äºæŸ¥è¯¢æ’åºï¼Œå› ä¸ºhashåçš„æ•°æ®å¹¶ä¸ä¼šåƒåŸæ•°æ®ä¸€æ ·ä¿æŒæœ‰åºã€‚ ä¸é€‚ç”¨äºæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä½¿ç”¨likeå…³é”®å­—ã€‚ æ—¢ç„¶ä¸æ”¯æŒæ’åºï¼Œä¹Ÿè‚¯å®šä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢å’¯ è§£å†³hashå†²çª ä¸è®ºhashçš„ç®—æ³•å¤šä¹ˆç²¾ç¡®ï¼Œå½“æ•°æ®é‡å¤§çš„æ—¶å€™éƒ½æœ‰å¯èƒ½å‘ç”Ÿhashç¢°æ’ï¼Œè§£å†³hashç¢°æ’çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å†hashã€é“¾è¡¨å åŠ ç­‰ï¼ŒMySQLé‡‡ç”¨çš„æ˜¯é“¾è¡¨å åŠ çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºHashMapè§£å†³hashç¢°æ’çš„æ–¹æ³•ã€‚æ‰€ä»¥åœ¨å‘ç”Ÿhashç¢°æ’è¿‡å¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨hashç´¢å¼•ä¼šå½±å“æŸ¥è¯¢æ€§èƒ½ã€‚","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://luxiaowan.github.io/categories/MySQL/"}],"tags":[]},{"title":"Spring-Sessionå’ŒRediså®ç°Sessionå…±äº«","slug":"Spring-Sessionå’ŒRediså®ç°Sessionå…±äº«","date":"2019-10-24T11:30:00.000Z","updated":"2019-10-24T15:18:45.220Z","comments":true,"path":"2019/10/24/Spring-Sessionå’ŒRediså®ç°Sessionå…±äº«/","link":"","permalink":"http://luxiaowan.github.io/2019/10/24/Spring-Sessionå’ŒRediså®ç°Sessionå…±äº«/","excerpt":"","text":"éœ€æ±‚ ç°åœ¨å¤§éƒ¨åˆ†æœåŠ¡éƒ½ä»¥é›†ç¾¤è´Ÿè½½å‡è¡¡çš„æ–¹å¼éƒ¨ç½²ï¼Œå‡ ä¹å¾ˆéš¾å†é‡åˆ°å•ç‚¹éƒ¨ç½²çš„é¡¹ç›®ï¼Œå› ä¸ºå¤§å®¶éƒ½è¦ä¿è¯æœ€åŸºæœ¬çš„HAï¼Œè¯´åˆ°HAï¼Œç¬¬ä¸€è¦è€ƒè™‘çš„å°±æ˜¯å„ç³»ç»Ÿä¹‹é—´çš„Sessionå…±äº«çš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿè´Ÿè½½å‡è¡¡å½“å‰ä½¿ç”¨Nginx åˆ†æ ä¸åŒçš„PODä¹‹é—´å¦‚æœéœ€è¦è¾¾åˆ°æ•°æ®å…±äº«çš„ç›®çš„ï¼Œé‚£ä¹ˆåˆ™éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªå­˜å‚¨åª’ä»‹ï¼Œä¸€å¼€å§‹æƒ³åˆ°ä½¿ç”¨MySQLæ¥å­˜å‚¨ç™»å½•sessionï¼Œä½†æ˜¯æ¯æ¬¡è¯·æ±‚éƒ½å»MySQLä¸­æŸ¥è¯¢æ•°æ®ï¼Œå¼€é”€è¿˜æ˜¯éå¸¸å¤§çš„ï¼›ç„¶åæœ€è¿‘ä½¿ç”¨MongoDBæ¯”è¾ƒå—¨ï¼Œæƒ³ç€ç”¨MongoDBï¼Œä½†æ˜¯MongoDBæŸ¥è¯¢èµ·æ¥ä¹Ÿä¸æ–¹ä¾¿ï¼Œå†µä¸”æˆ‘ä»¬è¿™ä¸ªSessionä¹Ÿä¸æ˜¯é‡çº§å¾ˆå¤§çš„æ•°æ®é›†ï¼Œæœ€ç»ˆé‡‡ç”¨äº†å†…å­˜çº§çš„Redisæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨Redisçš„åŸºæœ¬æ“ä½œæ˜¯å°†jsessionIdä¸ºkeyï¼Œç”¨æˆ·ä¿¡æ¯ä¸ºvalueï¼Œä½¿ç”¨jedisæˆ–è€…redisTemplateæ¥æ“ä½œRedisçš„è¯»å†™è¡Œä¸ºã€‚ä½†æ˜¯è¿™ç§æ–¹å¼ä¾µå…¥äº†ä¸šåŠ¡ä»£ç ï¼Œå¹¶ä¸æ˜¯æœ€ä¼˜è§£ï¼ŒæŸ¥äº†éƒ¨åˆ†èµ„æ–™ä¹‹åï¼Œå‘ç°spring-session.jaråŒ…ä¸­æœ‰ä¸€ä¸ªéå¸¸æœ‰ç‰¹è‰²çš„æ³¨è§£@EnableRedisHttpSessionï¼Œå¯ä»¥ä¸éœ€è¦ä¾µå…¥ä¸šåŠ¡ä»£ç å°±èƒ½ä½¿ç”¨rediså®ç°sessionå…±äº«çš„é—®é¢˜ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸‹@EnableRedisHttpSessionçš„æºç æ˜¯æ€ä¹ˆè¯´çš„ï¼š å°†æ­¤æ³¨é‡Šæ·»åŠ åˆ°ä¸€ä¸ªå•ç‹¬çš„ç±»ä¸Šï¼Œè¯¥ç±»å¿…é¡»åŠ ä¸Š@Configurationæ³¨è§£ã€‚ä½¿ç”¨æ–¹å¼åœ¨æ³¨é‡Šé‡Œä¹Ÿç»™å‡ºäº†demoä»£ç ã€‚ å®ç° ä¿®æ”¹pom.xmlæ–‡ä»¶ï¼Œå¼•å…¥æˆ‘ä»¬éœ€è¦çš„jaråŒ… 123456789101112&lt;dependency&gt; &lt;groupId&gt;org.springframework.session&lt;/groupId&gt; &lt;artifactId&gt;spring-session&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;&lt;/dependency&gt; ä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œé…ç½®redisä¿¡æ¯ 1234spring.redis.database=0spring.redis.host=localhostspring.redis.port=6379spring.redis.password=123456 åˆ›å»ºé…ç½®ç±» 1234567import org.springframework.context.annotation.Configuration;import org.springframework.session.data.redis.config.annotation.web.http.EnableRedisHttpSession;@Configuration@EnableRedisHttpSessionpublic class RedisHttpSessionConfig &#123;&#125; åˆ°æ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨Rediså®ç°Sessionå…±äº«çš„æ‰€æœ‰é…ç½®å’Œä»£ç éƒ½å·²ç»å†™å®Œäº†ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ²¡æœ‰ä¾µå…¥åˆ°ä»»ä½•ä¸šåŠ¡ä»£ç ä¸­ï¼Œä»å¤´åˆ°å°¾ä¹Ÿå¾ˆç®€å•ã€‚ æ‰©å±• 1234@EnableGemFireHttpSession@EnableSpringHttpSession@EnableMongoHttpSession@EnableJdbcHttpSession","categories":[{"name":"SpringBoot","slug":"SpringBoot","permalink":"http://luxiaowan.github.io/categories/SpringBoot/"}],"tags":[]},{"title":"Javaç®€å•æ“ä½œMongoDB","slug":"Javaç®€å•æ“ä½œMongoDB","date":"2019-10-24T02:16:00.000Z","updated":"2019-10-24T13:20:12.762Z","comments":true,"path":"2019/10/24/Javaç®€å•æ“ä½œMongoDB/","link":"","permalink":"http://luxiaowan.github.io/2019/10/24/Javaç®€å•æ“ä½œMongoDB/","excerpt":"","text":"å‰é¢å·²ç»æŒæ¡äº†mongoæœ€åŸºæœ¬çš„ä¸€äº›å‘½ä»¤ï¼Œå¯¹å„ä¸ªå‘½ä»¤ä¹Ÿéƒ½å®æ“è¿‡ï¼Œç†è§£å„å‘½ä»¤çš„æ„æ€ï¼Œä¹Ÿå¯¹mongoæœ‰äº†æœ€åŸºæœ¬çš„ç†è§£ï¼Œä½†å¤§éƒ¨åˆ†çŒ¿è¿˜æ˜¯æƒ³ä½¿ç”¨Javaå»è¿æ¥mongoï¼Œä¸²ä¸²ä¹Ÿä¸ä¾‹å¤– åœ¨pom.xmlä¸­åŠ å…¥mongodb-java-driver.jarçš„ä¾èµ– Mavené¡¹ç›®ä¾èµ– 12345&lt;dependency&gt; &lt;groupId&gt;org.mongodb&lt;/groupId&gt; &lt;artifactId&gt;mongo-java-driver&lt;/artifactId&gt; &lt;version&gt;3.0.4&lt;/version&gt;&lt;/dependency&gt; SpringBooté¡¹ç›®ä¾èµ– 1234&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;&lt;/dependency&gt; è¿æ¥mongo è®¤è¯è¿æ¥ 12345678// åˆ›å»ºéªŒè¯ä¿¡æ¯ï¼Œæ ¹æ®åŠ å¯†æ–¹å¼é€‰æ‹©MongoCredentialå†…å¯¹åº”çš„åŠ å¯†æ–¹å¼List&lt;MongoCredential&gt; credentials = new ArrayList&lt;&gt;();MongoCredential credential = MongoCredential.createCredential(\"admin\", \"test1\", \"admin\".toCharArray());credentials.add(credential);// åˆ›å»ºmongoæœåŠ¡åœ°å€ServerAddress serverAddress = new ServerAddress(\"localhost\", 27017);MongoClient mongoClient = new MongoClient(serverAddress, credentials); æ— éœ€è®¤è¯è¿æ¥ 1MongoClient client = new MongoClient(\"localhost\", 27017); ç„¶åå°±å¯ä»¥é€šè¿‡MongoClientçš„å®ä¾‹æ–¹æ³•å¯¹mongoè¿›è¡Œç›¸å…³æ“ä½œäº† åˆ›å»ºæ•°æ®åº“è¿æ¥ 1MongoDatabase db = client.getDatabase(\"test1\"); mongoç‰¹æ€§æ˜¯ä¸ç®¡æ•°æ®åº“äº‹å…ˆæ˜¯å¦å­˜åœ¨ï¼Œéƒ½å¯ä»¥æ­£å¸¸åˆ›å»ºæ•°æ®åº“è¿æ¥ï¼Œä¸ä¼šåƒMySQLä¸€æ ·æŠ¥é”™ï¼Œè¿æ¥æˆåŠŸåï¼Œåœ¨mongoæœåŠ¡å™¨ä¸Šæ‰§è¡Œshow dbsï¼Œä¼šå‘ç°ä»ç„¶æŸ¥ä¸åˆ°æˆ‘ä»¬è¿æ¥çš„è¿™ä¸ªæ•°æ®åº“ï¼Œè¿™æ˜¯æ­£å¸¸æƒ…å†µï¼Œåªæœ‰åœ¨æ•°æ®åº“ä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œæ‰ä¼šæŸ¥å¾—å‡ºæ¥ï¼Œclient.getDatabase(&quot;test&quot;) === use testå‘½ä»¤ åˆ›å»ºé›†åˆ ä½¿ç”¨æ•°æ®åº“è¿æ¥å®ä¾‹æ–¹æ³•åˆ›å»ºä¸€ä¸ªç©ºçš„é›†åˆ 1234db.createCollection(\"base_info\");--- å‘½ä»¤ï¼šdb.createCollection(\"base_info\") ç›´æ¥å‘åˆ›å»ºçš„é›†åˆä¸­æ’å…¥æ•°æ® 12345MongoCollection&lt;Document&gt; collection = db.getCollection(\"base_info\");collection.insertOne(new Document(\"name\", \"lxl\"));--- å‘½ä»¤ï¼šdb.base_info.insert(&#123;\"name\": \"lxl\"&#125;) ä»¥ä¸Šä¸¤ç§æ–¹å¼å‡å¯åˆ›å»ºä¸€ä¸ªé›†åˆï¼ŒåŒºåˆ«åœ¨äºç¬¬ä¸€ç§æ–¹å¼åˆ›å»ºçš„æ˜¯ç©ºé›†åˆï¼Œ åˆ é™¤é›†åˆ 1234collection.drop();--- å‘½ä»¤ï¼šdb.base_info.drop() å¯¹é›†åˆçš„CRUD æ–°å¢æ•°æ® å•æ¡æ–°å¢ 12Document document = new Document().append(\"name\",\"cc\").append(\"age\",30).append(\"location\",\"SZ\");collection.insertOne(document); æ‰¹é‡æ–°å¢ 123456List&lt;Document&gt; documentList = new ArrayList&lt;&gt;();for (int i = 0; i &lt; 1000; i++) &#123; Document doc = new Document().append(\"name\", \"cc\" + i).append(\"age\", new Random().nextInt(100)).append(\"location\", \"SZ\"); documentList.add(doc);&#125;collection.insertMany(documentList); insertOne(Document)æ–¹æ³•æ¯æ¬¡æ’å…¥ä¸€æ¡æ•°æ® insertMany(List)æ–¹æ³•æ‰¹é‡æ’å…¥æ•°æ®ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å‚æ•°InsertManyOptionsè®¾ç½®æ˜¯å¦æ’åº åˆ é™¤æ•°æ® åˆ é™¤ç¬¬ä¸€æ¡åŒ¹é…çš„æ•°æ® 12345Bson condition = Filters.eq(\"age\", 99);collection.deleteOne(condition);--- å‘½ä»¤ï¼šdb.base_info.deleteOne(&#123;\"age\": 99&#125;) åˆ é™¤æ‰€æœ‰åŒ¹é…æ•°æ® 12345Bson condition = Filters.eq(\"age\", 99);collection.deleteMany(condition);--- å‘½ä»¤ï¼šdb.base_info.deleteMany(&#123;\"ag\": 99&#125;) æŸ¥è¯¢æ•°æ® æŸ¥è¯¢è¿”å›ç¬¬ä¸€æ¡åŒ¹é…çš„æ•°æ® 1234Bson condition = Filters.eq(\"age\", 16);FindIterable&lt;Document&gt; vals = collection.find(condition);Document document = vals.first();System.out.println(document.toJson()); é€šè¿‡è°ƒç”¨FindIterableçš„å®ä¾‹æ–¹æ³•first()å–ç¬¬ä¸€æ¡æ•°æ® æŸ¥è¯¢è¿”å›æ‰€æœ‰åŒ¹é…æ•°æ® 12345Bson condition = Filters.eq(\"age\", 16);FindIterable&lt;Document&gt; vals = collection.find(condition);for (Document val : vals) &#123; System.out.println(val.toJson());&#125; find()æ–¹æ³•è¿”å›æ‰€æœ‰åŒ¹é…æ•°æ® åˆ†é¡µæŸ¥è¯¢ åˆ†é¡µæŸ¥è¯¢æ˜¯æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ç”¨åˆ°çš„åŠŸèƒ½ï¼Œå°¤å…¶æ˜¯mongoè¿™ç§é‡çº§è¾ƒå¤§çš„å­˜å‚¨ï¼Œåˆ†é¡µä½¿ç”¨limit()å’Œskip()ä¸¤ä¸ªæ–¹æ³•æ¥å®ç°ï¼ŒlimitæŒ‡å®šæŸ¥è¯¢çš„æ¡æ•°ï¼Œskipè¿›è¡Œåˆ†é¡µï¼Œå‚æ•°ä¸ºä»ç¬¬å‡ æ¡å¼€å§‹ï¼Œéœ€è¦ä½¿ç”¨å½“å‰é¡µç å’Œåˆ†é¡µæ¡æ•°è¿›è¡Œè®¡ç®—(pageNo - 1) * pageSize 12345Bson condition = Filters.lt(\"age\", 2);FindIterable&lt;Document&gt; vals = collection.find(condition).limit(10).skip(10).sort(Sorts.descending(\"age\"));for (Document val : vals) &#123; System.out.println(val.toJson());&#125; limit(10): æ¯é¡µå–10æ¡æ•°æ® skip(10): ä»ç¬¬11æ¡å¼€å§‹æŸ¥è¯¢ï¼Œèµ·å§‹ä½ç½®ä¸º0 sort(Sorts.descending(â€œageâ€)): ä»¥åˆ—ageå€’åº å¯¹åº”MySQLï¼šselect * from base_info where age &lt; 2 order by age desc limit 7, 7 æ›´æ–°æ•°æ® æ›´æ–°ç¬¬ä¸€æ¡åŒ¹é…æ•°æ®ä¸­çš„æŸäº›å­—æ®µ 123Bson condition = Filters.eq(\"age\", 15);Document document = new Document(\"$set\", new Document(\"location\", \"XZ\"));collection.updateOne(condition, document); æ³¨æ„è¿™é‡Œæœ‰ä¸€ä¸ª$setï¼Œè¿™ä¸ªæŒ‡ä»¤æ˜¯å¿…é¡»çš„ï¼Œç›¸å¯¹åº”çš„æŒ‡ä»¤è¿˜æœ‰$inc æ›¿æ¢ç¬¬ä¸€æ¡åŒ¹é…æ•°æ®å…¨éƒ¨å†…å®¹ 123Bson condition = Filters.eq(\"age\", 15);Document document = new Document(\"location\", \"XZ\");collection.updateOne(condition, document); æ²¡æœ‰$setæŒ‡ä»¤,åˆ™è¡¨ç¤ºä½¿ç”¨å‚æ•°documentæ›¿æ¢æ‰ç¬¬ä¸€æ¡åŒ¹é…åˆ°çš„æ•°æ® ç¬¬ä¸€æ¡åŒ¹é…çš„æ•°æ®ä¸­æŒ‡å®šå­—æ®µæ•°é‡+1 123Bson condition = Filters.eq(\"location\", \"XZ\");Document document = new Document(\"$inc\", new Document(\"age\", 1));collection.updateOne(condition, document); æ›´æ–°æ‰€æœ‰åŒ¹é…æ•°æ® 123Bson condition = Filters.eq(\"age\", 15);Document document = new Document(\"$set\", new Document(\"location\", \"XZ\"));collection.updateMany(condition, document); å…¨éƒ¨ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687import org.bson.Document;import org.bson.conversions.Bson;import com.mongodb.MongoClient;import com.mongodb.client.FindIterable;import com.mongodb.client.MongoCollection;import com.mongodb.client.MongoDatabase;import com.mongodb.client.model.Filters;import com.mongodb.client.model.Sorts;/** * @author: cc */public class MongoConnectTest &#123; public static void main(String[] args) &#123; MongoClient client = new MongoClient(\"localhost\", 27017); try &#123; /* // åˆ›å»ºéªŒè¯ä¿¡æ¯ï¼Œæ ¹æ®åŠ å¯†æ–¹å¼é€‰æ‹©MongoCredentialå†…å¯¹åº”çš„åŠ å¯†æ–¹å¼ List&lt;MongoCredential&gt; credentials = new ArrayList&lt;&gt;(); MongoCredential credential = MongoCredential.createCredential(\"admin\", \"test\", \"\".toCharArray()); credentials.add(credential); // åˆ›å»ºmongoæœåŠ¡åœ°å€ ServerAddress serverAddress = new ServerAddress(\"localhost\", 27017); MongoClient mongoClient = new MongoClient(serverAddress, credentials);*/ MongoDatabase db = client.getDatabase(\"test1\"); // åˆ›å»ºé›†åˆ // æ–¹å¼1 // db.createCollection(\"base_info2\"); // æ–¹å¼2 MongoCollection&lt;Document&gt; collection = db.getCollection(\"base_info\"); // collection.insertOne(new Document(\"name\", \"lxl\")); // åˆ é™¤é›†åˆ // collection.drop(); // æ–°å¢æ•°æ® // å•æ¡æ–°å¢ /*Document document = new Document().append(\"name\", \"cc\").append(\"age\", 30).append(\"location\", \"SZ\"); collection.insertOne(document); // æ‰¹é‡æ–°å¢ List&lt;Document&gt; documentList = new ArrayList&lt;&gt;(); for (int i = 0; i &lt; 1000; i++) &#123; Document doc = new Document().append(\"name\", \"cc\" + i).append(\"age\", new Random().nextInt(100)) .append(\"location\", \"SZ\"); documentList.add(doc); &#125; collection.insertMany(documentList);*/ // åˆ é™¤æ•°æ® // åˆ é™¤ç¬¬ä¸€æ¡åŒ¹é…æ•°æ® /*Bson condition = Filters.eq(\"age\", 99); collection.deleteOne(condition); // åˆ é™¤æ‰€æœ‰åŒ¹é…æ•°æ® collection.deleteMany(condition);*/ // ä¿®æ”¹æ•°æ® // ä¿®æ”¹ç¬¬ä¸€æ¡åŒ¹é…æ•°æ® /*Bson condition = Filters.eq(\"age\", 15); Document document = new Document(\"$set\", new Document(\"location\", \"XZ\")); collection.updateOne(condition, document); collection.updateMany(condition, document);*/ // å¹´é¾„+1 /*Bson condition = Filters.eq(\"location\", \"XZ\"); Document document = new Document(\"$inc\", new Document(\"age\", 1)); collection.updateOne(condition, document);*/ // æŸ¥è¯¢è¿”å›ç¬¬ä¸€æ¡åŒ¹é…æ•°æ® Bson condition = Filters.lt(\"age\", 2); FindIterable&lt;Document&gt; vals = collection.find(condition).sort(Sorts.descending(\"age\")).limit(7).skip(7); // Document document = vals.first(); // System.out.println(document.toJson()); for (Document val : vals) &#123; System.out.println(val.toJson()); &#125; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125;&#125;","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"http://luxiaowan.github.io/categories/MongoDB/"}],"tags":[{"name":"Javaä¸MongoDB","slug":"Javaä¸MongoDB","permalink":"http://luxiaowan.github.io/tags/Javaä¸MongoDB/"}]},{"title":"MongoDBç›‘æ§ã€åˆ†ç‰‡åŠå¤‡ä»½æ¢å¤","slug":"MongoDBç›‘æ§ã€åˆ†ç‰‡åŠå¤‡ä»½æ¢å¤","date":"2019-10-23T16:00:00.000Z","updated":"2019-10-24T13:20:12.764Z","comments":true,"path":"2019/10/24/MongoDBç›‘æ§ã€åˆ†ç‰‡åŠå¤‡ä»½æ¢å¤/","link":"","permalink":"http://luxiaowan.github.io/2019/10/24/MongoDBç›‘æ§ã€åˆ†ç‰‡åŠå¤‡ä»½æ¢å¤/","excerpt":"","text":"","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"http://luxiaowan.github.io/categories/MongoDB/"}],"tags":[{"name":"ç›‘æ§","slug":"ç›‘æ§","permalink":"http://luxiaowan.github.io/tags/ç›‘æ§/"}]},{"title":"MongoDBè¿æ¥æŠ¥é”™java.lang.NoSuchFieldError ACKNOWLEDGED","slug":"MongoDBè¿æ¥æŠ¥é”™java.lang.NoSuchFieldError-ACKNOWLEDGED","date":"2019-10-22T16:00:00.000Z","updated":"2019-10-24T13:20:12.764Z","comments":true,"path":"2019/10/23/MongoDBè¿æ¥æŠ¥é”™java.lang.NoSuchFieldError-ACKNOWLEDGED/","link":"","permalink":"http://luxiaowan.github.io/2019/10/23/MongoDBè¿æ¥æŠ¥é”™java.lang.NoSuchFieldError-ACKNOWLEDGED/","excerpt":"","text":"BUGæè¿° ä½¿ç”¨SpringBootæ•´åˆMongoDBæ—¶ï¼Œæ­£è¦è¿è¡Œä»£ç è¿æ¥mongoï¼Œå°±èµ¤çº¢èµ¤çº¢çš„æŠ¥äº†ä¸ªé”™ï¼š 12345Exception in thread \"main\" java.lang.NoSuchFieldError: ACKNOWLEDGED at com.mongodb.MongoClientOptions$Builder.&lt;init&gt;(MongoClientOptions.java:960) at com.mongodb.MongoClient.&lt;init&gt;(MongoClient.java:155) at com.mongodb.MongoClient.&lt;init&gt;(MongoClient.java:145) at com.example.demo.mongo.MongoConnectTest.main(MongoConnectTest.java:15) è¿™ä¸€ä¸‹å°±å‚»çœ¼äº†ï¼Œå¯¹äºåˆšæ¥è§¦mongoçš„äººæ¥è¯´ï¼Œæ˜¯å¾ˆæ‡µåœˆçš„ï¼Œå¤§è„‘çŸ¥è¯†åº“ä¸­æ²¡æœ‰è¿™ä¸ªå¼‚å¸¸ä¿¡æ¯çš„è§£å†³åŠæ³•ï¼Œåªèƒ½è°·æ­Œäº†ï¼Œæ²¡æƒ³åˆ°æœ‰é‚£ä¹ˆå¤šäººé‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ BUGè§£å†³ åœ¨Stack Overflowä¸Šæ‰¾åˆ°ä¸€ä¸ªå¸–å­ï¼š https://stackoverflow.com/questions/13593614/mongodb-java-lang-nosuchfielderror å…¶ä¸­jyeminçš„å›ç­”å¯ä»¥è¯´æ˜¯ç›´å‡»è¦å®³äº†ï¼Œé¡ºåˆ©çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æŠŠæˆªå›¾è´´ä¸Šï¼Œä»¥é˜²å¸–å­è¢«åˆ  å…¶å®å°±æ˜¯åœ¨å·¥ç¨‹ä¸­å¼•å…¥äº†å¤šä¸ªç‰ˆæœ¬ä¸åŒçš„mongo-java-driverï¼Œæ‰€ä»¥å¯¼è‡´ç¨‹åºæ··ä¹±ï¼Œåªè¦ä¿ç•™è‡ªå·±çœŸæ­£ä½¿ç”¨çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œå…¶ä»–çš„éƒ½åˆ é™¤å³å¯ æˆ‘çš„é…ç½®ï¼š å°†2.7.1ç‰ˆæœ¬çš„ä¾èµ–åˆ é™¤å°±å¯ä»¥æ­£å¸¸è¿è¡Œäº†","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"http://luxiaowan.github.io/categories/MongoDB/"}],"tags":[{"name":"MongoDBé”™è¯¯è®°å½•","slug":"MongoDBé”™è¯¯è®°å½•","permalink":"http://luxiaowan.github.io/tags/MongoDBé”™è¯¯è®°å½•/"}]},{"title":"MongoDBåŸºæœ¬æŒ‡ä»¤","slug":"MongoDBåŸºæœ¬æŒ‡ä»¤","date":"2019-10-22T16:00:00.000Z","updated":"2019-10-24T13:20:12.763Z","comments":true,"path":"2019/10/23/MongoDBåŸºæœ¬æŒ‡ä»¤/","link":"","permalink":"http://luxiaowan.github.io/2019/10/23/MongoDBåŸºæœ¬æŒ‡ä»¤/","excerpt":"","text":"æŸ¥çœ‹æ‰€æœ‰çš„db show dbs åˆ‡æ¢db user &lt;db_name&gt; æŸ¥çœ‹å½“å‰æ‰€åœ¨dbåç§° db åˆ é™¤db**(å¿…é¡»åœ¨è¦åˆ é™¤çš„dbä¸­æ“ä½œ)** db.dropDatabase() æŸ¥çœ‹dbä¸‹æ‰€æœ‰çš„é›†åˆ show tables show collections åˆ›å»ºé›†åˆ db.createCollection(&quot;abc&quot;) db.createCollection(&quot;def&quot;, {capped: true, autoIndexId: true, size: 1024, max: 100}) å¾€ä¸€å¼ ä¸å­˜åœ¨çš„é›†åˆä¸­æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºé›†åˆ db.test.insert({title: 123}) åˆ é™¤é›†åˆ db.&lt;collection_name&gt;.drop() ä¾‹ï¼šdb.abc.drop() æ’å…¥æ–‡æ¡£ db.&lt;collection_name&gt;.insert({title: 1234}) doc=({title: 12345, name: &quot;MongoDBæŒ‡å—&quot;}) db.&lt;collection_name&gt;.insert(doc) db.&lt;collection_name&gt;.save({name: &quot;MongoDBç®€å•æŒ‡ä»¤&quot;}}) doc2=({name: &quot;MongoDBä»å…¥é—¨åˆ°æ”¾å¼ƒ&quot;}) db.&lt;collection_name&gt;.save(doc2) doc3=({_id: &quot;edrftgyhjkgjhfgv2ryuoio&quot;, name: &quot;MongoDBä»å…¥é—¨åˆ°æ”¾å¼ƒ&quot;}) db.&lt;collection_name&gt;.save(doc3)// è‹¥_idå¯¹åº”å€¼çš„æ•°æ®å·²ç»å­˜åœ¨ï¼Œåˆ™æ›´æ–°è¿™æ¡æ•°æ®ï¼Œå¦åˆ™æ–°å¢ä¸€æ¡æ•°æ® æ›´æ–°æ–‡æ¡£ db.&lt;collection_name&gt;.update({title: 1234}, {$set:{title: &quot;4321&quot;}}) æ ¼å¼ï¼š 123456789db.&lt;collection_name&gt;.update( &lt;where&gt;,// ç›¸å½“äºMySQLçš„where &lt;update&gt;,// ç›¸å½“äºMySQLçš„updateè¯­å¥çš„setï¼Œéœ€è¦è·Ÿä¸€äº›æŒ‡ä»¤ï¼š$,$inc,$set &#123; upsert: true,// trueï¼šå¦‚æœä¸å­˜åœ¨è®°å½•ï¼Œåˆ™æ–°å¢ï¼›falseç›¸åï¼Œé»˜è®¤ multi: true,// trueï¼šåªæ›´æ–°ç¬¬ä¸€æ¡åŒ¹é…çš„è®°å½•ï¼›falseç›¸åï¼Œå…¨éƒ¨æ›´æ–°ï¼Œ é»˜è®¤ writeConcern: &lt;document&gt;// å¼‚å¸¸çº§åˆ« &#125;) æ¡ˆä¾‹ 12345678910111213&gt; 1. åªæ›´æ–°ç¬¬ä¸€æ¡è®°å½•ï¼š&gt; db.col.update( &#123; \"count\" : &#123; $gt : 1 &#125; &#125; , &#123; $set : &#123; \"test2\" : \"OK\"&#125; &#125; );&gt; 2. å…¨éƒ¨æ›´æ–°ï¼š&gt; db.col.update( &#123; \"count\" : &#123; $gt : 3 &#125; &#125; , &#123; $set : &#123; \"test2\" : \"OK\"&#125; &#125;,false,true );&gt; 3. åªæ·»åŠ ç¬¬ä¸€æ¡ï¼š&gt; db.col.update( &#123; \"count\" : &#123; $gt : 4 &#125; &#125; , &#123; $set : &#123; \"test5\" : \"OK\"&#125; &#125;,true,false );&gt; 4. å…¨éƒ¨æ·»åŠ è¿›å»:&gt; db.col.update( &#123; \"count\" : &#123; $gt : 5 &#125; &#125; , &#123; $set : &#123; \"test5\" : \"OK\"&#125; &#125;,true,true );&gt; 5. å…¨éƒ¨æ›´æ–°ï¼š&gt; db.col.update( &#123; \"count\" : &#123; $gt : 15 &#125; &#125; , &#123; $inc : &#123; \"count\" : 1&#125; &#125;,false,true );&gt; 6. åªæ›´æ–°ç¬¬ä¸€æ¡è®°å½•ï¼š&gt; db.col.update( &#123; \"count\" : &#123; $gt : 10 &#125; &#125; , &#123; $inc : &#123; \"count\" : 1&#125; &#125;,false,false );&gt; db.&lt;collection_name&gt;.save() è°ƒç”¨saveæŒ‡ä»¤ä¸€èˆ¬éœ€è¦æŒ‡å®š_id åˆ é™¤æ–‡æ¡£ db.&lt;collection_name&gt;.remove({title: &quot;4321&quot;}, true) æ ¼å¼ 1234db.&lt;collection_name&gt;.remove( &lt;where&gt;,// ç›¸å½“äºMySQLçš„where &lt;justOne&gt;// trueï¼šåªåˆ é™¤ä¸€æ¡åŒ¹é…æ¡ä»¶çš„æ•°æ®ï¼›falseï¼šåŒ¹é…æ¡ä»¶çš„æ•°æ®å…¨éƒ¨åˆ é™¤ï¼Œé»˜è®¤) åˆ é™¤é›†åˆä¸­æ‰€æœ‰æ•°æ® db.&lt;collection_name&gt;.remove({}) æ–°å‡½æ•°ï¼š db.&lt;collection_name&gt;.deleteMany({}) db.&lt;collection_name&gt;.deleteOne({title: &quot;12345&quot;}) æŸ¥è¯¢æ–‡æ¡£ æ™®é€šæŸ¥è¯¢ æ ¼å¼ï¼š 12345&gt; db.&lt;collection_name&gt;.find(&gt; &lt;where&gt;, // æŸ¥è¯¢æ¡ä»¶&gt; &lt;colName&gt;// è¿”å›å­—æ®µåç§°&gt; )&gt; åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œæ’å…¥ä¸‰æ¡æ•°æ® 1db.user.insert([&#123;name: \"cc\", age: \"29\", gender: 1&#125;, &#123;name: \"ccc\", age: \"30\", gender: 2&#125;, &#123;name: \"c\", age: \"28\", gender: 1&#125;]) æŸ¥è¯¢é›†åˆä¸­å…¨éƒ¨æ•°æ® æ™®é€šæ˜¾ç¤ºï¼šdb.user.find() æ ¼å¼åŒ–æ˜¾ç¤ºï¼šdb.user.find().pretty() æŸ¥è¯¢name=&quot;c&quot;çš„ä¿¡æ¯ db.user.find({name: &quot;c&quot;}).pretty() æŸ¥è¯¢åªè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„æ•°æ® db.user.findOne({name: &quot;c&quot;}) ANDæŸ¥è¯¢ db.user.find({key: value, key: value}) AndæŸ¥è¯¢å³æ˜¯åœ¨whereæ¡ä»¶é‡Œé¢ç”¨é€—å·&quot;,&quot;åˆ†éš” æ —å­ï¼š 123456&gt; db.user.find(&#123;name:\"cc\", gender:1&#125;)&gt; &gt; ---&gt; ç­‰åŒäºMySQLï¼š&gt; select * from user where name = \"c\" AND gender = 1&gt; ORæŸ¥è¯¢ db.user.find({$or:[{key:value}, {key:value}]}) æ —å­ï¼š 12345678&gt; db.user.find(&#123;&gt; $or:[&#123;name:\"c\"&#125;, &#123;gender:2&#125;]&gt; &#125;)&gt; &gt; ---&gt; ç­‰åŒäºMySQLï¼š&gt; select * from user where name = \"c\" OR gender = 2&gt; ANDå’ŒORç»„åˆæŸ¥è¯¢ db.user.find({key:value, $or:[{key:value}, {key:value}]}) æ —å­ï¼š 123456&gt; db.user.find(&#123;gender:1, $or:[&#123;name: \"c\"&#125;, &#123;age: \"28\"&#125;]&#125;)&gt; &gt; ---&gt; ç­‰åŒäºMySQLï¼š&gt; select * from user where gender = 1 AND (name = \"c\" OR age = \"28\")&gt; è¿ç®—ç¬¦ è¿ç®—ç¬¦ æ ¼å¼ æ¡ˆä¾‹ MySQLå¯¹åº”è¯­å¥ ç­‰äº {key:value}{key:{$eq:value}} db.user.find({age:â€œ29â€})db.user.find({age:{$eq:â€œ29â€}}) where age = â€œ29â€ å¤§äº {key:{$gt: value}} db.user.find({age:{$gt:â€œ30â€}}) where age &gt; â€œ30â€ å°äº {key:{$lt: value}} db.user.find({age:{$lt: â€œ30â€}}) where age &lt; â€œ30â€ å¤§äºç­‰äº {key:{$gte: value}} db.user.find({age:{$gte:â€œ30â€}}) where age &gt;= â€œ30â€ å°äºç­‰äº {key:{$lte: value}} db.user.find({age:{$lte:â€œ30â€}}) where age &lt;= â€œ30â€ ä¸ç­‰äº {key:{ne: value}} db.user.find({age:{$ne:â€œ29â€}}) where age != â€œ30â€ æ¨¡ç³ŠæŸ¥è¯¢ æŸ¥è¯¢ageåŒ…å«0çš„ï¼šdb.user.find({age:/0/}) æŸ¥è¯¢ageä»¥2å¼€å¤´çš„ï¼šdb.user.find({age:/^2/}) æŸ¥è¯¢ageä»¥8ç»“æŸçš„ï¼šdb.user.find({age:/8$/}) åˆ†é¡µæŸ¥è¯¢ æ ¼å¼ï¼š 123456&gt; db.&lt;collection_name&gt;.find().limit(Number).skip(Number)&gt; &gt; ---&gt; limit(Number)è¡¨ç¤ºæŸ¥è¯¢å¤šå°‘æ¡æ•°æ®&gt; skip(Number)è¡¨ç¤ºä»ç¬¬å‡ æ¡å¼€å§‹æŸ¥è¯¢&gt; æŸ¥è¯¢ä¸€æ¡æ•°æ® ç¬¬ä¸€ç§æ–¹æ³•ï¼šdb.user.findOne({}) ç¬¬äºŒç§æ–¹æ³•ï¼šdb.user.find({}).limit(1) ä»ç¬¬äºŒæ¡æ•°æ®å¼€å§‹æŸ¥è¯¢ä¸€æ¡æ•°æ® db.user.find().limit(1).skip(2) æŸ¥è¯¢æ’åº æ ¼å¼ï¼š 1234567&gt; db.&lt;collection_name&gt;.find().sort(&#123;&lt;key_name&gt;:-1/1&#125;)&gt; &gt; ---&gt; &lt;key_name&gt;ï¼šæ’åºå­—æ®µ&gt; -1ï¼šå€’åº&gt; 1ï¼šæ­£åº&gt; æŒ‰ç…§å¹´é¾„å€’åº db.user.find().sort({age:-1}) æŒ‰ç…§å¹´é¾„å€’åºã€æ€§åˆ«æ­£åº db.user.find().sort({age:-1, gender:1})","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"http://luxiaowan.github.io/categories/MongoDB/"}],"tags":[{"name":"åŸºæœ¬æŒ‡ä»¤","slug":"åŸºæœ¬æŒ‡ä»¤","permalink":"http://luxiaowan.github.io/tags/åŸºæœ¬æŒ‡ä»¤/"}]},{"title":"MongoDBåŸºç¡€åº”ç”¨","slug":"MongoDBåŸºç¡€åº”ç”¨","date":"2019-10-22T16:00:00.000Z","updated":"2019-10-24T13:20:12.764Z","comments":true,"path":"2019/10/23/MongoDBåŸºç¡€åº”ç”¨/","link":"","permalink":"http://luxiaowan.github.io/2019/10/23/MongoDBåŸºç¡€åº”ç”¨/","excerpt":"","text":"ç´¢å¼• è¯´æ˜ï¼šç´¢å¼•æ˜¯ä¸ºäº†åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼Œå¯ä»¥å¯¹é›†åˆä¸­çš„ä¸€åˆ—æˆ–å¤šåˆ—è®¾ç½®ç´¢å¼•ã€‚ â€“ æ— ç´¢å¼•ï¼šæ‰«ææ•´ä¸ªé›†åˆçš„æ–‡æ¡£ï¼ŒæŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„æ–‡æ¡£ â€“ æœ‰ç´¢å¼•ï¼šæŸ¥æ‰¾ç´¢å¼•ï¼Œæ ¹æ®ç´¢å¼•å–å‡ºæ–‡æ¡£æ•°æ® åˆ›å»ºç´¢å¼• db.&lt;collection_name&gt;.createIndex(keys, option) æ —å­ï¼š 123456789101. å•ç´¢å¼•db.user.createIndex(&#123;age:-1&#125;)---age:ç´¢å¼•åˆ—å-1:å€’åºç´¢å¼•1:æ­£åºç´¢å¼•2. å¤šç´¢å¼•(å¤åˆç´¢å¼•)db.user.createIndex(&#123;age:1, gender:-1&#125;) å¯é€‰å‚æ•° å‚æ•° ç±»å‹ è¯´æ˜ background Boolean æŒ‡å®šåˆ›å»ºç´¢å¼•æ—¶æ˜¯å¦é˜»å¡é›†åˆçš„å…¶ä»–æ“ä½œã€‚true:åå°æ‰§è¡Œï¼Œä¸é˜»å¡ï¼›false:é˜»å¡ï¼Œé»˜è®¤ unique Boolean æŒ‡å®šç´¢å¼•æ˜¯å¦ä¸ºå”¯ä¸€ç´¢å¼•ã€‚true:å”¯ä¸€ç´¢å¼•ï¼›false:ä¸å”¯ä¸€ï¼Œé»˜è®¤ name String ç´¢å¼•åç§°ï¼Œé»˜è®¤ä¸ºå­—æ®µå+ç´¢å¼•é¡ºåº v indexversion ç´¢å¼•ç‰ˆæœ¬å·ï¼Œé»˜è®¤ä¸ºå½“å‰mongoçš„ç‰ˆæœ¬å· weights Integer 1~99999ä¹‹é—´ï¼Œå€¼è¶Šå¤§æƒé‡è¶Šå¤§ expireAfterSeconds Integer æŒ‡å®šé›†åˆç”Ÿå­˜æ—¶é—´ã€‚ç§’çº§ï¼ŒTTL sparse Boolean æŒ‡å®šæ˜¯å¦å¿½ç•¥ä¸å­˜åœ¨çš„å­—æ®µã€‚true:ä¸æŸ¥å‡ºä¸åŒ…å«æŸ¥è¯¢å­—æ®µçš„æ–‡æ¡£ï¼›false:æŸ¥è¯¢æ‰€æœ‰æ–‡æ¡£ï¼Œé»˜è®¤ æ —å­ï¼š 12345&gt; db.user.createIndex(&#123;name:1&#125;, &#123;background: true, unique: true, name: \"idx_user_name\", v: 1, weights: 99, sparse: true&#125;)&gt; &gt; ---&gt; åå°ä¸é˜»å¡é›†åˆçš„æ–¹å¼åˆ›å»ºä¸€ä¸ªnameåˆ—æ­£åº,ç‰ˆæœ¬å·ä¸º1,æƒé‡99,å¿½ç•¥æ— nameå­—æ®µçš„æ–‡æ¡£çš„å”¯ä¸€ç´¢å¼•idx_user_name&gt; æŸ¥çœ‹æ‰€æœ‰ç´¢å¼• db.&lt;collection_name&gt;.getIndexes() æ —å­ï¼š db.user.getIndexes() é‡å»ºç´¢å¼• æ–¹æ³•1ï¼šdb.&lt;collection_name&gt;.reIndex() æ–¹æ³•2ï¼šå…ˆåˆ é™¤åŸç´¢å¼•ï¼Œç„¶åå†åˆ›å»º 12db.&lt;collection_name&gt;.dropIndex(&lt;idx_name&gt;)db.&lt;collection_name&gt;.createIndex(...) åˆ é™¤ç´¢å¼• åˆ é™¤æŒ‡å®šåç§°çš„ç´¢å¼•ï¼š db.user.dropIndex(&lt;idx_name&gt;) åˆ é™¤é›†åˆä¸­æ‰€æœ‰ç´¢å¼• db.user.dropIndexes() è¯´æ˜ï¼šåªä¼šåˆ é™¤è‡ªå»ºçš„ç´¢å¼•ï¼Œé›†åˆä¸­_idåˆ—çš„ç´¢å¼•ä¸ä¼šè¢«åˆ é™¤ èšåˆæŸ¥è¯¢ 12345678910111213141516171819202122232425åˆ›å»ºé›†åˆå¹¶æ’å…¥æ•°æ®ï¼šdb.agg.save([&#123; title: 'MongoDB Overview', description: 'MongoDB is no sql database', by_user: 'runoob.com', url: 'http://www.runoob.com', tags: ['mongodb', 'database', 'NoSQL'], likes: 100&#125;,&#123; title: 'NoSQL Overview', description: 'No sql database is very fast', by_user: 'runoob.com', url: 'http://www.runoob.com', tags: ['mongodb', 'database', 'NoSQL'], likes: 10&#125;,&#123; title: 'Neo4j Overview', description: 'Neo4j is no sql database', by_user: 'Neo4j', url: 'http://www.neo4j.com', tags: ['neo4j', 'database', 'NoSQL'], likes: 750&#125;]) æ ¼å¼ï¼š 12345678910&gt; db.&lt;collection_name&gt;.aggregate(condition)&gt; ---&gt; condition:&gt; [&#123;$group:&#123;_id:\"$&lt;key&gt;\", num_tutorial:&#123;$&lt;fun_expression&gt;:\"$&lt;key&gt;\"&#125;&#125;&#125;]&gt; $group:ä¸€ä¸ªç»„&gt; _id:ç»„åˆåˆ—ï¼Œç±»åŒäºMySQLçš„group byåé¢çš„å­—æ®µï¼Œé»˜è®¤_idçš„åˆ—ä¼šåœ¨æŸ¥è¯¢ç»“æœä¸­æ˜¾ç¤º&gt; num_tutorial:è¾“å‡ºçš„åˆ—å&gt; $&lt;fun_expression&gt;:èšåˆè¡¨è¾¾å¼&gt; $&lt;key&gt;:è¿ç®—çš„åˆ—å&gt; å…³é”®å­—ï¼šaggregate è¯´æ˜ï¼šèšåˆæŸ¥è¯¢å°±æ˜¯æ±‚å’Œã€æœ€å¤§ã€æœ€å°ã€æœ€å‰ã€æœ€åã€å¹³å‡æ•°çš„ç»Ÿç§°ï¼Œç±»ä¼¼äºMySQLçš„count()ã€sum()ã€avg() æ —å­ï¼š 12345&gt; db.user.aggregate([&#123;$group: $&#123;_id:\"$gender\", num_tutorial:&#123;$sum:1&#125;&#125;&#125;])&gt; &gt; ---&gt; ç­‰åŒäºMySQLï¼šselect gender, count(1) from user group by gender&gt; èšåˆè¡¨è¾¾å¼ è¡¨è¾¾å¼ æè¿° æ¡ˆä¾‹ $sum è®¡ç®—æ€»å’Œ db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$sum:&quot;$likes&quot;}}}])â€”ç­‰åŒäºMySQLï¼šselect by_user, sum(likes) from agg group by by_user $avg è®¡ç®—å¹³å‡å€¼ db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$avg:&quot;$likes&quot;}}}])â€”ç­‰åŒäºMySQLï¼šselect by_user, avg(likes) from agg group by by_user $min è·å–é›†åˆä¸­æŒ‡å®šåˆ—çš„æœ€å°å€¼è®°å½• db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$min:&quot;$like&quot;}}}])â€”ç­‰åŒäºMySQLï¼šselect by_user, min(likes) from agg group by by_user $max è·å–é›†åˆä¸­æŒ‡å®šåˆ—çš„æœ€å¤§å€¼è®°å½• db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$max:&quot;$likes&quot;}}}])â€”ç­‰åŒäºMySQLï¼šselect by_user, max(likes) from agg group by by_user $push åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°æ•°ç»„ db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$push:&quot;$url&quot;}}}])â€”ç­‰åŒäºMySQLï¼šæŸ¥å‡ºæ‰€æœ‰æ•°æ®ï¼Œç„¶åå–å­—æ®µurlå†™å…¥åŒä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œurlä¸å»é‡ï¼Œç„¶åè¾“å‡º $addToSet åœ¨ç»“æœæ–‡æ¡£ä¸­æ’å…¥å€¼åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†ä¸åˆ›å»ºå‰¯æœ¬ db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$addToSet:&quot;$url&quot;}}}])â€”ç­‰åŒäºMySQLï¼šæŸ¥å‡ºæ‰€æœ‰æ•°æ®ï¼Œç„¶åå–å­—æ®µurlå†™å…¥åŒä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œurlå»é‡ï¼Œç„¶åè¾“å‡º $first æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–ç¬¬ä¸€ä¸ªæ–‡æ¡£æ•°æ® db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$first:&quot;$title&quot;}}}]) $last æ ¹æ®èµ„æºæ–‡æ¡£çš„æ’åºè·å–æœ€åä¸€ä¸ªæ–‡æ¡£æ•°æ® db.agg.aggregate([{$group:{_id:&quot;$by_user&quot;, num_tutorial:{$last:&quot;$title&quot;}}}]) ç®¡é“å‡½æ•° è¯´æ˜ï¼šç®¡é“å‡½æ•°ç±»ä¼¼äºLinuxç³»ç»Ÿä¸­çš„ç®¡é“æ“ä½œï¼Œå°†ä¸Šä¸€æ­¥çš„è¿ç®—ç»“æœä½œä¸ºä¸‹ä¸€æ­¥çš„è¾“å…¥å€¼ï¼Œæœ€ç»ˆè¾¾åˆ°ç†æƒ³è®¡ç®—ç»“æœçš„è¿ç®—æ–¹å¼ å‡½æ•° è¯´æ˜ $project æŒ‡å®šéœ€è¦è¾“å‡ºçš„åˆ—ï¼Œé»˜è®¤æ˜¾ç¤º_idï¼Œæ ¼å¼ï¼š{$project:{by_user:1, title:1, url:1, _id:0ä¸æ˜¾ç¤ºid}}, $limit é™åˆ¶æŸ¥è¯¢è¿”å›çš„æ–‡æ¡£æ•°ï¼Œæ ¼å¼ï¼š{$limit: 1},åªè¿”å›ä¸€ä¸ªæ–‡æ¡£ $skip è·³è¿‡æŒ‡å®šæ•°é‡çš„æ–‡æ¡£ï¼Œè¿”å›ä¹‹åçš„æ‰€æœ‰æ–‡æ¡£ï¼Œæ ¼å¼ï¼š{$skip: 1},ä»ç¬¬äºŒä¸ªæ–‡æ¡£å¼€å§‹è¾“å‡º $match æ¡ä»¶ç­›é€‰ï¼Œæ ¼å¼ï¼š{match: {likes: {gte: 10}}} $group èšåˆæ¡ä»¶ï¼Œæ ¼å¼ï¼š{group: {_id: &quot;by_user&quot;, count: {$sum: -1}}} $sort æ’åºï¼Œæ ¼å¼ï¼š{$sort: {likes: -1}}ï¼Œ-1:å€’åº; 1:æ­£åº $unwind å°†æ–‡æ¡£ä¸­çš„æŸä¸€ä¸ªæ•°ç»„ç±»å‹å­—æ®µæ‹†åˆ†æˆå¤šæ¡ï¼Œæ¯æ¡åŒ…å«æ•°ç»„ä¸­çš„ä¸€ä¸ªå€¼ $geoNear è¾“å‡ºæ¥è¿‘æŸä¸€åœ°ç†ä½ç½®çš„æœ‰åºæ–‡æ¡£ã€‚ æ —å­ï¼š 123456&gt; db.agg.aggregate(&#123;$match: &#123;likes: &#123;$gte: 10&#125;&#125;&#125;, &#123; $project: &#123;_id: 0, title: 1, by_user: 1, likes: 1&#125;&#125;, &#123;$limit: 5&#125;, &#123;$skip: 1&#125;, &#123;$sort: &#123;likes: -1&#125;&#125;)&gt; &gt; ---&gt; ç­‰åŒäºMySQL: &gt; select title, by_user, likes from agg where likes &gt;= 10 order by likes desc limit 1,5&gt;","categories":[{"name":"MongoDB","slug":"MongoDB","permalink":"http://luxiaowan.github.io/categories/MongoDB/"}],"tags":[{"name":"åŸºç¡€åº”ç”¨","slug":"åŸºç¡€åº”ç”¨","permalink":"http://luxiaowan.github.io/tags/åŸºç¡€åº”ç”¨/"}]},{"title":"Git Stashç”¨æ³•","slug":"git stashå‘½ä»¤","date":"2019-10-21T16:00:00.000Z","updated":"2019-10-24T13:20:12.765Z","comments":true,"path":"2019/10/22/git stashå‘½ä»¤/","link":"","permalink":"http://luxiaowan.github.io/2019/10/22/git stashå‘½ä»¤/","excerpt":"","text":"åˆ›å»ºä»“åº“ git init echo 123 &gt; test.txt git add . git commit -m â€œadd test fileâ€ git remote add origin git@git.xx.xx.xx:xxx/xxx.git git push origin master ä»¥ä¸Šå†…å®¹æ¯”è¾ƒç®€å•ï¼Œå°±ä¸ä½œè¯¦ç»†è®²è¿°ï¼Œå¦‚æœä¸Šé¢çš„å†…å®¹çœ‹ä¸æ‡‚ï¼Œä¸‹é¢çš„è¯·æ”¾å¼ƒ ä½¿ç”¨git stashæš‚å­˜ éšæ„ä¿®æ”¹test.txtæ–‡ä»¶çš„å†…å®¹ï¼Œæ¯”å¦‚ï¼šç”»ä¸ªå¿ƒå½¢ï¼Œä½ æ­£çƒ­ç«æœå¤©ä¿®æ”¹ä¸­â€¦â€¦ è¿™æ—¶é¢†å¯¼èµ°è¿‡æ¥æ‹äº†æ‹ä½ çš„è‚©è†€è¯´åˆ°ï¼šâ€å°ä¼™å­å•Šï¼Œåˆ›å»ºä¸ªæœ•.txtæ–‡ä»¶æäº¤ä¸Šæ¥ï¼Œå†…å®¹å°±å†™æˆ‘è¿˜æƒ³å†æ´»äº”ç™¾å¹´ï¼Œtest.txtæ–‡ä»¶è¿™ä¸€ç‰ˆä¸ä½œä¿®æ”¹â€œã€‚ ä½ é¢éœ²ç¬‘å®¹çš„å›ç­”ï¼šâ€œå¥½çš„ï¼Œæ²¡é—®é¢˜ï¼â€ï¼Œå†…å¿ƒå´æ˜¯ï¼šâ€œMMP,MMP,MMPâ€¦â€¦â€ è¾›è¾›è‹¦è‹¦ä¿®æ”¹çš„test.txtæ–‡ä»¶æ€ä¹ˆåŠï¼Ÿçœ¼ç…ç€å°±è¦å®Œæˆäº†ï¼Œéš¾é“å¤åˆ¶å‡ºå»ï¼Œç„¶åç­‰è§£å†³é¢†å¯¼éœ€æ±‚åå†ç²˜è´´å›æ¥ï¼Ÿlowä¸lowï¼Ÿè‚¯å®šä¸lowå•Šï¼Œä¸€ä¸ªæ–‡ä»¶è€Œå·²ï¼Œè¿™ç§æ–¹æ³•å¾ˆç®€å•ï¼Œ*ä½†æ˜¯å½“ä½ å®é™…é¡¹ç›®ä¸­ä¿®æ”¹äº†å‡ åä¸ªæ–‡ä»¶çš„æ—¶å€™å‘¢ï¼Ÿ*æŒ¨ä¸ªå„¿å¤åˆ¶å‡ºå»ï¼Ÿç´¯å‚»å°å­å‘ï¼Ÿï¼ï¼ï¼ï¼ï¼ git stashå‘½ä»¤å¸®ä½ è§£å†³é—®é¢˜ï¼Œstashæ˜¯å­˜å‚¨çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯å°†å½“å‰å·¥ä½œåŒºå†…çš„æ‰€æœ‰ä¸œè¥¿éƒ½å­˜å‚¨èµ·æ¥ï¼Œç„¶åå·¥ä½œåŒºæ‰€æœ‰æ–‡ä»¶æ¢å¤åˆ°ä¿®æ”¹ä¹‹å‰çš„çŠ¶æ€(å¹¶ä¸æ˜¯æœ€æ–°çŠ¶æ€ï¼Œä¸ä¼šå’Œä»“åº“ä¸­è¿›è¡Œè‡ªåŠ¨åŒæ­¥ï¼Œéœ€è¦ä½ è‡ªå·±å»pull)ï¼Œç„¶åä½ å°±å¯ä»¥ç»§ç»­å®Œæˆä»»åŠ¡äº†ã€‚(åœ¨æ‰§è¡Œgit stashä¹‹å‰éœ€è¦å…ˆæ‰§è¡Œgit addå‘½ä»¤) stashå¯ä»¥è¿›è¡Œå¤šæ¬¡æ“ä½œï¼Œæ¯æ¬¡æ“ä½œéƒ½ä¼šå°†å½“å‰å·¥ä½œåŒºçš„æ–‡ä»¶æƒ…å†µæš‚å­˜èµ·æ¥ï¼Œstashæ˜¯ç±»æ ˆå­˜å‚¨ï¼Œæ¯æ¬¡stashçš„åºå·éƒ½ä¸º0ï¼Œæ­¤æ¬¡ä¹‹å‰stashçš„åºå·ä¼šè‡ªåŠ¨+1 ä½¿ç”¨git stash popå–å‡º git stash popå–å‡ºæ ˆé¡¶å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åºå·ä¸º0çš„é‚£ä¸ªï¼Œå³æœ€è¿‘ä¸€æ¬¡æ‰§è¡Œgit stashä¿å­˜çš„å†…å®¹ã€‚popä¹‹åï¼Œæš‚å­˜åˆ—è¡¨ä¸­å°±ä¼šè‡ªåŠ¨å°†å…¶æ¸…é™¤æ‰ï¼Œè¿™ä¸ªæ—¶å€™ä½ å†æ‰§è¡Œgit stash listä¼šå‘ç°æ¯›éƒ½æ²¡æœ‰ è¿™ä¸ªæ—¶å€™å¯èƒ½å°±ä¼šçº³é—·äº†ï¼Œæˆ‘ä¿å­˜äº†å¥½å‡ æ¬¡ï¼Œä½†æ˜¯æˆ‘è¿™æ¬¡æ˜¯æƒ³ä½¿ç”¨æœ€å¼€å§‹stashçš„é‚£ä»½å†…å®¹ï¼Œæ€ä¹ˆåŠï¼Ÿä¸€ç›´popï¼Œç›´åˆ°æœ€åä¸€æ¬¡ï¼Ÿå½“ç„¶ä¸è¡Œï¼Œä¸Šé¢åˆšè®²è¿‡popä¹‹åæš‚å­˜åˆ—è¡¨ä¸­å°±æ²¡æœ‰stashçš„ä¿¡æ¯äº†ï¼Œå·²ç»è¢«popå‡ºå»çš„å°±æ‰¾ä¸å›æ¥äº†ï¼Œç­‰äºæ˜¯è‡ªæ€å¼æ”»å‡»ï¼Œé‚£å’‹æ•´å‘¢ï¼Ÿ git stash apply stash@{åºå·}å¯ä»¥å°†æŒ‡å®šåºå·çš„stashå†…å®¹å¼¹å‡ºåˆ°å·¥ä½œåŒºï¼Œæ­¤æ—¶å·¥ä½œåŒºé‡Œæ–‡ä»¶çš„çŠ¶æ€å°±å’Œstash@{åºå·}é‡Œçš„ä¸€è‡´äº†ï¼Œä½†æ˜¯è¿™ä¸ªå‘½ä»¤æ— æ³•å°†stashè®°å½•ä»æš‚å­˜åˆ—è¡¨ä¸­åˆ é™¤ï¼Œä»…ä»…åªæ˜¯å°†æ–‡ä»¶æ¢å¤è€Œå·² git stash drop stash@{åºå·}æ¥ä¸¢å¼ƒæš‚å­˜åˆ—è¡¨ä¸­çš„è®°å½•ï¼Œå¯ä»¥é…åˆapplyä½¿ç”¨ æŸ¥çœ‹æš‚å­˜è®°å½•ä¸­çš„ä¿¡æ¯ æŸ¥çœ‹æš‚å­˜åˆ—è¡¨ï¼šgit stash listæŸ¥çœ‹å½“å‰stashçš„åˆ—è¡¨ æŸ¥çœ‹æš‚å­˜å†…å®¹ï¼šgit stash show stash@{åºå·}æŸ¥çœ‹æŒ‡å®šåºå·çš„stashçš„å†…å®¹ git stash save â€˜msgâ€™ ç­‰äºæ˜¯åœ¨stashçš„æ—¶å€™æ‰“äº†ä¸ªæ ‡ç­¾ï¼Œå¦–å¨†ï¼ï¼ï¼ï¼","categories":[{"name":"Git","slug":"Git","permalink":"http://luxiaowan.github.io/categories/Git/"}],"tags":[]},{"title":"Hashç´¢å¼•ç›¸å…³","slug":"Hashç´¢å¼•ç›¸å…³","date":"2019-10-12T15:42:43.000Z","updated":"2019-10-21T15:48:05.043Z","comments":true,"path":"2019/10/12/Hashç´¢å¼•ç›¸å…³/","link":"","permalink":"http://luxiaowan.github.io/2019/10/12/Hashç´¢å¼•ç›¸å…³/","excerpt":"","text":"hashç´¢å¼•ç»“æ„ä½¿ç”¨æ–¹å¼è¾ƒä¸ºå±€é™ï¼Œä»…é€‚ç”¨äº=ã€INå’Œ&lt;=&gt;ä¸‰ç§ï¼Œä½†æ˜¯ç”±äºé€šè¿‡hashå¯ä»¥ç›´æ¥æŸ¥æ‰¾åˆ°å…·ä½“çš„å€¼ï¼Œè€Œä¸ç”¨åƒBTé‚£æ ·æ¯æ¬¡éƒ½ä»rootèŠ‚ç‚¹å¼€å§‹éå†ï¼Œæ‰€ä»¥åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œhashçš„æŸ¥æ‰¾æ•ˆç‡è¦æ¯”BTé«˜ã€‚ hashçš„ç¼ºé™·ï¼š 1. hashä¸èƒ½è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾ å€¼åœ¨è®¡ç®—hashåï¼Œå¹¶ä¸èƒ½ä¿è¯è®¡ç®—åçš„hashå€¼å’Œè®¡ç®—å‰çš„å¤§å°æ’åˆ—ä¸€æ ·ï¼Œæ‰€ä»¥hashä¸é€‚ç”¨äºèŒƒå›´æŸ¥æ‰¾ 2. hashä¸èƒ½è¿›è¡Œæ’åºæŸ¥è¯¢ å€¼è®¡ç®—åçš„hashå€¼æ— æ³•ä¿è¯ä¸åŸå€¼å¤§å°é¡ºåºä¸€æ ·ï¼Œæ‰€ä»¥æ— æ³•è¿›è¡Œæ’åº 3. ç»„åˆç´¢å¼•ä¸èƒ½ä½¿ç”¨éƒ¨åˆ†å­—æ®µæŸ¥è¯¢ ç»„åˆç´¢å¼•çš„hashå€¼æ˜¯æ‰€æœ‰ç´¢å¼•å­—æ®µçš„å€¼ç»„åˆåœ¨ä¸€èµ·è¿›è¡Œè®¡ç®—çš„ï¼Œè‹¥ä»…ä½¿ç”¨éƒ¨åˆ†å­—æ®µè¿›è¡ŒæŸ¥è¯¢çš„è¯ï¼Œè®¡ç®—å‡ºçš„hashå€¼åŸºæœ¬ä¸ä¼šä¸ç´¢å¼•çš„hashå€¼ç›¸åŒ 4. hashåœ¨å‡ºç°å¤§é‡å€¼ç¢°æ’çš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šé™ä½ hashå‡ºç°å¤§é‡çš„å€¼ç›¸ç­‰çš„æ—¶å€™ï¼Œéœ€è¦è¿›è¡Œè¡¨æ‰«æä»¥è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œæ•ˆç‡è¾ƒä½","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[{"name":"JavaåŸºç¡€çŸ¥è¯†","slug":"JavaåŸºç¡€çŸ¥è¯†","permalink":"http://luxiaowan.github.io/tags/JavaåŸºç¡€çŸ¥è¯†/"}]},{"title":"Charå’Œvarcharç®€å•ä»‹ç»","slug":"charä¸varcharç®€å•ä»‹ç»","date":"2019-10-12T04:10:43.000Z","updated":"2019-10-21T16:19:50.476Z","comments":true,"path":"2019/10/12/charä¸varcharç®€å•ä»‹ç»/","link":"","permalink":"http://luxiaowan.github.io/2019/10/12/charä¸varcharç®€å•ä»‹ç»/","excerpt":"","text":"1. æ•°æ®é•¿åº¦ 1) char(æœ€å¤§é•¿åº¦255ä¸ªå­—èŠ‚) é•¿åº¦å›ºå®šï¼ˆå­—æ®µå­˜å…¥æ•°æ®é•¿åº¦å§‹ç»ˆç­‰äºå­—æ®µé•¿åº¦ï¼‰ 2) varchar(æœ€å¤§é•¿åº¦65535ä¸ªå­—èŠ‚) å¯å˜é•¿åº¦ï¼Œå­˜å…¥æ•°æ®é•¿åº¦ä¸ºNä¸ªå­—èŠ‚ï¼Œåˆ™å®é™…ä½¿ç”¨äº†N+1(255ä»¥ä¸Šé•¿åº¦åˆ™+2)ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼Œå¤šå‡ºæ¥çš„1å­—èŠ‚æ˜¯ç”¨æ¥å­˜å‚¨æ•°æ®å®é™…é•¿åº¦ã€‚ å­˜å…¥æ•°æ®å¯¹æ¯” å­˜å…¥&quot;ab&quot; charæŸ¥è¯¢å‡º&quot;ab&quot; varcharæŸ¥è¯¢å‡º&quot;ab&quot; å­˜å…¥&quot;ab &quot;ï¼Œabåé¢æœ‰ä¸¤ä¸ªç©ºæ ¼ï¼Œ charæŸ¥è¯¢å‡º&quot;ab&quot; varcharæŸ¥è¯¢å‡º&quot;ab &quot; è§£æï¼š â€‹ åœ¨å…¥åº“æ—¶ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨åœ¨abåé¢æ·»åŠ ä¸¤ä½ç©ºæ ¼ï¼Œè®©å…¥åº“çš„æ•°æ®é•¿åº¦ä¿è¯ç­‰äº4 char(4) ï¼Œè¿™ç§æ“ä½œå¾ˆå®¹æ˜“ç†è§£ï¼Œä½†æ˜¯å¦‚æœä½ å»æ•°æ®è¡¨é‡Œé¢å»æŸ¥è¿™æ¡æ•°æ®ï¼Œä¼šå‘ç°è¡¨ä¸­æ•°æ®å¹¶æ²¡æœ‰ç©ºæ ¼ï¼Œæ‰€ä»¥å¯ä»¥æ¨æ–­å‡ºè¿™é‡Œæ˜¯é€»è¾‘è¿½åŠ ï¼Œæ‰€ä»¥åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ä¼šå¹¶ä¸ä¼šå‡ºç°å¼•æ“è‡ªåŠ¨æ·»åŠ çš„ç©ºæ ¼ã€‚ 2. å®æ“(æŠ€æœ¯ä¸€å®šè¦**å®æ“**) 1ï¼‰æ— ç©ºæ ¼æ•°æ® å…ˆåˆ›å»ºä¸€å¼ è¡¨ 1create table cv(c char(4), v varchar(4)); æ’å…¥æ•°æ® 1insert into cv values(&quot;ab&quot;, &quot;ab&quot;); æŸ¥è¯¢æ•°æ® 1select concat(&apos;(&apos;, c, &apos;)&apos;) AS c, concat(&apos;(&apos;, v, &apos;)&apos;) AS v from cv; ç»“æœ ç»“æœä¸­charå’Œvarcharå‡æŸ¥å‡ºæ¥ä¸ºæ— ç©ºæ ¼çš„ab ####2ï¼‰æœ‰ç©ºæ ¼æ•°æ® æ’å…¥æ•°æ® 1insert into cv values(&quot;ab &quot;, &quot;ab &quot;); æŸ¥è¯¢æ•°æ® 1select concat(&apos;(&apos;, c, &apos;)&apos;) AS c, concat(&apos;(&apos;, v, &apos;)&apos;) AS v from cv; ç»“æœ ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œcharç±»å‹å°†æ•°æ®åé¢çš„ç©ºæ ¼è‡ªåŠ¨å»æ‰äº†ï¼Œvarcharåˆ™ä¿ç•™äº†æ‰€æœ‰çš„ç©ºæ ¼","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://luxiaowan.github.io/categories/MySQL/"}],"tags":[]},{"title":"MySQLä½¿ç”¨æŸ¥è¯¢ç¼“å­˜","slug":"MySQLä½¿ç”¨æŸ¥è¯¢ç¼“å­˜","date":"2019-10-11T05:01:23.000Z","updated":"2019-10-21T15:48:59.282Z","comments":true,"path":"2019/10/11/MySQLä½¿ç”¨æŸ¥è¯¢ç¼“å­˜/","link":"","permalink":"http://luxiaowan.github.io/2019/10/11/MySQLä½¿ç”¨æŸ¥è¯¢ç¼“å­˜/","excerpt":"","text":"æŸ¥è¯¢æœåŠ¡æ˜¯å¦å·²å¼€å¯ç¼“å­˜ æ‰§è¡Œshow variables like '%query_cache%';æŸ¥çœ‹ç¼“å­˜çŠ¶æ€ Variable_name: query_cache_typeä¸ºç¼“å­˜çŠ¶æ€ï¼ŒONè¡¨ç¤ºå¼€å¯ï¼ŒOFFè¡¨ç¤ºå…³é—­ å¼€å¯/å…³é—­ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ ä¿®æ”¹my.cnfæ–‡ä»¶è¿›è¡Œå¼€å¯å’Œå…³é—­ [mysqld]ä¸­æ·»åŠ /ä¿®æ”¹ï¼š query_cache_size = 20M query_cache_type = ON/OFF **ä¿®æ”¹å®Œæˆåé‡å¯MySQLæœåŠ¡ï¼šservice mysql restart/systemctl mysql restart ** æŸ¥è¯¢ç¼“å­˜ä½¿ç”¨æƒ…å†µ æ‰§è¡Œshow status like 'qcache%';æŸ¥è¯¢ç¼“å­˜ä½¿ç”¨æƒ…å†µ å› ä¸ºæœ¬æœºMySQLæœªå¼€å¯æŸ¥è¯¢ç¼“å­˜ï¼Œæ‰€ä»¥æ­¤å¤„å’Œä½¿ç”¨ç›¸å…³çš„å±æ€§å‡ä¸º0 å±æ€§è§£é‡Š: å±æ€§ é‡Šä¹‰ Qcache_free_blocks ç¼“å­˜ä¸­ç›¸é‚»å†…å­˜å—çš„ä¸ªæ•°ã€‚æ•°ç›®å¤§è¯´æ˜å¯èƒ½æœ‰ç¢ç‰‡ã€‚FLUSH QUERY CACHEä¼šå¯¹ç¼“å­˜ä¸­çš„ç¢ç‰‡è¿›è¡Œæ•´ç†ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ªç©ºé—²å—ã€‚ Qcache_free_memory ç¼“å­˜ä¸­ç©ºé—²å†…å­˜å¤§å° Qcache_hits ç¼“å­˜å‘½ä¸­æ¬¡æ•°ï¼Œå‘½ä¸­ä¸€æ¬¡å°±+1 Qcache_inserts æŸ¥è¯¢æ¬¡æ•°ï¼Œå‘½ä¸­æ¬¡æ•°/æŸ¥è¯¢æ¬¡æ•°=ç¼“å­˜å‘½ä¸­ç‡ Qcache_lowmem_prunes ç¼“å­˜å‡ºç°å†…å­˜ä¸è¶³å¹¶ä¸”å¿…é¡»è¦è¿›è¡Œæ¸…ç†ä»¥ä¾¿ä¸ºæ›´å¤šæŸ¥è¯¢æä¾›ç©ºé—´çš„æ¬¡æ•°ï¼Œå¦‚æœæ•°å­—ä¸æ–­å¢é•¿ï¼Œå°±å¯èƒ½ç¢ç‰‡éå¸¸ä¸¥é‡ï¼Œæˆ–è€…å†…å­˜å¾ˆå°‘ï¼Œé€šè¿‡Qcache_free_blocksã€Qcache_free_memoryæ¥åˆ†æå…·ä½“æƒ…å†µ Qcache_not_cached ä¸é€‚åˆè¿›è¡Œç¼“å­˜çš„æŸ¥è¯¢çš„æ•°é‡ Qcache_queries_in_cache å½“å‰ç¼“å­˜çš„æŸ¥è¯¢(å’Œå“åº”)çš„æ•°é‡ Qcache_total_blocks ç¼“å­˜ä¸­å—çš„æ•°é‡","categories":[{"name":"MySQL","slug":"MySQL","permalink":"http://luxiaowan.github.io/categories/MySQL/"}],"tags":[]},{"title":"JavaåŸºç¡€é¢è¯•é¢˜","slug":"èš‚èšJavaåŸºç¡€é¢è¯•é¢˜","date":"2019-10-10T15:21:56.000Z","updated":"2019-10-21T15:49:27.313Z","comments":true,"path":"2019/10/10/èš‚èšJavaåŸºç¡€é¢è¯•é¢˜/","link":"","permalink":"http://luxiaowan.github.io/2019/10/10/èš‚èšJavaåŸºç¡€é¢è¯•é¢˜/","excerpt":"","text":"ä¸€ mapæ€ä¹ˆå®ç°hashcodeå’Œequals,ä¸ºä»€ä¹ˆé‡å†™equalså¿…é¡»é‡å†™hashcode ä½¿ç”¨è¿‡concurrentåŒ…ä¸‹çš„å“ªäº›ç±»ï¼Œä½¿ç”¨åœºæ™¯ç­‰ç­‰ã€‚ concurrentHashMapæ€ä¹ˆå®ç°ï¼Ÿconcurrenthashmapåœ¨1.8å’Œ1.7é‡Œé¢æœ‰ä»€ä¹ˆåŒºåˆ« CountDownLatchã€LinkedHashMapã€AQSå®ç°åŸç† çº¿ç¨‹æ± æœ‰å“ªäº›RejectedExecutionHandler,åˆ†åˆ«å¯¹åº”çš„ä½¿ç”¨åœºæ™¯ å¤šçº¿ç¨‹çš„é”ï¼Ÿæ€ä¹ˆä¼˜åŒ–çš„ï¼Ÿåå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ï¼Ÿ ç»„åˆç´¢å¼•ï¼ŸB+æ ‘å¦‚ä½•å­˜å‚¨çš„ï¼Ÿ ä¸ºä»€ä¹ˆç¼“å­˜æ›´æ–°ç­–ç•¥æ˜¯å…ˆæ›´æ–°æ•°æ®åº“ååˆ é™¤ç¼“å­˜ OOMè¯´ä¸€ä¸‹ï¼Ÿæ€ä¹ˆæ’æŸ¥ï¼Ÿå“ªäº›ä¼šå¯¼è‡´OOM? OSIä¸ƒå±‚ç»“æ„ï¼Œæ¯å±‚ç»“æ„éƒ½æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ javaçš„çº¿ç¨‹å®‰å…¨queueéœ€è¦æ³¨æ„çš„ç‚¹ æ­»é”çš„åŸå› ï¼Œå¦‚ä½•é¿å… äºŒ jvmè™šæ‹Ÿæœºè€å¹´ä»£ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿgcï¼Œç»™ä½ ä¸€ä¸ªåœºæ™¯ï¼Œä¸€å°4æ ¸8Gçš„æœåŠ¡å™¨ï¼Œæ¯éš”ä¸¤ä¸ªå°æ—¶å°±è¦å‡ºç°ä¸€æ¬¡è€å¹´ä»£gcï¼Œç°åœ¨æœ‰æ—¥å¿—ï¼Œæ€ä¹ˆåˆ†ææ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ æ•°æ®åº“ç´¢å¼•æœ‰å“ªäº›ï¼Ÿåº•å±‚æ€ä¹ˆå®ç°çš„ï¼Ÿæ•°æ®åº“æ€ä¹ˆä¼˜åŒ–ï¼Ÿ æ•°æ®åº“çš„äº‹åŠ¡ï¼Œå››ä¸ªæ€§è´¨è¯´ä¸€ä¸‹ï¼Œåˆ†åˆ«æœ‰ä»€ä¹ˆç”¨ï¼Œæ€ä¹ˆå®ç°çš„ï¼Ÿ æœåŠ¡å™¨å¦‚ä½•è´Ÿè½½å‡è¡¡ï¼Œæœ‰å“ªäº›ç®—æ³•ï¼Œå“ªä¸ªæ¯”è¾ƒå¥½ï¼Œä¸€è‡´æ€§å“ˆå¸ŒåŸç†ï¼Œæ€ä¹ˆé¿å…DDOSæ”»å‡»è¯·æ±‚æ‰“åˆ°å°‘æ•°æœºå™¨ volatileè®²è®² å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿè£…é¥°å™¨ã€ä»£ç†è®²è®²ï¼Ÿ redisé›†ç¾¤ä¼šå—ï¼Ÿ mysqlå­˜å‚¨å¼•æ“ äº‹åŠ¡éš”ç¦»çº§åˆ« ä¸å¯é‡å¤åº¦å’Œå¹»è¯»ï¼Œæ€ä¹ˆé¿å…ï¼Œåº•å±‚æ€ä¹ˆå®ç°ï¼ˆè¡Œé”è¡¨é”ï¼‰ ä¸‰ é¡¹ç›®ä»‹ç» åˆ†å¸ƒå¼é”æ˜¯æ€ä¹ˆå®ç°çš„ MySQLæœ‰å“ªå‡ ç§joinæ–¹å¼ï¼Œåº•å±‚åŸç†æ˜¯ä»€ä¹ˆ Redisæœ‰å“ªäº›æ•°æ®ç»“æ„ï¼Ÿåº•å±‚çš„ç¼–ç æœ‰å“ªäº›ï¼Ÿæœ‰åºé“¾è¡¨é‡‡ç”¨äº†å“ªäº›ä¸åŒçš„ç¼–ç ï¼Ÿ Redisæ‰©å®¹ï¼Œå¤±æ•ˆkeyæ¸…ç†ç­–ç•¥ Redisçš„æŒä¹…åŒ–æ€ä¹ˆåšï¼Œaofå’Œrdbï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ã€‚ MySQLæ•°æ®åº“æ€ä¹ˆå®ç°åˆ†åº“åˆ†è¡¨ï¼Œä»¥åŠæ•°æ®åŒæ­¥ï¼Ÿ å•ç‚¹ç™»å½•å¦‚ä½•æ˜¯å®ç°ï¼Ÿ è°ˆè°ˆSpringBootå’ŒSpringCloudçš„ç†è§£ æœªæ¥çš„æŠ€æœ¯èŒä¸šæ€ä¹ˆè§„åˆ’ï¼Ÿ ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬å…¬å¸ï¼Ÿ","categories":[{"name":"Java","slug":"Java","permalink":"http://luxiaowan.github.io/categories/Java/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"http://luxiaowan.github.io/tags/é¢è¯•/"},{"name":"é˜¿é‡Œ","slug":"é˜¿é‡Œ","permalink":"http://luxiaowan.github.io/tags/é˜¿é‡Œ/"}]}]}